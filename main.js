/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Vf=Object.create;var Cr=Object.defineProperty;var jf=Object.getOwnPropertyDescriptor;var Hf=Object.getOwnPropertyNames;var Gf=Object.getPrototypeOf,zf=Object.prototype.hasOwnProperty;var Zf=(n,e,t)=>e in n?Cr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Jf=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),qf=(n,e)=>{for(var t in e)Cr(n,t,{get:e[t],enumerable:!0})},Ho=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Hf(e))!zf.call(n,o)&&o!==t&&Cr(n,o,{get:()=>e[o],enumerable:!(i=jf(e,o))||i.enumerable});return n};var _t=(n,e,t)=>(t=n!=null?Vf(Gf(n)):{},Ho(e||!n||!n.__esModule?Cr(t,"default",{value:n,enumerable:!0}):t,n)),Kf=n=>Ho(Cr({},"__esModule",{value:!0}),n);var g=(n,e,t)=>Zf(n,typeof e!="symbol"?e+"":e,t);var ot=Jf((es,ur)=>{(function(n,e){typeof es=="object"&&typeof ur!="undefined"?ur.exports=e():typeof define=="function"&&define.amd?define(e):n.moment=e()})(es,function(){"use strict";var n;function e(){return n.apply(null,arguments)}function t(r){n=r}function i(r){return r instanceof Array||Object.prototype.toString.call(r)==="[object Array]"}function o(r){return r!=null&&Object.prototype.toString.call(r)==="[object Object]"}function l(r,s){return Object.prototype.hasOwnProperty.call(r,s)}function c(r){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(r).length===0;var s;for(s in r)if(l(r,s))return!1;return!0}function d(r){return r===void 0}function m(r){return typeof r=="number"||Object.prototype.toString.call(r)==="[object Number]"}function h(r){return r instanceof Date||Object.prototype.toString.call(r)==="[object Date]"}function y(r,s){var a=[],u,f=r.length;for(u=0;u<f;++u)a.push(s(r[u],u));return a}function _(r,s){for(var a in s)l(s,a)&&(r[a]=s[a]);return l(s,"toString")&&(r.toString=s.toString),l(s,"valueOf")&&(r.valueOf=s.valueOf),r}function w(r,s,a,u){return ko(r,s,a,u,!0).utc()}function x(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function b(r){return r._pf==null&&(r._pf=x()),r._pf}var D;Array.prototype.some?D=Array.prototype.some:D=function(r){var s=Object(this),a=s.length>>>0,u;for(u=0;u<a;u++)if(u in s&&r.call(this,s[u],u,s))return!0;return!1};function F(r){var s=null,a=!1,u=r._d&&!isNaN(r._d.getTime());if(u&&(s=b(r),a=D.call(s.parsedDateParts,function(f){return f!=null}),u=s.overflow<0&&!s.empty&&!s.invalidEra&&!s.invalidMonth&&!s.invalidWeekday&&!s.weekdayMismatch&&!s.nullInput&&!s.invalidFormat&&!s.userInvalidated&&(!s.meridiem||s.meridiem&&a),r._strict&&(u=u&&s.charsLeftOver===0&&s.unusedTokens.length===0&&s.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(r))r._isValid=u;else return u;return r._isValid}function T(r){var s=w(NaN);return r!=null?_(b(s),r):b(s).userInvalidated=!0,s}var C=e.momentProperties=[],A=!1;function L(r,s){var a,u,f,p=C.length;if(d(s._isAMomentObject)||(r._isAMomentObject=s._isAMomentObject),d(s._i)||(r._i=s._i),d(s._f)||(r._f=s._f),d(s._l)||(r._l=s._l),d(s._strict)||(r._strict=s._strict),d(s._tzm)||(r._tzm=s._tzm),d(s._isUTC)||(r._isUTC=s._isUTC),d(s._offset)||(r._offset=s._offset),d(s._pf)||(r._pf=b(s)),d(s._locale)||(r._locale=s._locale),p>0)for(a=0;a<p;a++)u=C[a],f=s[u],d(f)||(r[u]=f);return r}function V(r){L(this,r),this._d=new Date(r._d!=null?r._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),A===!1&&(A=!0,e.updateOffset(this),A=!1)}function P(r){return r instanceof V||r!=null&&r._isAMomentObject!=null}function ve(r){e.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+r)}function K(r,s){var a=!0;return _(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,r),a){var u=[],f,p,v,R=arguments.length;for(p=0;p<R;p++){if(f="",typeof arguments[p]=="object"){f+=`
[`+p+"] ";for(v in arguments[0])l(arguments[0],v)&&(f+=v+": "+arguments[0][v]+", ");f=f.slice(0,-2)}else f=arguments[p];u.push(f)}ve(r+`
Arguments: `+Array.prototype.slice.call(u).join("")+`
`+new Error().stack),a=!1}return s.apply(this,arguments)},s)}var j={};function te(r,s){e.deprecationHandler!=null&&e.deprecationHandler(r,s),j[r]||(ve(s),j[r]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function se(r){return typeof Function!="undefined"&&r instanceof Function||Object.prototype.toString.call(r)==="[object Function]"}function U(r){var s,a;for(a in r)l(r,a)&&(s=r[a],se(s)?this[a]=s:this["_"+a]=s);this._config=r,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function re(r,s){var a=_({},r),u;for(u in s)l(s,u)&&(o(r[u])&&o(s[u])?(a[u]={},_(a[u],r[u]),_(a[u],s[u])):s[u]!=null?a[u]=s[u]:delete a[u]);for(u in r)l(r,u)&&!l(s,u)&&o(r[u])&&(a[u]=_({},a[u]));return a}function le(r){r!=null&&this.set(r)}var I;Object.keys?I=Object.keys:I=function(r){var s,a=[];for(s in r)l(r,s)&&a.push(s);return a};var Ge={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function H(r,s,a){var u=this._calendar[r]||this._calendar.sameElse;return se(u)?u.call(s,a):u}function Ee(r,s,a){var u=""+Math.abs(r),f=s-u.length,p=r>=0;return(p?a?"+":"":"-")+Math.pow(10,Math.max(0,f)).toString().substr(1)+u}var Ri=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,un=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ei={},Xt={};function Q(r,s,a,u){var f=u;typeof u=="string"&&(f=function(){return this[u]()}),r&&(Xt[r]=f),s&&(Xt[s[0]]=function(){return Ee(f.apply(this,arguments),s[1],s[2])}),a&&(Xt[a]=function(){return this.localeData().ordinal(f.apply(this,arguments),r)})}function zl(r){return r.match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"")}function Zl(r){var s=r.match(Ri),a,u;for(a=0,u=s.length;a<u;a++)Xt[s[a]]?s[a]=Xt[s[a]]:s[a]=zl(s[a]);return function(f){var p="",v;for(v=0;v<u;v++)p+=se(s[v])?s[v].call(f,r):s[v];return p}}function dn(r,s){return r.isValid()?(s=eo(s,r.localeData()),Ei[s]=Ei[s]||Zl(s),Ei[s](r)):r.localeData().invalidDate()}function eo(r,s){var a=5;function u(f){return s.longDateFormat(f)||f}for(un.lastIndex=0;a>=0&&un.test(r);)r=r.replace(un,u),un.lastIndex=0,a-=1;return r}var Jl={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function ql(r){var s=this._longDateFormat[r],a=this._longDateFormat[r.toUpperCase()];return s||!a?s:(this._longDateFormat[r]=a.match(Ri).map(function(u){return u==="MMMM"||u==="MM"||u==="DD"||u==="dddd"?u.slice(1):u}).join(""),this._longDateFormat[r])}var Kl="Invalid date";function Xl(){return this._invalidDate}var eu="%d",tu=/\d{1,2}/;function ru(r){return this._ordinal.replace("%d",r)}var nu={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function iu(r,s,a,u){var f=this._relativeTime[a];return se(f)?f(r,s,a,u):f.replace(/%d/i,r)}function su(r,s){var a=this._relativeTime[r>0?"future":"past"];return se(a)?a(s):a.replace(/%s/i,s)}var to={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ze(r){return typeof r=="string"?to[r]||to[r.toLowerCase()]:void 0}function Ui(r){var s={},a,u;for(u in r)l(r,u)&&(a=ze(u),a&&(s[a]=r[u]));return s}var ou={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function au(r){var s=[],a;for(a in r)l(r,a)&&s.push({unit:a,priority:ou[a]});return s.sort(function(u,f){return u.priority-f.priority}),s}var ro=/\d/,$e=/\d\d/,no=/\d{3}/,Yi=/\d{4}/,cn=/[+-]?\d{6}/,fe=/\d\d?/,io=/\d\d\d\d?/,so=/\d\d\d\d\d\d?/,fn=/\d{1,3}/,Ni=/\d{1,4}/,mn=/[+-]?\d{1,6}/,er=/\d+/,hn=/[+-]?\d+/,lu=/Z|[+-]\d\d:?\d\d/gi,pn=/Z|[+-]\d\d(?::?\d\d)?/gi,uu=/[+-]?\d+(\.\d{1,3})?/,Mr=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,tr=/^[1-9]\d?/,Oi=/^([1-9]\d|\d)/,yn;yn={};function E(r,s,a){yn[r]=se(s)?s:function(u,f){return u&&a?a:s}}function du(r,s){return l(yn,r)?yn[r](s._strict,s._locale):new RegExp(cu(r))}function cu(r){return ft(r.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(s,a,u,f,p){return a||u||f||p}))}function ft(r){return r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ze(r){return r<0?Math.ceil(r)||0:Math.floor(r)}function G(r){var s=+r,a=0;return s!==0&&isFinite(s)&&(a=Ze(s)),a}var Qi={};function oe(r,s){var a,u=s,f;for(typeof r=="string"&&(r=[r]),m(s)&&(u=function(p,v){v[s]=G(p)}),f=r.length,a=0;a<f;a++)Qi[r[a]]=u}function Rr(r,s){oe(r,function(a,u,f,p){f._w=f._w||{},s(a,f._w,f,p)})}function fu(r,s,a){s!=null&&l(Qi,r)&&Qi[r](s,a._a,a,r)}function gn(r){return r%4===0&&r%100!==0||r%400===0}var Ue=0,mt=1,st=2,De=3,rt=4,ht=5,Pt=6,mu=7,hu=8;Q("Y",0,0,function(){var r=this.year();return r<=9999?Ee(r,4):"+"+r}),Q(0,["YY",2],0,function(){return this.year()%100}),Q(0,["YYYY",4],0,"year"),Q(0,["YYYYY",5],0,"year"),Q(0,["YYYYYY",6,!0],0,"year"),E("Y",hn),E("YY",fe,$e),E("YYYY",Ni,Yi),E("YYYYY",mn,cn),E("YYYYYY",mn,cn),oe(["YYYYY","YYYYYY"],Ue),oe("YYYY",function(r,s){s[Ue]=r.length===2?e.parseTwoDigitYear(r):G(r)}),oe("YY",function(r,s){s[Ue]=e.parseTwoDigitYear(r)}),oe("Y",function(r,s){s[Ue]=parseInt(r,10)});function Er(r){return gn(r)?366:365}e.parseTwoDigitYear=function(r){return G(r)+(G(r)>68?1900:2e3)};var oo=rr("FullYear",!0);function pu(){return gn(this.year())}function rr(r,s){return function(a){return a!=null?(ao(this,r,a),e.updateOffset(this,s),this):Ur(this,r)}}function Ur(r,s){if(!r.isValid())return NaN;var a=r._d,u=r._isUTC;switch(s){case"Milliseconds":return u?a.getUTCMilliseconds():a.getMilliseconds();case"Seconds":return u?a.getUTCSeconds():a.getSeconds();case"Minutes":return u?a.getUTCMinutes():a.getMinutes();case"Hours":return u?a.getUTCHours():a.getHours();case"Date":return u?a.getUTCDate():a.getDate();case"Day":return u?a.getUTCDay():a.getDay();case"Month":return u?a.getUTCMonth():a.getMonth();case"FullYear":return u?a.getUTCFullYear():a.getFullYear();default:return NaN}}function ao(r,s,a){var u,f,p,v,R;if(!(!r.isValid()||isNaN(a))){switch(u=r._d,f=r._isUTC,s){case"Milliseconds":return void(f?u.setUTCMilliseconds(a):u.setMilliseconds(a));case"Seconds":return void(f?u.setUTCSeconds(a):u.setSeconds(a));case"Minutes":return void(f?u.setUTCMinutes(a):u.setMinutes(a));case"Hours":return void(f?u.setUTCHours(a):u.setHours(a));case"Date":return void(f?u.setUTCDate(a):u.setDate(a));case"FullYear":break;default:return}p=a,v=r.month(),R=r.date(),R=R===29&&v===1&&!gn(p)?28:R,f?u.setUTCFullYear(p,v,R):u.setFullYear(p,v,R)}}function yu(r){return r=ze(r),se(this[r])?this[r]():this}function gu(r,s){if(typeof r=="object"){r=Ui(r);var a=au(r),u,f=a.length;for(u=0;u<f;u++)this[a[u].unit](r[a[u].unit])}else if(r=ze(r),se(this[r]))return this[r](s);return this}function bu(r,s){return(r%s+s)%s}var we;Array.prototype.indexOf?we=Array.prototype.indexOf:we=function(r){var s;for(s=0;s<this.length;++s)if(this[s]===r)return s;return-1};function Li(r,s){if(isNaN(r)||isNaN(s))return NaN;var a=bu(s,12);return r+=(s-a)/12,a===1?gn(r)?29:28:31-a%7%2}Q("M",["MM",2],"Mo",function(){return this.month()+1}),Q("MMM",0,0,function(r){return this.localeData().monthsShort(this,r)}),Q("MMMM",0,0,function(r){return this.localeData().months(this,r)}),E("M",fe,tr),E("MM",fe,$e),E("MMM",function(r,s){return s.monthsShortRegex(r)}),E("MMMM",function(r,s){return s.monthsRegex(r)}),oe(["M","MM"],function(r,s){s[mt]=G(r)-1}),oe(["MMM","MMMM"],function(r,s,a,u){var f=a._locale.monthsParse(r,u,a._strict);f!=null?s[mt]=f:b(a).invalidMonth=r});var vu="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),lo="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),uo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,wu=Mr,_u=Mr;function xu(r,s){return r?i(this._months)?this._months[r.month()]:this._months[(this._months.isFormat||uo).test(s)?"format":"standalone"][r.month()]:i(this._months)?this._months:this._months.standalone}function ku(r,s){return r?i(this._monthsShort)?this._monthsShort[r.month()]:this._monthsShort[uo.test(s)?"format":"standalone"][r.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Du(r,s,a){var u,f,p,v=r.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],u=0;u<12;++u)p=w([2e3,u]),this._shortMonthsParse[u]=this.monthsShort(p,"").toLocaleLowerCase(),this._longMonthsParse[u]=this.months(p,"").toLocaleLowerCase();return a?s==="MMM"?(f=we.call(this._shortMonthsParse,v),f!==-1?f:null):(f=we.call(this._longMonthsParse,v),f!==-1?f:null):s==="MMM"?(f=we.call(this._shortMonthsParse,v),f!==-1?f:(f=we.call(this._longMonthsParse,v),f!==-1?f:null)):(f=we.call(this._longMonthsParse,v),f!==-1?f:(f=we.call(this._shortMonthsParse,v),f!==-1?f:null))}function Su(r,s,a){var u,f,p;if(this._monthsParseExact)return Du.call(this,r,s,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),u=0;u<12;u++){if(f=w([2e3,u]),a&&!this._longMonthsParse[u]&&(this._longMonthsParse[u]=new RegExp("^"+this.months(f,"").replace(".","")+"$","i"),this._shortMonthsParse[u]=new RegExp("^"+this.monthsShort(f,"").replace(".","")+"$","i")),!a&&!this._monthsParse[u]&&(p="^"+this.months(f,"")+"|^"+this.monthsShort(f,""),this._monthsParse[u]=new RegExp(p.replace(".",""),"i")),a&&s==="MMMM"&&this._longMonthsParse[u].test(r))return u;if(a&&s==="MMM"&&this._shortMonthsParse[u].test(r))return u;if(!a&&this._monthsParse[u].test(r))return u}}function co(r,s){if(!r.isValid())return r;if(typeof s=="string"){if(/^\d+$/.test(s))s=G(s);else if(s=r.localeData().monthsParse(s),!m(s))return r}var a=s,u=r.date();return u=u<29?u:Math.min(u,Li(r.year(),a)),r._isUTC?r._d.setUTCMonth(a,u):r._d.setMonth(a,u),r}function fo(r){return r!=null?(co(this,r),e.updateOffset(this,!0),this):Ur(this,"Month")}function Tu(){return Li(this.year(),this.month())}function Fu(r){return this._monthsParseExact?(l(this,"_monthsRegex")||mo.call(this),r?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=wu),this._monthsShortStrictRegex&&r?this._monthsShortStrictRegex:this._monthsShortRegex)}function Mu(r){return this._monthsParseExact?(l(this,"_monthsRegex")||mo.call(this),r?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=_u),this._monthsStrictRegex&&r?this._monthsStrictRegex:this._monthsRegex)}function mo(){function r(B,Z){return Z.length-B.length}var s=[],a=[],u=[],f,p,v,R;for(f=0;f<12;f++)p=w([2e3,f]),v=ft(this.monthsShort(p,"")),R=ft(this.months(p,"")),s.push(v),a.push(R),u.push(R),u.push(v);s.sort(r),a.sort(r),u.sort(r),this._monthsRegex=new RegExp("^("+u.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Ru(r,s,a,u,f,p,v){var R;return r<100&&r>=0?(R=new Date(r+400,s,a,u,f,p,v),isFinite(R.getFullYear())&&R.setFullYear(r)):R=new Date(r,s,a,u,f,p,v),R}function Yr(r){var s,a;return r<100&&r>=0?(a=Array.prototype.slice.call(arguments),a[0]=r+400,s=new Date(Date.UTC.apply(null,a)),isFinite(s.getUTCFullYear())&&s.setUTCFullYear(r)):s=new Date(Date.UTC.apply(null,arguments)),s}function bn(r,s,a){var u=7+s-a,f=(7+Yr(r,0,u).getUTCDay()-s)%7;return-f+u-1}function ho(r,s,a,u,f){var p=(7+a-u)%7,v=bn(r,u,f),R=1+7*(s-1)+p+v,B,Z;return R<=0?(B=r-1,Z=Er(B)+R):R>Er(r)?(B=r+1,Z=R-Er(r)):(B=r,Z=R),{year:B,dayOfYear:Z}}function Nr(r,s,a){var u=bn(r.year(),s,a),f=Math.floor((r.dayOfYear()-u-1)/7)+1,p,v;return f<1?(v=r.year()-1,p=f+pt(v,s,a)):f>pt(r.year(),s,a)?(p=f-pt(r.year(),s,a),v=r.year()+1):(v=r.year(),p=f),{week:p,year:v}}function pt(r,s,a){var u=bn(r,s,a),f=bn(r+1,s,a);return(Er(r)-u+f)/7}Q("w",["ww",2],"wo","week"),Q("W",["WW",2],"Wo","isoWeek"),E("w",fe,tr),E("ww",fe,$e),E("W",fe,tr),E("WW",fe,$e),Rr(["w","ww","W","WW"],function(r,s,a,u){s[u.substr(0,1)]=G(r)});function Eu(r){return Nr(r,this._week.dow,this._week.doy).week}var Uu={dow:0,doy:6};function Yu(){return this._week.dow}function Nu(){return this._week.doy}function Ou(r){var s=this.localeData().week(this);return r==null?s:this.add((r-s)*7,"d")}function Qu(r){var s=Nr(this,1,4).week;return r==null?s:this.add((r-s)*7,"d")}Q("d",0,"do","day"),Q("dd",0,0,function(r){return this.localeData().weekdaysMin(this,r)}),Q("ddd",0,0,function(r){return this.localeData().weekdaysShort(this,r)}),Q("dddd",0,0,function(r){return this.localeData().weekdays(this,r)}),Q("e",0,0,"weekday"),Q("E",0,0,"isoWeekday"),E("d",fe),E("e",fe),E("E",fe),E("dd",function(r,s){return s.weekdaysMinRegex(r)}),E("ddd",function(r,s){return s.weekdaysShortRegex(r)}),E("dddd",function(r,s){return s.weekdaysRegex(r)}),Rr(["dd","ddd","dddd"],function(r,s,a,u){var f=a._locale.weekdaysParse(r,u,a._strict);f!=null?s.d=f:b(a).invalidWeekday=r}),Rr(["d","e","E"],function(r,s,a,u){s[u]=G(r)});function Lu(r,s){return typeof r!="string"?r:isNaN(r)?(r=s.weekdaysParse(r),typeof r=="number"?r:null):parseInt(r,10)}function Cu(r,s){return typeof r=="string"?s.weekdaysParse(r)%7||7:isNaN(r)?null:r}function Ci(r,s){return r.slice(s,7).concat(r.slice(0,s))}var Iu="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),po="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Bu="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Pu=Mr,Au=Mr,Wu=Mr;function $u(r,s){var a=i(this._weekdays)?this._weekdays:this._weekdays[r&&r!==!0&&this._weekdays.isFormat.test(s)?"format":"standalone"];return r===!0?Ci(a,this._week.dow):r?a[r.day()]:a}function Vu(r){return r===!0?Ci(this._weekdaysShort,this._week.dow):r?this._weekdaysShort[r.day()]:this._weekdaysShort}function ju(r){return r===!0?Ci(this._weekdaysMin,this._week.dow):r?this._weekdaysMin[r.day()]:this._weekdaysMin}function Hu(r,s,a){var u,f,p,v=r.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],u=0;u<7;++u)p=w([2e3,1]).day(u),this._minWeekdaysParse[u]=this.weekdaysMin(p,"").toLocaleLowerCase(),this._shortWeekdaysParse[u]=this.weekdaysShort(p,"").toLocaleLowerCase(),this._weekdaysParse[u]=this.weekdays(p,"").toLocaleLowerCase();return a?s==="dddd"?(f=we.call(this._weekdaysParse,v),f!==-1?f:null):s==="ddd"?(f=we.call(this._shortWeekdaysParse,v),f!==-1?f:null):(f=we.call(this._minWeekdaysParse,v),f!==-1?f:null):s==="dddd"?(f=we.call(this._weekdaysParse,v),f!==-1||(f=we.call(this._shortWeekdaysParse,v),f!==-1)?f:(f=we.call(this._minWeekdaysParse,v),f!==-1?f:null)):s==="ddd"?(f=we.call(this._shortWeekdaysParse,v),f!==-1||(f=we.call(this._weekdaysParse,v),f!==-1)?f:(f=we.call(this._minWeekdaysParse,v),f!==-1?f:null)):(f=we.call(this._minWeekdaysParse,v),f!==-1||(f=we.call(this._weekdaysParse,v),f!==-1)?f:(f=we.call(this._shortWeekdaysParse,v),f!==-1?f:null))}function Gu(r,s,a){var u,f,p;if(this._weekdaysParseExact)return Hu.call(this,r,s,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),u=0;u<7;u++){if(f=w([2e3,1]).day(u),a&&!this._fullWeekdaysParse[u]&&(this._fullWeekdaysParse[u]=new RegExp("^"+this.weekdays(f,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[u]=new RegExp("^"+this.weekdaysShort(f,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[u]=new RegExp("^"+this.weekdaysMin(f,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[u]||(p="^"+this.weekdays(f,"")+"|^"+this.weekdaysShort(f,"")+"|^"+this.weekdaysMin(f,""),this._weekdaysParse[u]=new RegExp(p.replace(".",""),"i")),a&&s==="dddd"&&this._fullWeekdaysParse[u].test(r))return u;if(a&&s==="ddd"&&this._shortWeekdaysParse[u].test(r))return u;if(a&&s==="dd"&&this._minWeekdaysParse[u].test(r))return u;if(!a&&this._weekdaysParse[u].test(r))return u}}function zu(r){if(!this.isValid())return r!=null?this:NaN;var s=Ur(this,"Day");return r!=null?(r=Lu(r,this.localeData()),this.add(r-s,"d")):s}function Zu(r){if(!this.isValid())return r!=null?this:NaN;var s=(this.day()+7-this.localeData()._week.dow)%7;return r==null?s:this.add(r-s,"d")}function Ju(r){if(!this.isValid())return r!=null?this:NaN;if(r!=null){var s=Cu(r,this.localeData());return this.day(this.day()%7?s:s-7)}else return this.day()||7}function qu(r){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ii.call(this),r?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Pu),this._weekdaysStrictRegex&&r?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ku(r){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ii.call(this),r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Au),this._weekdaysShortStrictRegex&&r?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xu(r){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ii.call(this),r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Wu),this._weekdaysMinStrictRegex&&r?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ii(){function r(Ce,wt){return wt.length-Ce.length}var s=[],a=[],u=[],f=[],p,v,R,B,Z;for(p=0;p<7;p++)v=w([2e3,1]).day(p),R=ft(this.weekdaysMin(v,"")),B=ft(this.weekdaysShort(v,"")),Z=ft(this.weekdays(v,"")),s.push(R),a.push(B),u.push(Z),f.push(R),f.push(B),f.push(Z);s.sort(r),a.sort(r),u.sort(r),f.sort(r),this._weekdaysRegex=new RegExp("^("+f.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Bi(){return this.hours()%12||12}function ed(){return this.hours()||24}Q("H",["HH",2],0,"hour"),Q("h",["hh",2],0,Bi),Q("k",["kk",2],0,ed),Q("hmm",0,0,function(){return""+Bi.apply(this)+Ee(this.minutes(),2)}),Q("hmmss",0,0,function(){return""+Bi.apply(this)+Ee(this.minutes(),2)+Ee(this.seconds(),2)}),Q("Hmm",0,0,function(){return""+this.hours()+Ee(this.minutes(),2)}),Q("Hmmss",0,0,function(){return""+this.hours()+Ee(this.minutes(),2)+Ee(this.seconds(),2)});function yo(r,s){Q(r,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),s)})}yo("a",!0),yo("A",!1);function go(r,s){return s._meridiemParse}E("a",go),E("A",go),E("H",fe,Oi),E("h",fe,tr),E("k",fe,tr),E("HH",fe,$e),E("hh",fe,$e),E("kk",fe,$e),E("hmm",io),E("hmmss",so),E("Hmm",io),E("Hmmss",so),oe(["H","HH"],De),oe(["k","kk"],function(r,s,a){var u=G(r);s[De]=u===24?0:u}),oe(["a","A"],function(r,s,a){a._isPm=a._locale.isPM(r),a._meridiem=r}),oe(["h","hh"],function(r,s,a){s[De]=G(r),b(a).bigHour=!0}),oe("hmm",function(r,s,a){var u=r.length-2;s[De]=G(r.substr(0,u)),s[rt]=G(r.substr(u)),b(a).bigHour=!0}),oe("hmmss",function(r,s,a){var u=r.length-4,f=r.length-2;s[De]=G(r.substr(0,u)),s[rt]=G(r.substr(u,2)),s[ht]=G(r.substr(f)),b(a).bigHour=!0}),oe("Hmm",function(r,s,a){var u=r.length-2;s[De]=G(r.substr(0,u)),s[rt]=G(r.substr(u))}),oe("Hmmss",function(r,s,a){var u=r.length-4,f=r.length-2;s[De]=G(r.substr(0,u)),s[rt]=G(r.substr(u,2)),s[ht]=G(r.substr(f))});function td(r){return(r+"").toLowerCase().charAt(0)==="p"}var rd=/[ap]\.?m?\.?/i,nd=rr("Hours",!0);function id(r,s,a){return r>11?a?"pm":"PM":a?"am":"AM"}var bo={calendar:Ge,longDateFormat:Jl,invalidDate:Kl,ordinal:eu,dayOfMonthOrdinalParse:tu,relativeTime:nu,months:vu,monthsShort:lo,week:Uu,weekdays:Iu,weekdaysMin:Bu,weekdaysShort:po,meridiemParse:rd},pe={},Or={},Qr;function sd(r,s){var a,u=Math.min(r.length,s.length);for(a=0;a<u;a+=1)if(r[a]!==s[a])return a;return u}function vo(r){return r&&r.toLowerCase().replace("_","-")}function od(r){for(var s=0,a,u,f,p;s<r.length;){for(p=vo(r[s]).split("-"),a=p.length,u=vo(r[s+1]),u=u?u.split("-"):null;a>0;){if(f=vn(p.slice(0,a).join("-")),f)return f;if(u&&u.length>=a&&sd(p,u)>=a-1)break;a--}s++}return Qr}function ad(r){return!!(r&&r.match("^[^/\\\\]*$"))}function vn(r){var s=null,a;if(pe[r]===void 0&&typeof ur!="undefined"&&ur&&ur.exports&&ad(r))try{s=Qr._abbr,a=require,a("./locale/"+r),Rt(s)}catch(u){pe[r]=null}return pe[r]}function Rt(r,s){var a;return r&&(d(s)?a=yt(r):a=Pi(r,s),a?Qr=a:typeof console!="undefined"&&console.warn&&console.warn("Locale "+r+" not found. Did you forget to load it?")),Qr._abbr}function Pi(r,s){if(s!==null){var a,u=bo;if(s.abbr=r,pe[r]!=null)te("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),u=pe[r]._config;else if(s.parentLocale!=null)if(pe[s.parentLocale]!=null)u=pe[s.parentLocale]._config;else if(a=vn(s.parentLocale),a!=null)u=a._config;else return Or[s.parentLocale]||(Or[s.parentLocale]=[]),Or[s.parentLocale].push({name:r,config:s}),null;return pe[r]=new le(re(u,s)),Or[r]&&Or[r].forEach(function(f){Pi(f.name,f.config)}),Rt(r),pe[r]}else return delete pe[r],null}function ld(r,s){if(s!=null){var a,u,f=bo;pe[r]!=null&&pe[r].parentLocale!=null?pe[r].set(re(pe[r]._config,s)):(u=vn(r),u!=null&&(f=u._config),s=re(f,s),u==null&&(s.abbr=r),a=new le(s),a.parentLocale=pe[r],pe[r]=a),Rt(r)}else pe[r]!=null&&(pe[r].parentLocale!=null?(pe[r]=pe[r].parentLocale,r===Rt()&&Rt(r)):pe[r]!=null&&delete pe[r]);return pe[r]}function yt(r){var s;if(r&&r._locale&&r._locale._abbr&&(r=r._locale._abbr),!r)return Qr;if(!i(r)){if(s=vn(r),s)return s;r=[r]}return od(r)}function ud(){return I(pe)}function Ai(r){var s,a=r._a;return a&&b(r).overflow===-2&&(s=a[mt]<0||a[mt]>11?mt:a[st]<1||a[st]>Li(a[Ue],a[mt])?st:a[De]<0||a[De]>24||a[De]===24&&(a[rt]!==0||a[ht]!==0||a[Pt]!==0)?De:a[rt]<0||a[rt]>59?rt:a[ht]<0||a[ht]>59?ht:a[Pt]<0||a[Pt]>999?Pt:-1,b(r)._overflowDayOfYear&&(s<Ue||s>st)&&(s=st),b(r)._overflowWeeks&&s===-1&&(s=mu),b(r)._overflowWeekday&&s===-1&&(s=hu),b(r).overflow=s),r}var dd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,cd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fd=/Z|[+-]\d\d(?::?\d\d)?/,wn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Wi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],md=/^\/?Date\((-?\d+)/i,hd=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,pd={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function wo(r){var s,a,u=r._i,f=dd.exec(u)||cd.exec(u),p,v,R,B,Z=wn.length,Ce=Wi.length;if(f){for(b(r).iso=!0,s=0,a=Z;s<a;s++)if(wn[s][1].exec(f[1])){v=wn[s][0],p=wn[s][2]!==!1;break}if(v==null){r._isValid=!1;return}if(f[3]){for(s=0,a=Ce;s<a;s++)if(Wi[s][1].exec(f[3])){R=(f[2]||" ")+Wi[s][0];break}if(R==null){r._isValid=!1;return}}if(!p&&R!=null){r._isValid=!1;return}if(f[4])if(fd.exec(f[4]))B="Z";else{r._isValid=!1;return}r._f=v+(R||"")+(B||""),Vi(r)}else r._isValid=!1}function yd(r,s,a,u,f,p){var v=[gd(r),lo.indexOf(s),parseInt(a,10),parseInt(u,10),parseInt(f,10)];return p&&v.push(parseInt(p,10)),v}function gd(r){var s=parseInt(r,10);return s<=49?2e3+s:s<=999?1900+s:s}function bd(r){return r.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function vd(r,s,a){if(r){var u=po.indexOf(r),f=new Date(s[0],s[1],s[2]).getDay();if(u!==f)return b(a).weekdayMismatch=!0,a._isValid=!1,!1}return!0}function wd(r,s,a){if(r)return pd[r];if(s)return 0;var u=parseInt(a,10),f=u%100,p=(u-f)/100;return p*60+f}function _o(r){var s=hd.exec(bd(r._i)),a;if(s){if(a=yd(s[4],s[3],s[2],s[5],s[6],s[7]),!vd(s[1],a,r))return;r._a=a,r._tzm=wd(s[8],s[9],s[10]),r._d=Yr.apply(null,r._a),r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),b(r).rfc2822=!0}else r._isValid=!1}function _d(r){var s=md.exec(r._i);if(s!==null){r._d=new Date(+s[1]);return}if(wo(r),r._isValid===!1)delete r._isValid;else return;if(_o(r),r._isValid===!1)delete r._isValid;else return;r._strict?r._isValid=!1:e.createFromInputFallback(r)}e.createFromInputFallback=K("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(r){r._d=new Date(r._i+(r._useUTC?" UTC":""))});function nr(r,s,a){return r!=null?r:s!=null?s:a}function xd(r){var s=new Date(e.now());return r._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()]}function $i(r){var s,a,u=[],f,p,v;if(!r._d){for(f=xd(r),r._w&&r._a[st]==null&&r._a[mt]==null&&kd(r),r._dayOfYear!=null&&(v=nr(r._a[Ue],f[Ue]),(r._dayOfYear>Er(v)||r._dayOfYear===0)&&(b(r)._overflowDayOfYear=!0),a=Yr(v,0,r._dayOfYear),r._a[mt]=a.getUTCMonth(),r._a[st]=a.getUTCDate()),s=0;s<3&&r._a[s]==null;++s)r._a[s]=u[s]=f[s];for(;s<7;s++)r._a[s]=u[s]=r._a[s]==null?s===2?1:0:r._a[s];r._a[De]===24&&r._a[rt]===0&&r._a[ht]===0&&r._a[Pt]===0&&(r._nextDay=!0,r._a[De]=0),r._d=(r._useUTC?Yr:Ru).apply(null,u),p=r._useUTC?r._d.getUTCDay():r._d.getDay(),r._tzm!=null&&r._d.setUTCMinutes(r._d.getUTCMinutes()-r._tzm),r._nextDay&&(r._a[De]=24),r._w&&typeof r._w.d!="undefined"&&r._w.d!==p&&(b(r).weekdayMismatch=!0)}}function kd(r){var s,a,u,f,p,v,R,B,Z;s=r._w,s.GG!=null||s.W!=null||s.E!=null?(p=1,v=4,a=nr(s.GG,r._a[Ue],Nr(me(),1,4).year),u=nr(s.W,1),f=nr(s.E,1),(f<1||f>7)&&(B=!0)):(p=r._locale._week.dow,v=r._locale._week.doy,Z=Nr(me(),p,v),a=nr(s.gg,r._a[Ue],Z.year),u=nr(s.w,Z.week),s.d!=null?(f=s.d,(f<0||f>6)&&(B=!0)):s.e!=null?(f=s.e+p,(s.e<0||s.e>6)&&(B=!0)):f=p),u<1||u>pt(a,p,v)?b(r)._overflowWeeks=!0:B!=null?b(r)._overflowWeekday=!0:(R=ho(a,u,f,p,v),r._a[Ue]=R.year,r._dayOfYear=R.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function Vi(r){if(r._f===e.ISO_8601){wo(r);return}if(r._f===e.RFC_2822){_o(r);return}r._a=[],b(r).empty=!0;var s=""+r._i,a,u,f,p,v,R=s.length,B=0,Z,Ce;for(f=eo(r._f,r._locale).match(Ri)||[],Ce=f.length,a=0;a<Ce;a++)p=f[a],u=(s.match(du(p,r))||[])[0],u&&(v=s.substr(0,s.indexOf(u)),v.length>0&&b(r).unusedInput.push(v),s=s.slice(s.indexOf(u)+u.length),B+=u.length),Xt[p]?(u?b(r).empty=!1:b(r).unusedTokens.push(p),fu(p,u,r)):r._strict&&!u&&b(r).unusedTokens.push(p);b(r).charsLeftOver=R-B,s.length>0&&b(r).unusedInput.push(s),r._a[De]<=12&&b(r).bigHour===!0&&r._a[De]>0&&(b(r).bigHour=void 0),b(r).parsedDateParts=r._a.slice(0),b(r).meridiem=r._meridiem,r._a[De]=Dd(r._locale,r._a[De],r._meridiem),Z=b(r).era,Z!==null&&(r._a[Ue]=r._locale.erasConvertYear(Z,r._a[Ue])),$i(r),Ai(r)}function Dd(r,s,a){var u;return a==null?s:r.meridiemHour!=null?r.meridiemHour(s,a):(r.isPM!=null&&(u=r.isPM(a),u&&s<12&&(s+=12),!u&&s===12&&(s=0)),s)}function Sd(r){var s,a,u,f,p,v,R=!1,B=r._f.length;if(B===0){b(r).invalidFormat=!0,r._d=new Date(NaN);return}for(f=0;f<B;f++)p=0,v=!1,s=L({},r),r._useUTC!=null&&(s._useUTC=r._useUTC),s._f=r._f[f],Vi(s),F(s)&&(v=!0),p+=b(s).charsLeftOver,p+=b(s).unusedTokens.length*10,b(s).score=p,R?p<u&&(u=p,a=s):(u==null||p<u||v)&&(u=p,a=s,v&&(R=!0));_(r,a||s)}function Td(r){if(!r._d){var s=Ui(r._i),a=s.day===void 0?s.date:s.day;r._a=y([s.year,s.month,a,s.hour,s.minute,s.second,s.millisecond],function(u){return u&&parseInt(u,10)}),$i(r)}}function Fd(r){var s=new V(Ai(xo(r)));return s._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function xo(r){var s=r._i,a=r._f;return r._locale=r._locale||yt(r._l),s===null||a===void 0&&s===""?T({nullInput:!0}):(typeof s=="string"&&(r._i=s=r._locale.preparse(s)),P(s)?new V(Ai(s)):(h(s)?r._d=s:i(a)?Sd(r):a?Vi(r):Md(r),F(r)||(r._d=null),r))}function Md(r){var s=r._i;d(s)?r._d=new Date(e.now()):h(s)?r._d=new Date(s.valueOf()):typeof s=="string"?_d(r):i(s)?(r._a=y(s.slice(0),function(a){return parseInt(a,10)}),$i(r)):o(s)?Td(r):m(s)?r._d=new Date(s):e.createFromInputFallback(r)}function ko(r,s,a,u,f){var p={};return(s===!0||s===!1)&&(u=s,s=void 0),(a===!0||a===!1)&&(u=a,a=void 0),(o(r)&&c(r)||i(r)&&r.length===0)&&(r=void 0),p._isAMomentObject=!0,p._useUTC=p._isUTC=f,p._l=a,p._i=r,p._f=s,p._strict=u,Fd(p)}function me(r,s,a,u){return ko(r,s,a,u,!1)}var Rd=K("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=me.apply(null,arguments);return this.isValid()&&r.isValid()?r<this?this:r:T()}),Ed=K("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var r=me.apply(null,arguments);return this.isValid()&&r.isValid()?r>this?this:r:T()});function Do(r,s){var a,u;if(s.length===1&&i(s[0])&&(s=s[0]),!s.length)return me();for(a=s[0],u=1;u<s.length;++u)(!s[u].isValid()||s[u][r](a))&&(a=s[u]);return a}function Ud(){var r=[].slice.call(arguments,0);return Do("isBefore",r)}function Yd(){var r=[].slice.call(arguments,0);return Do("isAfter",r)}var Nd=function(){return Date.now?Date.now():+new Date},Lr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Od(r){var s,a=!1,u,f=Lr.length;for(s in r)if(l(r,s)&&!(we.call(Lr,s)!==-1&&(r[s]==null||!isNaN(r[s]))))return!1;for(u=0;u<f;++u)if(r[Lr[u]]){if(a)return!1;parseFloat(r[Lr[u]])!==G(r[Lr[u]])&&(a=!0)}return!0}function Qd(){return this._isValid}function Ld(){return nt(NaN)}function _n(r){var s=Ui(r),a=s.year||0,u=s.quarter||0,f=s.month||0,p=s.week||s.isoWeek||0,v=s.day||0,R=s.hour||0,B=s.minute||0,Z=s.second||0,Ce=s.millisecond||0;this._isValid=Od(s),this._milliseconds=+Ce+Z*1e3+B*6e4+R*1e3*60*60,this._days=+v+p*7,this._months=+f+u*3+a*12,this._data={},this._locale=yt(),this._bubble()}function xn(r){return r instanceof _n}function ji(r){return r<0?Math.round(-1*r)*-1:Math.round(r)}function Cd(r,s,a){var u=Math.min(r.length,s.length),f=Math.abs(r.length-s.length),p=0,v;for(v=0;v<u;v++)(a&&r[v]!==s[v]||!a&&G(r[v])!==G(s[v]))&&p++;return p+f}function So(r,s){Q(r,0,0,function(){var a=this.utcOffset(),u="+";return a<0&&(a=-a,u="-"),u+Ee(~~(a/60),2)+s+Ee(~~a%60,2)})}So("Z",":"),So("ZZ",""),E("Z",pn),E("ZZ",pn),oe(["Z","ZZ"],function(r,s,a){a._useUTC=!0,a._tzm=Hi(pn,r)});var Id=/([\+\-]|\d\d)/gi;function Hi(r,s){var a=(s||"").match(r),u,f,p;return a===null?null:(u=a[a.length-1]||[],f=(u+"").match(Id)||["-",0,0],p=+(f[1]*60)+G(f[2]),p===0?0:f[0]==="+"?p:-p)}function Gi(r,s){var a,u;return s._isUTC?(a=s.clone(),u=(P(r)||h(r)?r.valueOf():me(r).valueOf())-a.valueOf(),a._d.setTime(a._d.valueOf()+u),e.updateOffset(a,!1),a):me(r).local()}function zi(r){return-Math.round(r._d.getTimezoneOffset())}e.updateOffset=function(){};function Bd(r,s,a){var u=this._offset||0,f;if(!this.isValid())return r!=null?this:NaN;if(r!=null){if(typeof r=="string"){if(r=Hi(pn,r),r===null)return this}else Math.abs(r)<16&&!a&&(r=r*60);return!this._isUTC&&s&&(f=zi(this)),this._offset=r,this._isUTC=!0,f!=null&&this.add(f,"m"),u!==r&&(!s||this._changeInProgress?Ro(this,nt(r-u,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?u:zi(this)}function Pd(r,s){return r!=null?(typeof r!="string"&&(r=-r),this.utcOffset(r,s),this):-this.utcOffset()}function Ad(r){return this.utcOffset(0,r)}function Wd(r){return this._isUTC&&(this.utcOffset(0,r),this._isUTC=!1,r&&this.subtract(zi(this),"m")),this}function $d(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var r=Hi(lu,this._i);r!=null?this.utcOffset(r):this.utcOffset(0,!0)}return this}function Vd(r){return this.isValid()?(r=r?me(r).utcOffset():0,(this.utcOffset()-r)%60===0):!1}function jd(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Hd(){if(!d(this._isDSTShifted))return this._isDSTShifted;var r={},s;return L(r,this),r=xo(r),r._a?(s=r._isUTC?w(r._a):me(r._a),this._isDSTShifted=this.isValid()&&Cd(r._a,s.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Gd(){return this.isValid()?!this._isUTC:!1}function zd(){return this.isValid()?this._isUTC:!1}function To(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Zd=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Jd=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function nt(r,s){var a=r,u=null,f,p,v;return xn(r)?a={ms:r._milliseconds,d:r._days,M:r._months}:m(r)||!isNaN(+r)?(a={},s?a[s]=+r:a.milliseconds=+r):(u=Zd.exec(r))?(f=u[1]==="-"?-1:1,a={y:0,d:G(u[st])*f,h:G(u[De])*f,m:G(u[rt])*f,s:G(u[ht])*f,ms:G(ji(u[Pt]*1e3))*f}):(u=Jd.exec(r))?(f=u[1]==="-"?-1:1,a={y:At(u[2],f),M:At(u[3],f),w:At(u[4],f),d:At(u[5],f),h:At(u[6],f),m:At(u[7],f),s:At(u[8],f)}):a==null?a={}:typeof a=="object"&&("from"in a||"to"in a)&&(v=qd(me(a.from),me(a.to)),a={},a.ms=v.milliseconds,a.M=v.months),p=new _n(a),xn(r)&&l(r,"_locale")&&(p._locale=r._locale),xn(r)&&l(r,"_isValid")&&(p._isValid=r._isValid),p}nt.fn=_n.prototype,nt.invalid=Ld;function At(r,s){var a=r&&parseFloat(r.replace(",","."));return(isNaN(a)?0:a)*s}function Fo(r,s){var a={};return a.months=s.month()-r.month()+(s.year()-r.year())*12,r.clone().add(a.months,"M").isAfter(s)&&--a.months,a.milliseconds=+s-+r.clone().add(a.months,"M"),a}function qd(r,s){var a;return r.isValid()&&s.isValid()?(s=Gi(s,r),r.isBefore(s)?a=Fo(r,s):(a=Fo(s,r),a.milliseconds=-a.milliseconds,a.months=-a.months),a):{milliseconds:0,months:0}}function Mo(r,s){return function(a,u){var f,p;return u!==null&&!isNaN(+u)&&(te(s,"moment()."+s+"(period, number) is deprecated. Please use moment()."+s+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),p=a,a=u,u=p),f=nt(a,u),Ro(this,f,r),this}}function Ro(r,s,a,u){var f=s._milliseconds,p=ji(s._days),v=ji(s._months);r.isValid()&&(u=u==null?!0:u,v&&co(r,Ur(r,"Month")+v*a),p&&ao(r,"Date",Ur(r,"Date")+p*a),f&&r._d.setTime(r._d.valueOf()+f*a),u&&e.updateOffset(r,p||v))}var Kd=Mo(1,"add"),Xd=Mo(-1,"subtract");function Eo(r){return typeof r=="string"||r instanceof String}function ec(r){return P(r)||h(r)||Eo(r)||m(r)||rc(r)||tc(r)||r===null||r===void 0}function tc(r){var s=o(r)&&!c(r),a=!1,u=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],f,p,v=u.length;for(f=0;f<v;f+=1)p=u[f],a=a||l(r,p);return s&&a}function rc(r){var s=i(r),a=!1;return s&&(a=r.filter(function(u){return!m(u)&&Eo(r)}).length===0),s&&a}function nc(r){var s=o(r)&&!c(r),a=!1,u=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],f,p;for(f=0;f<u.length;f+=1)p=u[f],a=a||l(r,p);return s&&a}function ic(r,s){var a=r.diff(s,"days",!0);return a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse"}function sc(r,s){arguments.length===1&&(arguments[0]?ec(arguments[0])?(r=arguments[0],s=void 0):nc(arguments[0])&&(s=arguments[0],r=void 0):(r=void 0,s=void 0));var a=r||me(),u=Gi(a,this).startOf("day"),f=e.calendarFormat(this,u)||"sameElse",p=s&&(se(s[f])?s[f].call(this,a):s[f]);return this.format(p||this.localeData().calendar(f,this,me(a)))}function oc(){return new V(this)}function ac(r,s){var a=P(r)?r:me(r);return this.isValid()&&a.isValid()?(s=ze(s)||"millisecond",s==="millisecond"?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(s).valueOf()):!1}function lc(r,s){var a=P(r)?r:me(r);return this.isValid()&&a.isValid()?(s=ze(s)||"millisecond",s==="millisecond"?this.valueOf()<a.valueOf():this.clone().endOf(s).valueOf()<a.valueOf()):!1}function uc(r,s,a,u){var f=P(r)?r:me(r),p=P(s)?s:me(s);return this.isValid()&&f.isValid()&&p.isValid()?(u=u||"()",(u[0]==="("?this.isAfter(f,a):!this.isBefore(f,a))&&(u[1]===")"?this.isBefore(p,a):!this.isAfter(p,a))):!1}function dc(r,s){var a=P(r)?r:me(r),u;return this.isValid()&&a.isValid()?(s=ze(s)||"millisecond",s==="millisecond"?this.valueOf()===a.valueOf():(u=a.valueOf(),this.clone().startOf(s).valueOf()<=u&&u<=this.clone().endOf(s).valueOf())):!1}function cc(r,s){return this.isSame(r,s)||this.isAfter(r,s)}function fc(r,s){return this.isSame(r,s)||this.isBefore(r,s)}function mc(r,s,a){var u,f,p;if(!this.isValid())return NaN;if(u=Gi(r,this),!u.isValid())return NaN;switch(f=(u.utcOffset()-this.utcOffset())*6e4,s=ze(s),s){case"year":p=kn(this,u)/12;break;case"month":p=kn(this,u);break;case"quarter":p=kn(this,u)/3;break;case"second":p=(this-u)/1e3;break;case"minute":p=(this-u)/6e4;break;case"hour":p=(this-u)/36e5;break;case"day":p=(this-u-f)/864e5;break;case"week":p=(this-u-f)/6048e5;break;default:p=this-u}return a?p:Ze(p)}function kn(r,s){if(r.date()<s.date())return-kn(s,r);var a=(s.year()-r.year())*12+(s.month()-r.month()),u=r.clone().add(a,"months"),f,p;return s-u<0?(f=r.clone().add(a-1,"months"),p=(s-u)/(u-f)):(f=r.clone().add(a+1,"months"),p=(s-u)/(f-u)),-(a+p)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function hc(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function pc(r){if(!this.isValid())return null;var s=r!==!0,a=s?this.clone().utc():this;return a.year()<0||a.year()>9999?dn(a,s?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):se(Date.prototype.toISOString)?s?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",dn(a,"Z")):dn(a,s?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function yc(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var r="moment",s="",a,u,f,p;return this.isLocal()||(r=this.utcOffset()===0?"moment.utc":"moment.parseZone",s="Z"),a="["+r+'("]',u=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",f="-MM-DD[T]HH:mm:ss.SSS",p=s+'[")]',this.format(a+u+f+p)}function gc(r){r||(r=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var s=dn(this,r);return this.localeData().postformat(s)}function bc(r,s){return this.isValid()&&(P(r)&&r.isValid()||me(r).isValid())?nt({to:this,from:r}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function vc(r){return this.from(me(),r)}function wc(r,s){return this.isValid()&&(P(r)&&r.isValid()||me(r).isValid())?nt({from:this,to:r}).locale(this.locale()).humanize(!s):this.localeData().invalidDate()}function _c(r){return this.to(me(),r)}function Uo(r){var s;return r===void 0?this._locale._abbr:(s=yt(r),s!=null&&(this._locale=s),this)}var Yo=K("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(r){return r===void 0?this.localeData():this.locale(r)});function No(){return this._locale}var Dn=1e3,ir=60*Dn,Sn=60*ir,Oo=(365*400+97)*24*Sn;function sr(r,s){return(r%s+s)%s}function Qo(r,s,a){return r<100&&r>=0?new Date(r+400,s,a)-Oo:new Date(r,s,a).valueOf()}function Lo(r,s,a){return r<100&&r>=0?Date.UTC(r+400,s,a)-Oo:Date.UTC(r,s,a)}function xc(r){var s,a;if(r=ze(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Lo:Qo,r){case"year":s=a(this.year(),0,1);break;case"quarter":s=a(this.year(),this.month()-this.month()%3,1);break;case"month":s=a(this.year(),this.month(),1);break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":s=a(this.year(),this.month(),this.date());break;case"hour":s=this._d.valueOf(),s-=sr(s+(this._isUTC?0:this.utcOffset()*ir),Sn);break;case"minute":s=this._d.valueOf(),s-=sr(s,ir);break;case"second":s=this._d.valueOf(),s-=sr(s,Dn);break}return this._d.setTime(s),e.updateOffset(this,!0),this}function kc(r){var s,a;if(r=ze(r),r===void 0||r==="millisecond"||!this.isValid())return this;switch(a=this._isUTC?Lo:Qo,r){case"year":s=a(this.year()+1,0,1)-1;break;case"quarter":s=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":s=a(this.year(),this.month()+1,1)-1;break;case"week":s=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":s=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":s=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":s=this._d.valueOf(),s+=Sn-sr(s+(this._isUTC?0:this.utcOffset()*ir),Sn)-1;break;case"minute":s=this._d.valueOf(),s+=ir-sr(s,ir)-1;break;case"second":s=this._d.valueOf(),s+=Dn-sr(s,Dn)-1;break}return this._d.setTime(s),e.updateOffset(this,!0),this}function Dc(){return this._d.valueOf()-(this._offset||0)*6e4}function Sc(){return Math.floor(this.valueOf()/1e3)}function Tc(){return new Date(this.valueOf())}function Fc(){var r=this;return[r.year(),r.month(),r.date(),r.hour(),r.minute(),r.second(),r.millisecond()]}function Mc(){var r=this;return{years:r.year(),months:r.month(),date:r.date(),hours:r.hours(),minutes:r.minutes(),seconds:r.seconds(),milliseconds:r.milliseconds()}}function Rc(){return this.isValid()?this.toISOString():null}function Ec(){return F(this)}function Uc(){return _({},b(this))}function Yc(){return b(this).overflow}function Nc(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Q("N",0,0,"eraAbbr"),Q("NN",0,0,"eraAbbr"),Q("NNN",0,0,"eraAbbr"),Q("NNNN",0,0,"eraName"),Q("NNNNN",0,0,"eraNarrow"),Q("y",["y",1],"yo","eraYear"),Q("y",["yy",2],0,"eraYear"),Q("y",["yyy",3],0,"eraYear"),Q("y",["yyyy",4],0,"eraYear"),E("N",Zi),E("NN",Zi),E("NNN",Zi),E("NNNN",Vc),E("NNNNN",jc),oe(["N","NN","NNN","NNNN","NNNNN"],function(r,s,a,u){var f=a._locale.erasParse(r,u,a._strict);f?b(a).era=f:b(a).invalidEra=r}),E("y",er),E("yy",er),E("yyy",er),E("yyyy",er),E("yo",Hc),oe(["y","yy","yyy","yyyy"],Ue),oe(["yo"],function(r,s,a,u){var f;a._locale._eraYearOrdinalRegex&&(f=r.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?s[Ue]=a._locale.eraYearOrdinalParse(r,f):s[Ue]=parseInt(r,10)});function Oc(r,s){var a,u,f,p=this._eras||yt("en")._eras;for(a=0,u=p.length;a<u;++a){switch(typeof p[a].since){case"string":f=e(p[a].since).startOf("day"),p[a].since=f.valueOf();break}switch(typeof p[a].until){case"undefined":p[a].until=1/0;break;case"string":f=e(p[a].until).startOf("day").valueOf(),p[a].until=f.valueOf();break}}return p}function Qc(r,s,a){var u,f,p=this.eras(),v,R,B;for(r=r.toUpperCase(),u=0,f=p.length;u<f;++u)if(v=p[u].name.toUpperCase(),R=p[u].abbr.toUpperCase(),B=p[u].narrow.toUpperCase(),a)switch(s){case"N":case"NN":case"NNN":if(R===r)return p[u];break;case"NNNN":if(v===r)return p[u];break;case"NNNNN":if(B===r)return p[u];break}else if([v,R,B].indexOf(r)>=0)return p[u]}function Lc(r,s){var a=r.since<=r.until?1:-1;return s===void 0?e(r.since).year():e(r.since).year()+(s-r.offset)*a}function Cc(){var r,s,a,u=this.localeData().eras();for(r=0,s=u.length;r<s;++r)if(a=this.clone().startOf("day").valueOf(),u[r].since<=a&&a<=u[r].until||u[r].until<=a&&a<=u[r].since)return u[r].name;return""}function Ic(){var r,s,a,u=this.localeData().eras();for(r=0,s=u.length;r<s;++r)if(a=this.clone().startOf("day").valueOf(),u[r].since<=a&&a<=u[r].until||u[r].until<=a&&a<=u[r].since)return u[r].narrow;return""}function Bc(){var r,s,a,u=this.localeData().eras();for(r=0,s=u.length;r<s;++r)if(a=this.clone().startOf("day").valueOf(),u[r].since<=a&&a<=u[r].until||u[r].until<=a&&a<=u[r].since)return u[r].abbr;return""}function Pc(){var r,s,a,u,f=this.localeData().eras();for(r=0,s=f.length;r<s;++r)if(a=f[r].since<=f[r].until?1:-1,u=this.clone().startOf("day").valueOf(),f[r].since<=u&&u<=f[r].until||f[r].until<=u&&u<=f[r].since)return(this.year()-e(f[r].since).year())*a+f[r].offset;return this.year()}function Ac(r){return l(this,"_erasNameRegex")||Ji.call(this),r?this._erasNameRegex:this._erasRegex}function Wc(r){return l(this,"_erasAbbrRegex")||Ji.call(this),r?this._erasAbbrRegex:this._erasRegex}function $c(r){return l(this,"_erasNarrowRegex")||Ji.call(this),r?this._erasNarrowRegex:this._erasRegex}function Zi(r,s){return s.erasAbbrRegex(r)}function Vc(r,s){return s.erasNameRegex(r)}function jc(r,s){return s.erasNarrowRegex(r)}function Hc(r,s){return s._eraYearOrdinalRegex||er}function Ji(){var r=[],s=[],a=[],u=[],f,p,v,R,B,Z=this.eras();for(f=0,p=Z.length;f<p;++f)v=ft(Z[f].name),R=ft(Z[f].abbr),B=ft(Z[f].narrow),s.push(v),r.push(R),a.push(B),u.push(v),u.push(R),u.push(B);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}Q(0,["gg",2],0,function(){return this.weekYear()%100}),Q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Tn(r,s){Q(0,[r,r.length],0,s)}Tn("gggg","weekYear"),Tn("ggggg","weekYear"),Tn("GGGG","isoWeekYear"),Tn("GGGGG","isoWeekYear"),E("G",hn),E("g",hn),E("GG",fe,$e),E("gg",fe,$e),E("GGGG",Ni,Yi),E("gggg",Ni,Yi),E("GGGGG",mn,cn),E("ggggg",mn,cn),Rr(["gggg","ggggg","GGGG","GGGGG"],function(r,s,a,u){s[u.substr(0,2)]=G(r)}),Rr(["gg","GG"],function(r,s,a,u){s[u]=e.parseTwoDigitYear(r)});function Gc(r){return Co.call(this,r,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function zc(r){return Co.call(this,r,this.isoWeek(),this.isoWeekday(),1,4)}function Zc(){return pt(this.year(),1,4)}function Jc(){return pt(this.isoWeekYear(),1,4)}function qc(){var r=this.localeData()._week;return pt(this.year(),r.dow,r.doy)}function Kc(){var r=this.localeData()._week;return pt(this.weekYear(),r.dow,r.doy)}function Co(r,s,a,u,f){var p;return r==null?Nr(this,u,f).year:(p=pt(r,u,f),s>p&&(s=p),Xc.call(this,r,s,a,u,f))}function Xc(r,s,a,u,f){var p=ho(r,s,a,u,f),v=Yr(p.year,0,p.dayOfYear);return this.year(v.getUTCFullYear()),this.month(v.getUTCMonth()),this.date(v.getUTCDate()),this}Q("Q",0,"Qo","quarter"),E("Q",ro),oe("Q",function(r,s){s[mt]=(G(r)-1)*3});function ef(r){return r==null?Math.ceil((this.month()+1)/3):this.month((r-1)*3+this.month()%3)}Q("D",["DD",2],"Do","date"),E("D",fe,tr),E("DD",fe,$e),E("Do",function(r,s){return r?s._dayOfMonthOrdinalParse||s._ordinalParse:s._dayOfMonthOrdinalParseLenient}),oe(["D","DD"],st),oe("Do",function(r,s){s[st]=G(r.match(fe)[0])});var Io=rr("Date",!0);Q("DDD",["DDDD",3],"DDDo","dayOfYear"),E("DDD",fn),E("DDDD",no),oe(["DDD","DDDD"],function(r,s,a){a._dayOfYear=G(r)});function tf(r){var s=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return r==null?s:this.add(r-s,"d")}Q("m",["mm",2],0,"minute"),E("m",fe,Oi),E("mm",fe,$e),oe(["m","mm"],rt);var rf=rr("Minutes",!1);Q("s",["ss",2],0,"second"),E("s",fe,Oi),E("ss",fe,$e),oe(["s","ss"],ht);var nf=rr("Seconds",!1);Q("S",0,0,function(){return~~(this.millisecond()/100)}),Q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Q(0,["SSS",3],0,"millisecond"),Q(0,["SSSS",4],0,function(){return this.millisecond()*10}),Q(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Q(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Q(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Q(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Q(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),E("S",fn,ro),E("SS",fn,$e),E("SSS",fn,no);var Et,Bo;for(Et="SSSS";Et.length<=9;Et+="S")E(Et,er);function sf(r,s){s[Pt]=G(("0."+r)*1e3)}for(Et="S";Et.length<=9;Et+="S")oe(Et,sf);Bo=rr("Milliseconds",!1),Q("z",0,0,"zoneAbbr"),Q("zz",0,0,"zoneName");function of(){return this._isUTC?"UTC":""}function af(){return this._isUTC?"Coordinated Universal Time":""}var k=V.prototype;k.add=Kd,k.calendar=sc,k.clone=oc,k.diff=mc,k.endOf=kc,k.format=gc,k.from=bc,k.fromNow=vc,k.to=wc,k.toNow=_c,k.get=yu,k.invalidAt=Yc,k.isAfter=ac,k.isBefore=lc,k.isBetween=uc,k.isSame=dc,k.isSameOrAfter=cc,k.isSameOrBefore=fc,k.isValid=Ec,k.lang=Yo,k.locale=Uo,k.localeData=No,k.max=Ed,k.min=Rd,k.parsingFlags=Uc,k.set=gu,k.startOf=xc,k.subtract=Xd,k.toArray=Fc,k.toObject=Mc,k.toDate=Tc,k.toISOString=pc,k.inspect=yc,typeof Symbol!="undefined"&&Symbol.for!=null&&(k[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),k.toJSON=Rc,k.toString=hc,k.unix=Sc,k.valueOf=Dc,k.creationData=Nc,k.eraName=Cc,k.eraNarrow=Ic,k.eraAbbr=Bc,k.eraYear=Pc,k.year=oo,k.isLeapYear=pu,k.weekYear=Gc,k.isoWeekYear=zc,k.quarter=k.quarters=ef,k.month=fo,k.daysInMonth=Tu,k.week=k.weeks=Ou,k.isoWeek=k.isoWeeks=Qu,k.weeksInYear=qc,k.weeksInWeekYear=Kc,k.isoWeeksInYear=Zc,k.isoWeeksInISOWeekYear=Jc,k.date=Io,k.day=k.days=zu,k.weekday=Zu,k.isoWeekday=Ju,k.dayOfYear=tf,k.hour=k.hours=nd,k.minute=k.minutes=rf,k.second=k.seconds=nf,k.millisecond=k.milliseconds=Bo,k.utcOffset=Bd,k.utc=Ad,k.local=Wd,k.parseZone=$d,k.hasAlignedHourOffset=Vd,k.isDST=jd,k.isLocal=Gd,k.isUtcOffset=zd,k.isUtc=To,k.isUTC=To,k.zoneAbbr=of,k.zoneName=af,k.dates=K("dates accessor is deprecated. Use date instead.",Io),k.months=K("months accessor is deprecated. Use month instead",fo),k.years=K("years accessor is deprecated. Use year instead",oo),k.zone=K("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Pd),k.isDSTShifted=K("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Hd);function lf(r){return me(r*1e3)}function uf(){return me.apply(null,arguments).parseZone()}function Po(r){return r}var X=le.prototype;X.calendar=H,X.longDateFormat=ql,X.invalidDate=Xl,X.ordinal=ru,X.preparse=Po,X.postformat=Po,X.relativeTime=iu,X.pastFuture=su,X.set=U,X.eras=Oc,X.erasParse=Qc,X.erasConvertYear=Lc,X.erasAbbrRegex=Wc,X.erasNameRegex=Ac,X.erasNarrowRegex=$c,X.months=xu,X.monthsShort=ku,X.monthsParse=Su,X.monthsRegex=Mu,X.monthsShortRegex=Fu,X.week=Eu,X.firstDayOfYear=Nu,X.firstDayOfWeek=Yu,X.weekdays=$u,X.weekdaysMin=ju,X.weekdaysShort=Vu,X.weekdaysParse=Gu,X.weekdaysRegex=qu,X.weekdaysShortRegex=Ku,X.weekdaysMinRegex=Xu,X.isPM=td,X.meridiem=id;function Fn(r,s,a,u){var f=yt(),p=w().set(u,s);return f[a](p,r)}function Ao(r,s,a){if(m(r)&&(s=r,r=void 0),r=r||"",s!=null)return Fn(r,s,a,"month");var u,f=[];for(u=0;u<12;u++)f[u]=Fn(r,u,a,"month");return f}function qi(r,s,a,u){typeof r=="boolean"?(m(s)&&(a=s,s=void 0),s=s||""):(s=r,a=s,r=!1,m(s)&&(a=s,s=void 0),s=s||"");var f=yt(),p=r?f._week.dow:0,v,R=[];if(a!=null)return Fn(s,(a+p)%7,u,"day");for(v=0;v<7;v++)R[v]=Fn(s,(v+p)%7,u,"day");return R}function df(r,s){return Ao(r,s,"months")}function cf(r,s){return Ao(r,s,"monthsShort")}function ff(r,s,a){return qi(r,s,a,"weekdays")}function mf(r,s,a){return qi(r,s,a,"weekdaysShort")}function hf(r,s,a){return qi(r,s,a,"weekdaysMin")}Rt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(r){var s=r%10,a=G(r%100/10)===1?"th":s===1?"st":s===2?"nd":s===3?"rd":"th";return r+a}}),e.lang=K("moment.lang is deprecated. Use moment.locale instead.",Rt),e.langData=K("moment.langData is deprecated. Use moment.localeData instead.",yt);var gt=Math.abs;function pf(){var r=this._data;return this._milliseconds=gt(this._milliseconds),this._days=gt(this._days),this._months=gt(this._months),r.milliseconds=gt(r.milliseconds),r.seconds=gt(r.seconds),r.minutes=gt(r.minutes),r.hours=gt(r.hours),r.months=gt(r.months),r.years=gt(r.years),this}function Wo(r,s,a,u){var f=nt(s,a);return r._milliseconds+=u*f._milliseconds,r._days+=u*f._days,r._months+=u*f._months,r._bubble()}function yf(r,s){return Wo(this,r,s,1)}function gf(r,s){return Wo(this,r,s,-1)}function $o(r){return r<0?Math.floor(r):Math.ceil(r)}function bf(){var r=this._milliseconds,s=this._days,a=this._months,u=this._data,f,p,v,R,B;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=$o(Ki(a)+s)*864e5,s=0,a=0),u.milliseconds=r%1e3,f=Ze(r/1e3),u.seconds=f%60,p=Ze(f/60),u.minutes=p%60,v=Ze(p/60),u.hours=v%24,s+=Ze(v/24),B=Ze(Vo(s)),a+=B,s-=$o(Ki(B)),R=Ze(a/12),a%=12,u.days=s,u.months=a,u.years=R,this}function Vo(r){return r*4800/146097}function Ki(r){return r*146097/4800}function vf(r){if(!this.isValid())return NaN;var s,a,u=this._milliseconds;if(r=ze(r),r==="month"||r==="quarter"||r==="year")switch(s=this._days+u/864e5,a=this._months+Vo(s),r){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(s=this._days+Math.round(Ki(this._months)),r){case"week":return s/7+u/6048e5;case"day":return s+u/864e5;case"hour":return s*24+u/36e5;case"minute":return s*1440+u/6e4;case"second":return s*86400+u/1e3;case"millisecond":return Math.floor(s*864e5)+u;default:throw new Error("Unknown unit "+r)}}function bt(r){return function(){return this.as(r)}}var jo=bt("ms"),wf=bt("s"),_f=bt("m"),xf=bt("h"),kf=bt("d"),Df=bt("w"),Sf=bt("M"),Tf=bt("Q"),Ff=bt("y"),Mf=jo;function Rf(){return nt(this)}function Ef(r){return r=ze(r),this.isValid()?this[r+"s"]():NaN}function Wt(r){return function(){return this.isValid()?this._data[r]:NaN}}var Uf=Wt("milliseconds"),Yf=Wt("seconds"),Nf=Wt("minutes"),Of=Wt("hours"),Qf=Wt("days"),Lf=Wt("months"),Cf=Wt("years");function If(){return Ze(this.days()/7)}var vt=Math.round,or={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Bf(r,s,a,u,f){return f.relativeTime(s||1,!!a,r,u)}function Pf(r,s,a,u){var f=nt(r).abs(),p=vt(f.as("s")),v=vt(f.as("m")),R=vt(f.as("h")),B=vt(f.as("d")),Z=vt(f.as("M")),Ce=vt(f.as("w")),wt=vt(f.as("y")),Ut=p<=a.ss&&["s",p]||p<a.s&&["ss",p]||v<=1&&["m"]||v<a.m&&["mm",v]||R<=1&&["h"]||R<a.h&&["hh",R]||B<=1&&["d"]||B<a.d&&["dd",B];return a.w!=null&&(Ut=Ut||Ce<=1&&["w"]||Ce<a.w&&["ww",Ce]),Ut=Ut||Z<=1&&["M"]||Z<a.M&&["MM",Z]||wt<=1&&["y"]||["yy",wt],Ut[2]=s,Ut[3]=+r>0,Ut[4]=u,Bf.apply(null,Ut)}function Af(r){return r===void 0?vt:typeof r=="function"?(vt=r,!0):!1}function Wf(r,s){return or[r]===void 0?!1:s===void 0?or[r]:(or[r]=s,r==="s"&&(or.ss=s-1),!0)}function $f(r,s){if(!this.isValid())return this.localeData().invalidDate();var a=!1,u=or,f,p;return typeof r=="object"&&(s=r,r=!1),typeof r=="boolean"&&(a=r),typeof s=="object"&&(u=Object.assign({},or,s),s.s!=null&&s.ss==null&&(u.ss=s.s-1)),f=this.localeData(),p=Pf(this,!a,u,f),a&&(p=f.pastFuture(+this,p)),f.postformat(p)}var Xi=Math.abs;function ar(r){return(r>0)-(r<0)||+r}function Mn(){if(!this.isValid())return this.localeData().invalidDate();var r=Xi(this._milliseconds)/1e3,s=Xi(this._days),a=Xi(this._months),u,f,p,v,R=this.asSeconds(),B,Z,Ce,wt;return R?(u=Ze(r/60),f=Ze(u/60),r%=60,u%=60,p=Ze(a/12),a%=12,v=r?r.toFixed(3).replace(/\.?0+$/,""):"",B=R<0?"-":"",Z=ar(this._months)!==ar(R)?"-":"",Ce=ar(this._days)!==ar(R)?"-":"",wt=ar(this._milliseconds)!==ar(R)?"-":"",B+"P"+(p?Z+p+"Y":"")+(a?Z+a+"M":"")+(s?Ce+s+"D":"")+(f||u||r?"T":"")+(f?wt+f+"H":"")+(u?wt+u+"M":"")+(r?wt+v+"S":"")):"P0D"}var q=_n.prototype;q.isValid=Qd,q.abs=pf,q.add=yf,q.subtract=gf,q.as=vf,q.asMilliseconds=jo,q.asSeconds=wf,q.asMinutes=_f,q.asHours=xf,q.asDays=kf,q.asWeeks=Df,q.asMonths=Sf,q.asQuarters=Tf,q.asYears=Ff,q.valueOf=Mf,q._bubble=bf,q.clone=Rf,q.get=Ef,q.milliseconds=Uf,q.seconds=Yf,q.minutes=Nf,q.hours=Of,q.days=Qf,q.weeks=If,q.months=Lf,q.years=Cf,q.humanize=$f,q.toISOString=Mn,q.toString=Mn,q.toJSON=Mn,q.locale=Uo,q.localeData=No,q.toIsoString=K("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Mn),q.lang=Yo,Q("X",0,0,"unix"),Q("x",0,0,"valueOf"),E("x",hn),E("X",uu),oe("X",function(r,s,a){a._d=new Date(parseFloat(r)*1e3)}),oe("x",function(r,s,a){a._d=new Date(G(r))});return e.version="2.30.1",t(me),e.fn=k,e.min=Ud,e.max=Yd,e.now=Nd,e.utc=w,e.unix=lf,e.months=df,e.isDate=h,e.locale=Rt,e.invalid=T,e.duration=nt,e.isMoment=P,e.weekdays=ff,e.parseZone=uf,e.localeData=yt,e.isDuration=xn,e.monthsShort=cf,e.weekdaysMin=hf,e.defineLocale=Pi,e.updateLocale=ld,e.locales=ud,e.weekdaysShort=mf,e.normalizeUnits=ze,e.relativeTimeRounding=Af,e.relativeTimeThreshold=Wf,e.calendarFormat=ic,e.prototype=k,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var xh={};qf(xh,{default:()=>Fi});module.exports=Kf(xh);var Ir=class{constructor(e){this.plugin=e}startPeriodicTask(){let e=!0;this.periodicTask().finally(()=>{e=!1}),this.plugin.registerInterval(window.setInterval(()=>{if(e){console.log("Skip reminder interval task because task is already running.");return}e=!0,this.periodicTask().finally(()=>{e=!1})},this.plugin.settings.reminderCheckIntervalSec.value*1e3))}async periodicTask(){if(this.plugin.ui.reload(!1),this.plugin.data.scanned.value||this.plugin.fileSystem.reloadRemindersInAllFiles().then(()=>{this.plugin.data.scanned.value=!0,this.plugin.data.save()}),this.plugin.data.save(!1),this.plugin.ui.isEditing())return;let e=this.plugin.reminders.getExpiredReminders(this.plugin.settings.reminderTime.value),t;for(let i of e)if(this.plugin.app.workspace.layoutReady){if(i.muteNotification)continue;if(t)for(;t.beingDisplayed;)await this.sleep(100);this.plugin.ui.showReminder(i),t=i}}async sleep(e){return new Promise(t=>setTimeout(t,e))}};var Bt=require("obsidian");var Xa=require("obsidian");function Go(n,e){return n||e.fileSystem.reloadRemindersInAllFiles(),!0}function zo(n,e){return n||e.showReminderList(),!0}var Zo=window.require?window.require("electron"):void 0;async function Jo(n,e){return Zo&&(await Zo.remote.dialog.showMessageBox({type:"question",title:"Obsidian Reminder",message:n,detail:e,buttons:["OK","Cancel"],cancelId:1})).response===0?0:1}var Yt=class Yt{constructor(e,t,i,o,l){this.lineIndex=e;this.prefix=t;this.check=i;this.suffix=o;this.body=l}static parse(e,t){let i=Yt.regexp.exec(t);return i?new Yt(e,i.groups.prefix,i.groups.check,i.groups.suffix,i.groups.body):null}toMarkdown(){return`${this.prefix}${this.check}${this.suffix}${this.body}`}isChecked(){return Yt.checkedStatuses.some(e=>e===this.check)}setChecked(e){this.check=e?"x":" "}getHeaderLength(){return this.prefix.length+this.check.length+this.suffix.length}clone(){return Yt.parse(this.lineIndex,this.toMarkdown())}};g(Yt,"regexp",/^(?<prefix>((> ?)*)?\s*[-*][ ]+\[)(?<check>.)(?<suffix>\]\s+)(?<body>.*)$/),g(Yt,"checkedStatuses",["x","-"]);var $t=Yt,Br=class{constructor(e,t){this.file=e;g(this,"lines",[]);g(this,"todos",[]);this.parse(t)}parse(e){this.lines=e.split(`
`),this.todos=[],this.lines.forEach((t,i)=>{let o=$t.parse(i,t);o&&this.todos.push(o)})}getTodos(){return this.todos}insertTodo(e,t){t.lineIndex=e,this.lines.splice(e,0,t.toMarkdown());let i=-1;for(let o in this.todos){let l=this.todos[o];l.lineIndex>=e&&(i<0&&(i=parseInt(o)),l.lineIndex++)}i<=0?this.todos.splice(0,0,t):this.todos.splice(i,0,t)}getTodo(e){let t=this.todos.find(i=>i.lineIndex===e);return t==null?null:t}applyChanges(){this.todos.forEach(e=>{this.lines[e.lineIndex]=e.toMarkdown()})}toMarkdown(){return this.applyChanges(),this.lines.join(`
`)}};var lr=class{constructor(e){this._value=e}get value(){return this._value}},Vt=class{constructor(e){this._value=e;g(this,"onChangeFunctions",[])}onChanged(e){this.onChangeFunctions.push(e)}get value(){return this._value}set value(e){let t=this._value;this._value=e,this.onChangeFunctions.forEach(i=>{i(t,e)})}};var Je=_t(ot(),1);var W=class n{constructor(e,t){this.time=e;this._hasTimePart=t}static now(){return new n((0,Je.default)(),!0)}static parse(e){return e.length>10?new n((0,Je.default)(e,"YYYY-MM-DD HH:mm"),!0):new n((0,Je.default)(e,"YYYY-MM-DD"),!1)}static duration(e,t,i,o){return t.fixedTime(o).diff(e.fixedTime(o),i)}getTimeInMillis(e){return this.fixedTime(e).valueOf()}format(e,t){return this.fixedTime(t).format(e)}toYYYYMMMM(e){return this.fixedTime(e).format("YYYY, MMMM")}toYYYYMMDD(e){return this.fixedTime(e).format("YYYY-MM-DD")}add(e,t,i){return new n(this.fixedTime(i).clone().add(e,t),this._hasTimePart)}fixedTime(e){return this._hasTimePart?this.time:e===void 0?this.time:this.time.clone().add(e.minutes,"minutes")}get hasTimePart(){return this._hasTimePart}moment(){return this.time}isValid(){return this.time.isValid()}clone(e){let t=e==null?this._hasTimePart:e,i=this.time.clone();return new n(i,t)}toString(){return this._hasTimePart?this.format("YYYY-MM-DD HH:mm"):this.format("YYYY-MM-DD")}equals(e){return this._hasTimePart===e._hasTimePart&&this.time.isSame(e.time)}},Rn=class n{constructor(e,t){this.hour=e;this.minute=t}static parse(e){if(!e.match(/^\d{1,2}:\d{1,2}$/))throw`Unexpected format time(${e}). Time must be HH:mm.`;let t=e.split(":");if(t.length!==2)throw`Unexpected format time(${e}).  time must be HH:mm.`;let i=parseInt(t[0]),o=parseInt(t[1]);if(i>23||i<0)throw"hour must be 0~23";if(o>59||o<0)throw"minute must be 0~59";return new n(i,o)}get minutes(){return this.hour*60+this.minute}toString(){let e=t=>t<10?"0"+t:""+t;return`${e(this.hour)}:${e(this.minute)}`}};function dr(n,e){return()=>new W((0,Je.default)(),!0).add(n,e)}function qo(n){return dr(n,"minutes")}function ts(n){return dr(n,"hours")}function Xf(n){return dr(n,"days")}function em(n){return dr(n,"weeks")}function tm(n){return dr(n,"months")}function rm(n){return dr(n,"years")}function jt(n){return()=>{let e=(0,Je.default)();return e.isoWeekday()<=n?new W(e.isoWeekday(n),!1):new W(e.add(1,"weeks").isoWeekday(n),!1)}}function rs(){return()=>new W((0,Je.default)().add(1,"days"),!1)}function Ko(){return()=>new W((0,Je.default)().add(1,"weeks"),!1)}function nm(){return()=>new W((0,Je.default)().add(1,"months"),!1)}function im(){return()=>new W((0,Je.default)().add(1,"years"),!1)}var he=class{constructor(e,t){this.label=e;this.later=t}};function Xo(n){return n.split(`
`).map(e=>sm(e.trim()))}function sm(n){if(n=n.toLowerCase(),n.startsWith("in")){let e=n.split(" ");if(e.length!==3)throw"Unsupported format.  Should be 'In N (minutes|hours)'";let t=e[1]==="a"||e[1]==="an"?1:parseInt(e[1]);switch(e[2]){case"minute":case"minutes":{let i=t==1?"minute":"minutes";return new he(`In ${t} ${i}`,qo(t))}case"hour":case"hours":{let i=t==1?"hour":"hours";return new he(`In ${t} ${i}`,ts(t))}case"day":case"days":{let i=t==1?"day":"days";return new he(`In ${t} ${i}`,Xf(t))}case"week":case"weeks":{let i=t==1?"week":"weeks";return new he(`In ${t} ${i}`,em(t))}case"month":case"months":{let i=t==1?"month":"months";return new he(`In ${t} ${i}`,tm(t))}case"year":case"years":{let i=t==1?"year":"years";return new he(`In ${t} ${i}`,rm(t))}}}else if(n.startsWith("next")){let e=n.substring(5);switch(e){case"sunday":return new he("Next Sunday",jt(0));case"monday":return new he("Next Monday",jt(1));case"tuesday":return new he("Next Tuesday",jt(2));case"wednesday":return new he("Next Wednesday",jt(3));case"thursday":return new he("Next Thursday",jt(4));case"friday":return new he("Next Friday",jt(5));case"saturday":return new he("Next Saturday",jt(6));case"day":return new he("Tomorrow",rs());case"week":return new he("Next week",Ko());case"month":return new he("Next month",nm());case"year":return new he("Next year",im());default:throw`Unsupported weekday: ${e}`}}else if(n==="tomorrow")return new he("Tomorrow",rs());throw`Unsupported format: ${n}`}var Nh=[new he("In 30 minutes",qo(30)),new he("In 1 hours",ts(1)),new he("In 3 hours",ts(3)),new he("Tomorrow",rs()),new he("Next week",Ko())],ns=class{constructor(){g(this,"dateFormat",new lr("YYYY-MM-DD"));g(this,"dateTimeFormat",new lr("YYYY-MM-DD HH:mm"));g(this,"strict",new lr(!1))}setTimeFormat(e,t,i){this.dateFormat=e,this.dateTimeFormat=t,this.strict=i}parse(e){let t=this.doParse(e,!0);return t!=null?t:this.strict.value?null:this.doParse(e,!1)}doParse(e,t){let i=(0,Je.default)(e,this.dateTimeFormat.value,t);if(i.isValid())return new W(i,!0);let o=(0,Je.default)(e,this.dateFormat.value,t);return o.isValid()?new W(o,!1):null}toString(e){return e.hasTimePart?e.format(this.dateTimeFormat.value):e.format(this.dateFormat.value)}},at=new ns;var cr=class{constructor(e,t,i,o,l){this.file=e;this.title=t;this.time=i;this.rowNumber=o;this.done=l;g(this,"muteNotification",!1);g(this,"beingDisplayed",!1)}key(){return this.file+this.title+this.time.toString()}equals(e){return this.rowNumber===e.rowNumber&&this.title===e.title&&this.time.equals(e.time)&&this.file===e.file&&this.done===e.done}getFileName(){let e=this.file.split(/[/\\]/);return e[e.length-1].replace(/^(.*?)(\..+)?$/,"$1")}static extractFileName(e){let t=e.split(/[/\\]/);return t[t.length-1].replace(/^(.*?)(\..+)?$/,"$1")}},En=class{constructor(e){this.onChange=e;g(this,"fileToReminders",new Map);g(this,"reminders",[]);g(this,"reminderTime");g(this,"onChangeCallbacks",[])}addOnChange(e){this.onChangeCallbacks.push(e)}notifyChanged(){this.onChange(),this.onChangeCallbacks.forEach(e=>e())}getExpiredReminders(e){let t=new Date().getTime(),i=[];for(let o=0;o<this.reminders.length;o++){let l=this.reminders[o];if(!l.done)if(l.time.getTimeInMillis(e)<=t)i.push(l);else break}return i}byDate(e){return this.reminders.filter(t=>t.time.toYYYYMMDD()===e.toYYYYMMDD())}removeReminder(e){console.debug("Remove reminder: %o",e),this.reminders.remove(e);let t=this.fileToReminders.get(e.file);t&&(t.remove(e),t.length===0&&this.fileToReminders.delete(e.file)),this.onChange()}clear(){this.fileToReminders.clear(),this.reminders=[],this.onChange()}removeByFile(e){return this.fileToReminders.delete(e)?(this.sortReminders(),!0):!1}replaceFile(e,t){let i=this.fileToReminders.get(e);if(i){if(this.equals(i,t))return!1;let o=new Map;for(let l of i)o.set(l.key(),l.muteNotification);for(let l of t){let c=o.get(l.key());o.set(l.key(),l.muteNotification),c!==void 0&&(l.muteNotification=c)}}return this.fileToReminders.set(e,t),this.sortReminders(),!0}equals(e,t){if(e.length!==t.length)return!1;this.sort(e),this.sort(t);for(let i in e){let o=e[i],l=t[i];if(o==null&&l!=null||l==null&&o!=null)return!1;if(!(o==null&&l==null)&&!o.equals(l))return!1}return!0}sortReminders(){let e=[];for(let t of this.fileToReminders.values())e.push(...t);this.sort(e),this.reminders=e,this.notifyChanged()}sort(e){e.sort((t,i)=>{var l,c;let o=t.time.getTimeInMillis((l=this.reminderTime)==null?void 0:l.value)-i.time.getTimeInMillis((c=this.reminderTime)==null?void 0:c.value);return o>0?1:o<0?-1:0})}},ta=[{name:"US Style (12h)",format:{yearMonthFormat:"MMMM YYYY",monthDayFormat:"MM/DD",shortDateWithWeekdayFormat:"M/DD (ddd)",timeFormat:"h:mm A"}},{name:"US Style (24h)",format:{yearMonthFormat:"MMMM YYYY",monthDayFormat:"MM/DD",shortDateWithWeekdayFormat:"M/DD (ddd)",timeFormat:"HH:mm"}},{name:"EU Style (24h)",format:{yearMonthFormat:"MMMM YYYY",monthDayFormat:"DD/MM",shortDateWithWeekdayFormat:"D/MM (ddd)",timeFormat:"HH:mm"}},{name:"EU Style (12h)",format:{yearMonthFormat:"MMMM YYYY",monthDayFormat:"DD/MM",shortDateWithWeekdayFormat:"D/MM (ddd)",timeFormat:"h:mm A"}},{name:"JP Style (24h)",format:{yearMonthFormat:"YYYY\u5E74MM\u6708",monthDayFormat:"MM/DD",shortDateWithWeekdayFormat:"M\u6708D\u65E5 (ddd)",timeFormat:"HH:mm"}},{name:"JP Style (12h)",format:{yearMonthFormat:"YYYY\u5E74MM\u6708",monthDayFormat:"MM/DD",shortDateWithWeekdayFormat:"M\u6708D\u65E5 (ddd)",timeFormat:"h:mm A"}}];function ea(n,e,t,i){let o=W.duration(e,n,"days",t);if(o>30)return new Nt(n.format(i.yearMonthFormat,t),l=>l.format(i.monthDayFormat,t));if(o>=7)return new Nt("Over 1 week",l=>l.format(i.monthDayFormat,t));if(n.toYYYYMMDD(t)===e.toYYYYMMDD(t)){let l=new Nt("Today",c=>c.format(i.timeFormat,t));return l.isToday=!0,l}return n.toYYYYMMDD(t)===e.add(1,"days",t).toYYYYMMDD()?new Nt("Tomorrow",l=>l.format(i.timeFormat,t)):new Nt(n.format(i.shortDateWithWeekdayFormat,t),l=>l.format(i.timeFormat,t))}var Nt=class{constructor(e,t){this.name=e;this.timeToStringFunc=t;g(this,"isToday",!1);g(this,"isOverdue",!1)}timeToString(e){return this.timeToStringFunc(e)}};function ra(n,e,t){let i=W.now(),o=[],l=[],c=[],d=ea(i,i,e,t);for(let m=0;m<n.length;m++){let h=n[m];if(h.done)continue;if(h.muteNotification){c.push(h);continue}let y=ea(h.time,i,e,t);y.name!==d.name&&((l.length>0||d.isToday)&&o.push(new Pr(d,l)),l=[]),l.push(h),d=y}if(l.length>0&&o.push(new Pr(d,l)),c.length>0){let m=new Nt("Overdue",h=>h.format(t.timeFormat,e));m.isOverdue=!0,o.splice(0,0,new Pr(m,c)),console.log(m),console.log(o)}return o}var Pr=class{constructor(e,t){this.group=e;this.reminders=t}get name(){return this.group.name}get isOverdue(){return this.group.isOverdue}timeToString(e){return this.group.timeToString(e)}};var qe=class qe{constructor(e,t){this.key=e;this.defaultValue=t}};g(qe,"now",new qe("now",W.now())),g(qe,"useCustomEmojiForTasksPlugin",new qe("useCustomEmojiForTasksPlugin",!1)),g(qe,"removeTagsForTasksPlugin",new qe("removeTagsForTasksPlugin",!1)),g(qe,"linkDatesToDailyNotes",new qe("linkDatesToDailyNotes",!1)),g(qe,"strictDateFormat",new qe("strictDateFormat",!1));var Ie=qe,Ar=class{constructor(){g(this,"parameters",new Map)}setParameter(e,t){this.parameters.set(e.key,()=>t.value)}setParameterFunc(e,t){this.parameters.set(e.key,t)}setParameterValue(e,t){this.parameters.set(e.key,()=>t)}getParameter(e){let t=this.parameters.get(e.key);return t==null?e.defaultValue:t()}},Ot=class{constructor(){g(this,"config",new Ar)}setConfig(e){this.config=e}parse(e){return e.getTodos().map(t=>{let i=this.parseValidReminder(t);if(i==null)return null;let o=i.getTitle();if(o==null)return null;let l=i.getTime();return l==null?null:new cr(e.file,o,l,t.lineIndex,t.isChecked())}).filter(t=>t!=null)}async modify(e,t,i){let o=e.getTodo(t.rowNumber);if(o===null)return console.warn("Not a todo: reminder=%o",t),!1;let l=this.parseValidReminder(o);return l===null||!this.modifyReminder(e,o,l,i)?!1:(o.body=l.toMarkdown(),!0)}parseValidReminder(e){let t=this.parseReminder(e);return t===null||!this.isValidReminder(t)?null:t}isValidReminder(e){return e.getTime()!==null}modifyReminder(e,t,i,o){if(o.rawTime!==void 0){if(!i.setRawTime(o.rawTime))return console.warn("The reminder doesn't support raw time: parsed=%o",i),!1}else o.time!==void 0&&i.setTime(o.time);return o.checked!==void 0&&t.setChecked(o.checked),!0}appendReminder(e,t,i){let o=$t.parse(0,e);if(o==null)return null;let l=this.parseReminder(o),c=o.getHeaderLength();return i!=null&&(i-=c),l!=null?l.setTime(t,i):(l=this.newReminder(o.body,t,i),l.setTime(t)),o.body=l.toMarkdown(),{insertedLine:o.toMarkdown(),caretPosition:c+l.getEndOfTimeTextIndex()}}isStrictDateFormat(){return this.config.getParameter(Ie.strictDateFormat)}},Un=class{constructor(){g(this,"config");g(this,"formats",[])}setConfig(e){this.config=e,this.syncConfig()}parse(e){let t=[];for(let i of this.formats){let o=i.parse(e);o!=null&&t.push(...o)}return t}async modify(e,t,i){for(let o of this.formats)if(await o.modify(e,t,i))return!0;return!1}resetFormat(e){this.formats=e,this.syncConfig()}syncConfig(){this.config!=null&&this.formats.forEach(e=>e.setConfig(this.config))}appendReminder(e,t){return this.formats[0]==null?null:this.formats[0].appendReminder(e,t)}};var Wr=class Wr{constructor(e,t,i,o){this.linkDatesToDailyNotes=e;this.title1=t;this.time=i;this.title2=o}static parse(e,t){t==null&&(t=!1);let i=Wr.regexp.exec(e);if(i==null)return null;let o=i.groups.title1,l=i.groups.time;if(l==null)return null;let c=i.groups.title2;return t&&(l=l.replace("[[",""),l=l.replace("]]","")),new Wr(t,o,l,c)}getTitle(){return`${this.title1.trim()} ${this.title2.trim()}`.trim()}getTime(){return at.parse(this.time)}setTime(e){this.time=at.toString(e)}setRawTime(e){return this.time=e,!0}getEndOfTimeTextIndex(){return this.toMarkdown().length-this.title2.length}toMarkdown(){let e=`${this.title1}(@${this.time})${this.title2}`;if(!this.linkDatesToDailyNotes)return e;let t=at.parse(this.time);if(!t)return e;let i=at.toString(t.clone(!1));return e.replace(i,`[[${i}]]`)}};g(Wr,"regexp",/^(?<title1>.*?)\(@(?<time>.+?)\)(?<title2>.*)$/);var Yn=Wr,Nn=class Nn extends Ot{parseReminder(e){return Yn.parse(e.body,this.linkDatesToDailyNotes())}newReminder(e,t,i){let o,l;return i!=null?(o=e.substring(0,i),l=e.substring(i)):(o=e,l=""),new Yn(this.linkDatesToDailyNotes(),o,t.toString(),l)}linkDatesToDailyNotes(){return this.config.getParameter(Ie.linkDatesToDailyNotes)}};g(Nn,"instance",new Nn);var fr=Nn;var is=_t(ot(),1);function On(n){return n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}var om=new class{get dateTrigger(){return this.get("date-trigger","@")}get dateFormat(){return this.get("date-format","YYYY-MM-DD")}get timeTrigger(){return this.get("time-trigger","@@")}get timeFormat(){return this.get("time-format","HH:mm")}get linkDateToDailyNote(){return this.get("link-date-to-daily-note",!1)}get(e,t){var d,m;if(!window)return t;let i=(m=(d=window==null?void 0:window.app)==null?void 0:d.plugins)==null?void 0:m.plugins;if(!i)return t;let o=i["obsidian-kanban"];if(!o||!o.settings)return t;let c=o.settings[e];return c==null?t:c}},In=class In{constructor(e){this.setting=e;g(this,"dateRegExp");g(this,"timeRegExp");let t;e.linkDateToDailyNote?t=`${On(this.setting.dateTrigger)}\\[\\[(?<date>.+?)\\]\\]`:t=`${On(this.setting.dateTrigger)}\\{(?<date>.+?)\\}`;let i=`${On(this.setting.timeTrigger)}\\{(?<time>.+?)\\}`;this.dateRegExp=new RegExp(t),this.timeRegExp=new RegExp(i)}format(e){let t;return this.setting.linkDateToDailyNote?t=`${this.setting.dateTrigger}[[${e.format(this.setting.dateFormat)}]]`:t=`${this.setting.dateTrigger}{${e.format(this.setting.dateFormat)}}`,e.hasTimePart?`${t} ${this.setting.timeTrigger}{${e.format(this.setting.timeFormat)}}`:t}split(e,t){let i=e,o,l,c=this.dateRegExp.exec(e);if(c)o=c.groups.date,e=e.replace(this.dateRegExp,"");else return{title:i};let d=this.timeRegExp.exec(e);d&&(l=d.groups.time,e=e.replace(this.timeRegExp,""));let m=e.trim(),h,y=t!=null?t:!0;return l?h=new W((0,is.default)(`${o} ${l}`,`${this.setting.dateFormat} ${this.setting.timeFormat}`,y),!0):h=new W((0,is.default)(o,this.setting.dateFormat,y),!1),h.isValid()?{title:m,time:h}:{title:i}}};g(In,"instance",new In(om));var Qn=In,Ln=class n{constructor(e,t){this.title=e;this.time=t}static parse(e,t){let i=Qn.instance.split(e,t);return i.time==null?null:new n(i.title,i.time)}getTitle(){return this.title.trim()}getTime(){return this.time?this.time:null}setTime(e){this.time=e}setRawTime(){return!1}getEndOfTimeTextIndex(){return this.toMarkdown().length}toMarkdown(){return`${this.title.trim()} ${Qn.instance.format(this.time)}`}},Bn=class Bn extends Ot{parseReminder(e){return Ln.parse(e.body,this.isStrictDateFormat())}newReminder(e,t){let i=new Ln(e,t);return i.setTime(t),i}};g(Bn,"instance",new Bn);var Cn=Bn;var Kr=_t(ot(),1);var $r=["MO","TU","WE","TH","FR","SA","SU"],ke=function(){function n(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return n.fromStr=function(e){return new n($r.indexOf(e))},n.prototype.nth=function(e){return this.n===e?this:new n(this.weekday,e)},n.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},n.prototype.toString=function(){var e=$r[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},n.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},n}();var ue=function(n){return n!=null},Ve=function(n){return typeof n=="number"},ss=function(n){return typeof n=="string"&&$r.includes(n)},Fe=Array.isArray,Ke=function(n,e){e===void 0&&(e=n),arguments.length===1&&(e=n,n=0);for(var t=[],i=n;i<e;i++)t.push(i);return t};var z=function(n,e){var t=0,i=[];if(Fe(n))for(;t<e;t++)i[t]=[].concat(n);else for(;t<e;t++)i[t]=n;return i},na=function(n){return Fe(n)?n:[n]};function Ht(n,e,t){t===void 0&&(t=" ");var i=String(n);return e=e>>0,i.length>e?String(i):(e=e-i.length,e>t.length&&(t+=z(t,e/t.length)),t.slice(0,e)+String(i))}var ia=function(n,e,t){var i=n.split(e);return t?i.slice(0,t).concat([i.slice(t).join(e)]):i},Ye=function(n,e){var t=n%e;return t*e<0?t+e:t},Pn=function(n,e){return{div:Math.floor(n/e),mod:Ye(n,e)}},je=function(n){return!ue(n)||n.length===0},_e=function(n){return!je(n)},J=function(n,e){return _e(n)&&n.indexOf(e)!==-1};var lt=function(n,e,t,i,o,l){return i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),new Date(Date.UTC(n,e-1,t,i,o,l))},am=[31,28,31,30,31,30,31,31,30,31,30,31],oa=1e3*60*60*24,An=9999,aa=lt(1970,1,1),lm=[6,0,1,2,3,4,5];var mr=function(n){return n%4===0&&n%100!==0||n%400===0},os=function(n){return n instanceof Date},Gt=function(n){return os(n)&&!isNaN(n.getTime())};var um=function(n,e){var t=n.getTime(),i=e.getTime(),o=t-i;return Math.round(o/oa)},Vr=function(n){return um(n,aa)},Wn=function(n){return new Date(aa.getTime()+n*oa)},dm=function(n){var e=n.getUTCMonth();return e===1&&mr(n.getUTCFullYear())?29:am[e]},xt=function(n){return lm[n.getUTCDay()]},as=function(n,e){var t=lt(n,e+1,1);return[xt(t),dm(t)]},$n=function(n,e){return e=e||n,new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()))},Vn=function(n){var e=new Date(n.getTime());return e},ls=function(n){for(var e=[],t=0;t<n.length;t++)e.push(Vn(n[t]));return e},kt=function(n){n.sort(function(e,t){return e.getTime()-t.getTime()})},hr=function(n,e){e===void 0&&(e=!0);var t=new Date(n);return[Ht(t.getUTCFullYear().toString(),4,"0"),Ht(t.getUTCMonth()+1,2,"0"),Ht(t.getUTCDate(),2,"0"),"T",Ht(t.getUTCHours(),2,"0"),Ht(t.getUTCMinutes(),2,"0"),Ht(t.getUTCSeconds(),2,"0"),e?"Z":""].join("")},jr=function(n){var e=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,t=e.exec(n);if(!t)throw new Error("Invalid UNTIL value: ".concat(n));return new Date(Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[5],10)||0,parseInt(t[6],10)||0,parseInt(t[7],10)||0))},sa=function(n,e){var t=n.toLocaleString("sv-SE",{timeZone:e});return t.replace(" ","T")+"Z"},la=function(n,e){var t=Intl.DateTimeFormat().resolvedOptions().timeZone,i=new Date(sa(n,t)),o=new Date(sa(n,e!=null?e:"UTC")),l=o.getTime()-i.getTime();return new Date(n.getTime()-l)};var cm=function(){function n(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return n.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,i=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(i)return!1}else if(this.method==="before"){if(i)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},n.prototype.add=function(e){return this._result.push(e),!0},n.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},n.prototype.clone=function(){return new n(this.method,this.args)},n}(),Dt=cm;var us=function(n,e){return us=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},us(n,e)};function pr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");us(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Me=function(){return Me=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Me.apply(this,arguments)};function S(n,e,t){if(t||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return n.concat(l||Array.prototype.slice.call(e))}var fm=function(n){pr(e,n);function e(t,i,o){var l=n.call(this,t,i)||this;return l.iterator=o,l}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Dt),ds=fm;var mm={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},zt=mm;var ua=function(n,e){return n.indexOf(e)!==-1},hm=function(n){return n.toString()},pm=function(n,e,t){return"".concat(e," ").concat(t,", ").concat(n)},ym=function(){function n(e,t,i,o){if(t===void 0&&(t=hm),i===void 0&&(i=zt),o===void 0&&(o=pm),this.text=[],this.language=i||zt,this.gettext=t,this.dateFormatter=o,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var l=[].concat(this.options.bymonthday),c=[].concat(this.options.bynmonthday);l.sort(function(y,_){return y-_}),c.sort(function(y,_){return _-y}),this.bymonthday=l.concat(c),this.bymonthday.length||(this.bymonthday=null)}if(ue(this.origOptions.byweekday)){var d=Fe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],m=String(d);this.byweekday={allWeeks:d.filter(function(y){return!y.n}),someWeeks:d.filter(function(y){return!!y.n}),isWeekdays:m.indexOf("MO")!==-1&&m.indexOf("TU")!==-1&&m.indexOf("WE")!==-1&&m.indexOf("TH")!==-1&&m.indexOf("FR")!==-1&&m.indexOf("SA")===-1&&m.indexOf("SU")===-1,isEveryDay:m.indexOf("MO")!==-1&&m.indexOf("TU")!==-1&&m.indexOf("WE")!==-1&&m.indexOf("TH")!==-1&&m.indexOf("FR")!==-1&&m.indexOf("SA")!==-1&&m.indexOf("SU")!==-1};var h=function(y,_){return y.weekday-_.weekday};this.byweekday.allWeeks.sort(h),this.byweekday.someWeeks.sort(h),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return n.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in n.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var i in e.origOptions){if(ua(["dtstart","tzid","wkst","freq"],i))return!0;if(!ua(n.IMPLEMENTED[e.options.freq],i))return!1}return t},n.prototype.isFullyConvertible=function(){return n.isFullyConvertible(this.rrule)},n.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in n.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Y.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},n.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},n.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},n.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},n.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},n.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},n.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},n.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},n.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},n.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},n.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},n.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,i=this.gettext;if(e===-1)return i("last");var o=Math.abs(e);switch(o){case 1:case 21:case 31:t=o+i("st");break;case 2:case 22:t=o+i("nd");break;case 3:case 23:t=o+i("rd");break;default:t=o+i("th")}return e<0?t+" "+i("last"):t},n.prototype.monthtext=function(e){return this.language.monthNames[e-1]},n.prototype.weekdaytext=function(e){var t=Ve(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},n.prototype.plural=function(e){return e%100!==1},n.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},n.prototype.list=function(e,t,i,o){var l=this;o===void 0&&(o=","),Fe(e)||(e=[e]);var c=function(m,h,y){for(var _="",w=0;w<m.length;w++)w!==0&&(w===m.length-1?_+=" "+y+" ":_+=h+" "),_+=m[w];return _};t=t||function(m){return m.toString()};var d=function(m){return t&&t.call(l,m)};return i?c(e.map(d),o,i):e.map(d).join(o+" ")},n}(),ut=ym;var gm=function(){function n(e){this.done=!0,this.rules=e}return n.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},n.prototype.isDone=function(){return this.done&&this.symbol===null},n.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var o in this.rules){i=this.rules[o];var l=i.exec(this.text);l&&(e===null||l[0].length>e[0].length)&&(e=l,t=o)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},n.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},n.prototype.acceptNumber=function(){return this.accept("number")},n.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},n}();function Hr(n,e){e===void 0&&(e=zt);var t={},i=new gm(e.tokens);if(!i.start(n))return null;return o(),t;function o(){i.expect("every");var w=i.acceptNumber();if(w&&(t.interval=parseInt(w[0],10)),i.isDone())throw new Error("Unexpected end");switch(i.symbol){case"day(s)":t.freq=Y.DAILY,i.nextSymbol()&&(c(),_());break;case"weekday(s)":t.freq=Y.WEEKLY,t.byweekday=[Y.MO,Y.TU,Y.WE,Y.TH,Y.FR],i.nextSymbol(),c(),_();break;case"week(s)":t.freq=Y.WEEKLY,i.nextSymbol()&&(l(),c(),_());break;case"hour(s)":t.freq=Y.HOURLY,i.nextSymbol()&&(l(),_());break;case"minute(s)":t.freq=Y.MINUTELY,i.nextSymbol()&&(l(),_());break;case"month(s)":t.freq=Y.MONTHLY,i.nextSymbol()&&(l(),_());break;case"year(s)":t.freq=Y.YEARLY,i.nextSymbol()&&(l(),_());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=Y.WEEKLY;var x=i.symbol.substr(0,2).toUpperCase();if(t.byweekday=[Y[x]],!i.nextSymbol())return;for(;i.accept("comma");){if(i.isDone())throw new Error("Unexpected end");var b=m();if(!b)throw new Error("Unexpected symbol "+i.symbol+", expected weekday");t.byweekday.push(Y[b]),i.nextSymbol()}c(),y(),_();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=Y.YEARLY,t.bymonth=[d()],!i.nextSymbol())return;for(;i.accept("comma");){if(i.isDone())throw new Error("Unexpected end");var D=d();if(!D)throw new Error("Unexpected symbol "+i.symbol+", expected month");t.bymonth.push(D),i.nextSymbol()}l(),_();break;default:throw new Error("Unknown symbol")}}function l(){var w=i.accept("on"),x=i.accept("the");if(w||x)do{var b=h(),D=m(),F=d();if(b)D?(i.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(Y[D].nth(b))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(b),i.accept("day(s)"));else if(D)i.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(Y[D]);else if(i.symbol==="weekday(s)")i.nextSymbol(),t.byweekday||(t.byweekday=[Y.MO,Y.TU,Y.WE,Y.TH,Y.FR]);else if(i.symbol==="week(s)"){i.nextSymbol();var T=i.acceptNumber();if(!T)throw new Error("Unexpected symbol "+i.symbol+", expected week number");for(t.byweekno=[parseInt(T[0],10)];i.accept("comma");){if(T=i.acceptNumber(),!T)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");t.byweekno.push(parseInt(T[0],10))}}else if(F)i.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(F);else return}while(i.accept("comma")||i.accept("the")||i.accept("on"))}function c(){var w=i.accept("at");if(w)do{var x=i.acceptNumber();if(!x)throw new Error("Unexpected symbol "+i.symbol+", expected hour");for(t.byhour=[parseInt(x[0],10)];i.accept("comma");){if(x=i.acceptNumber(),!x)throw new Error("Unexpected symbol "+i.symbol+"; expected hour");t.byhour.push(parseInt(x[0],10))}}while(i.accept("comma")||i.accept("at"))}function d(){switch(i.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function m(){switch(i.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return i.symbol.substr(0,2).toUpperCase();default:return!1}}function h(){switch(i.symbol){case"last":return i.nextSymbol(),-1;case"first":return i.nextSymbol(),1;case"second":return i.nextSymbol(),i.accept("last")?-2:2;case"third":return i.nextSymbol(),i.accept("last")?-3:3;case"nth":var w=parseInt(i.value[1],10);if(w<-366||w>366)throw new Error("Nth out of range: "+w);return i.nextSymbol(),i.accept("last")?-w:w;default:return!1}}function y(){i.accept("on"),i.accept("the");var w=h();if(w)for(t.bymonthday=[w],i.nextSymbol();i.accept("comma");){if(w=h(),!w)throw new Error("Unexpected symbol "+i.symbol+"; expected monthday");t.bymonthday.push(w),i.nextSymbol()}}function _(){if(i.symbol==="until"){var w=Date.parse(i.text);if(!w)throw new Error("Cannot parse until date:"+i.text);t.until=new Date(w)}else i.accept("for")&&(t.count=parseInt(i.value[0],10),i.expect("number"))}}var $;(function(n){n[n.YEARLY=0]="YEARLY",n[n.MONTHLY=1]="MONTHLY",n[n.WEEKLY=2]="WEEKLY",n[n.DAILY=3]="DAILY",n[n.HOURLY=4]="HOURLY",n[n.MINUTELY=5]="MINUTELY",n[n.SECONDLY=6]="SECONDLY"})($||($={}));function Gr(n){return n<$.HOURLY}var da=function(n,e){return e===void 0&&(e=zt),new Y(Hr(n,e)||void 0)},yr=["count","until","interval","byweekday","bymonthday","bymonth"];ut.IMPLEMENTED=[];ut.IMPLEMENTED[$.HOURLY]=yr;ut.IMPLEMENTED[$.MINUTELY]=yr;ut.IMPLEMENTED[$.DAILY]=["byhour"].concat(yr);ut.IMPLEMENTED[$.WEEKLY]=yr;ut.IMPLEMENTED[$.MONTHLY]=yr;ut.IMPLEMENTED[$.YEARLY]=["byweekno","byyearday"].concat(yr);var ca=function(n,e,t,i){return new ut(n,e,t,i).toString()},fa=ut.isFullyConvertible;var gr=function(){function n(e,t,i,o){this.hour=e,this.minute=t,this.second=i,this.millisecond=o||0}return n.prototype.getHours=function(){return this.hour},n.prototype.getMinutes=function(){return this.minute},n.prototype.getSeconds=function(){return this.second},n.prototype.getMilliseconds=function(){return this.millisecond},n.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},n}();var ma=function(n){pr(e,n);function e(t,i,o,l,c,d,m){var h=n.call(this,l,c,d,m)||this;return h.year=t,h.month=i,h.day=o,h}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return xt(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var i=Math.floor(this.month/12),o=Ye(this.month,12);this.month=o,this.year+=i,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,i){i>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-i))+t*7:this.day+=-(this.getWeekday()-i)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,i,o){for(i&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var l=Pn(this.hour,24),c=l.div,d=l.mod;if(c&&(this.hour=d,this.addDaily(c)),je(o)||J(o,this.hour))break}},e.prototype.addMinutes=function(t,i,o,l){for(i&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var c=Pn(this.minute,60),d=c.div,m=c.mod;if(d&&(this.minute=m,this.addHours(d,!1,o)),(je(o)||J(o,this.hour))&&(je(l)||J(l,this.minute)))break}},e.prototype.addSeconds=function(t,i,o,l,c){for(i&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var d=Pn(this.second,60),m=d.div,h=d.mod;if(m&&(this.second=h,this.addMinutes(m,!1,o,l)),(je(o)||J(o,this.hour))&&(je(l)||J(l,this.minute))&&(je(c)||J(c,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=as(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>An))return;t=as(this.year,this.month-1)[1]}}},e.prototype.add=function(t,i){var o=t.freq,l=t.interval,c=t.wkst,d=t.byhour,m=t.byminute,h=t.bysecond;switch(o){case $.YEARLY:return this.addYears(l);case $.MONTHLY:return this.addMonths(l);case $.WEEKLY:return this.addWeekly(l,c);case $.DAILY:return this.addDaily(l);case $.HOURLY:return this.addHours(l,i,d);case $.MINUTELY:return this.addMinutes(l,i,d,m);case $.SECONDLY:return this.addSeconds(l,i,d,m,h)}},e}(gr);function cs(n){for(var e=[],t=Object.keys(n),i=0,o=t;i<o.length;i++){var l=o[i];J(ya,l)||e.push(l),os(n[l])&&!Gt(n[l])&&e.push(l)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Me({},n)}function ha(n){var e=Me(Me({},zr),cs(n));if(ue(e.byeaster)&&(e.freq=Y.YEARLY),!(ue(e.freq)&&Y.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(n.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ue(e.wkst)?Ve(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Y.MO.weekday,ue(e.bysetpos)){Ve(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var i=e.bysetpos[t];if(i===0||!(i>=-366&&i<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(e.byweekno||_e(e.byweekno)||_e(e.byyearday)||e.bymonthday||_e(e.bymonthday)||ue(e.byweekday)||ue(e.byeaster)))switch(e.freq){case Y.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Y.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Y.WEEKLY:e.byweekday=[xt(e.dtstart)];break}if(ue(e.bymonth)&&!Fe(e.bymonth)&&(e.bymonth=[e.bymonth]),ue(e.byyearday)&&!Fe(e.byyearday)&&Ve(e.byyearday)&&(e.byyearday=[e.byyearday]),!ue(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Fe(e.bymonthday)){for(var o=[],l=[],t=0;t<e.bymonthday.length;t++){var i=e.bymonthday[t];i>0?o.push(i):i<0&&l.push(i)}e.bymonthday=o,e.bynmonthday=l}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ue(e.byweekno)&&!Fe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ue(e.byweekday))e.bynweekday=null;else if(Ve(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(ss(e.byweekday))e.byweekday=[ke.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ke)!e.byweekday.n||e.freq>Y.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var c=[],d=[],t=0;t<e.byweekday.length;t++){var m=e.byweekday[t];if(Ve(m)){c.push(m);continue}else if(ss(m)){c.push(ke.fromStr(m).weekday);continue}!m.n||e.freq>Y.MONTHLY?c.push(m.weekday):d.push([m.weekday,m.n])}e.byweekday=_e(c)?c:null,e.bynweekday=_e(d)?d:null}return ue(e.byhour)?Ve(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Y.HOURLY?[e.dtstart.getUTCHours()]:null,ue(e.byminute)?Ve(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Y.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ue(e.bysecond)?Ve(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Y.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function pa(n){var e=n.dtstart.getTime()%1e3;if(!Gr(n.freq))return[];var t=[];return n.byhour.forEach(function(i){n.byminute.forEach(function(o){n.bysecond.forEach(function(l){t.push(new gr(i,o,l,e))})})}),t}function Jr(n){var e=n.split(`
`).map(bm).filter(function(t){return t!==null});return Me(Me({},e[0]),e[1])}function Zr(n){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(n);if(!t)return e;var i=t[1],o=t[2];return i&&(e.tzid=i),e.dtstart=jr(o),e}function bm(n){if(n=n.replace(/^\s+|\s+$/,""),!n.length)return null;var e=/^([A-Z]+?)[:;]/.exec(n.toUpperCase());if(!e)return ga(n);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return ga(n);case"DTSTART":return Zr(n);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(n))}}function ga(n){var e=n.replace(/^RRULE:/i,""),t=Zr(e),i=n.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return i.forEach(function(o){var l=o.split("="),c=l[0],d=l[1];switch(c.toUpperCase()){case"FREQ":t.freq=$[d.toUpperCase()];break;case"WKST":t.wkst=Xe[d.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var m=vm(d),h=c.toLowerCase();t[h]=m;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=wm(d);break;case"DTSTART":case"TZID":var y=Zr(n);t.tzid=y.tzid,t.dtstart=y.dtstart;break;case"UNTIL":t.until=jr(d);break;case"BYEASTER":t.byeaster=Number(d);break;default:throw new Error("Unknown RRULE property '"+c+"'")}}),t}function vm(n){if(n.indexOf(",")!==-1){var e=n.split(",");return e.map(ba)}return ba(n)}function ba(n){return/^[+-]?\d+$/.test(n)?Number(n):n}function wm(n){var e=n.split(",");return e.map(function(t){if(t.length===2)return Xe[t];var i=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!i||i.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var o=Number(i[1]),l=i[2],c=Xe[l].weekday;return new ke(c,o)})}var Zt=function(){function n(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(n.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),n.prototype.toString=function(){var e=hr(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},n.prototype.getTime=function(){return this.date.getTime()},n.prototype.rezonedDate=function(){return this.isUTC?this.date:la(this.date,this.tzid)},n}();function qr(n){for(var e=[],t="",i=Object.keys(n),o=Object.keys(zr),l=0;l<i.length;l++)if(i[l]!=="tzid"&&J(o,i[l])){var c=i[l].toUpperCase(),d=n[i[l]],m="";if(!(!ue(d)||Fe(d)&&!d.length)){switch(c){case"FREQ":m=Y.FREQUENCIES[n.freq];break;case"WKST":Ve(d)?m=new ke(d).toString():m=d.toString();break;case"BYWEEKDAY":c="BYDAY",m=na(d).map(function(x){return x instanceof ke?x:Fe(x)?new ke(x[0],x[1]):new ke(x)}).toString();break;case"DTSTART":t=_m(d,n.tzid);break;case"UNTIL":m=hr(d,!n.tzid);break;default:if(Fe(d)){for(var h=[],y=0;y<d.length;y++)h[y]=String(d[y]);m=h.toString()}else m=String(d)}m&&e.push([c,m])}}var _=e.map(function(x){var b=x[0],D=x[1];return"".concat(b,"=").concat(D.toString())}).join(";"),w="";return _!==""&&(w="RRULE:".concat(_)),[t,w].filter(function(x){return!!x}).join(`
`)}function _m(n,e){return n?"DTSTART"+new Zt(new Date(n),e).toString():""}function xm(n,e){return Array.isArray(n)?!Array.isArray(e)||n.length!==e.length?!1:n.every(function(t,i){return t.getTime()===e[i].getTime()}):n instanceof Date?e instanceof Date&&n.getTime()===e.getTime():n===e}var va=function(){function n(){this.all=!1,this.before=[],this.after=[],this.between=[]}return n.prototype._cacheAdd=function(e,t,i){t&&(t=t instanceof Date?Vn(t):ls(t)),e==="all"?this.all=t:(i._value=t,this[e].push(i))},n.prototype._cacheGet=function(e,t){var i=!1,o=t?Object.keys(t):[],l=function(y){for(var _=0;_<o.length;_++){var w=o[_];if(!xm(t[w],y[w]))return!0}return!1},c=this[e];if(e==="all")i=this.all;else if(Fe(c))for(var d=0;d<c.length;d++){var m=c[d];if(!(o.length&&l(m))){i=m._value;break}}if(!i&&this.all){for(var h=new Dt(e,t),d=0;d<this.all.length&&h.accept(this.all[d]);d++);i=h.getValue(),this._cacheAdd(e,i,t)}return Fe(i)?ls(i):i instanceof Date?Vn(i):i},n}();var wa=S(S(S(S(S(S(S(S(S(S(S(S(S([],z(1,31),!0),z(2,28),!0),z(3,31),!0),z(4,30),!0),z(5,31),!0),z(6,30),!0),z(7,31),!0),z(8,31),!0),z(9,30),!0),z(10,31),!0),z(11,30),!0),z(12,31),!0),z(1,7),!0),_a=S(S(S(S(S(S(S(S(S(S(S(S(S([],z(1,31),!0),z(2,29),!0),z(3,31),!0),z(4,30),!0),z(5,31),!0),z(6,30),!0),z(7,31),!0),z(8,31),!0),z(9,30),!0),z(10,31),!0),z(11,30),!0),z(12,31),!0),z(1,7),!0),km=Ke(1,29),Dm=Ke(1,30),Qt=Ke(1,31),Ne=Ke(1,32),xa=S(S(S(S(S(S(S(S(S(S(S(S(S([],Ne,!0),Dm,!0),Ne,!0),Qt,!0),Ne,!0),Qt,!0),Ne,!0),Ne,!0),Qt,!0),Ne,!0),Qt,!0),Ne,!0),Ne.slice(0,7),!0),ka=S(S(S(S(S(S(S(S(S(S(S(S(S([],Ne,!0),km,!0),Ne,!0),Qt,!0),Ne,!0),Qt,!0),Ne,!0),Ne,!0),Qt,!0),Ne,!0),Qt,!0),Ne,!0),Ne.slice(0,7),!0),Sm=Ke(-28,0),Tm=Ke(-29,0),Lt=Ke(-30,0),Oe=Ke(-31,0),Da=S(S(S(S(S(S(S(S(S(S(S(S(S([],Oe,!0),Tm,!0),Oe,!0),Lt,!0),Oe,!0),Lt,!0),Oe,!0),Oe,!0),Lt,!0),Oe,!0),Lt,!0),Oe,!0),Oe.slice(0,7),!0),Sa=S(S(S(S(S(S(S(S(S(S(S(S(S([],Oe,!0),Sm,!0),Oe,!0),Lt,!0),Oe,!0),Lt,!0),Oe,!0),Oe,!0),Lt,!0),Oe,!0),Lt,!0),Oe,!0),Oe.slice(0,7),!0),Ta=[0,31,60,91,121,152,182,213,244,274,305,335,366],Fa=[0,31,59,90,120,151,181,212,243,273,304,334,365],fs=function(){for(var n=[],e=0;e<55;e++)n=n.concat(Ke(7));return n}();function Ma(n,e){var t=lt(n,1,1),i=mr(n)?366:365,o=mr(n+1)?366:365,l=Vr(t),c=xt(t),d=Me(Me({yearlen:i,nextyearlen:o,yearordinal:l,yearweekday:c},Fm(n)),{wnomask:null});if(je(e.byweekno))return d;d.wnomask=z(0,i+7);var m,h,y=m=Ye(7-c+e.wkst,7);y>=4?(y=0,h=d.yearlen+Ye(c-e.wkst,7)):h=i-y;for(var _=Math.floor(h/7),w=Ye(h,7),x=Math.floor(_+w/4),b=0;b<e.byweekno.length;b++){var D=e.byweekno[b];if(D<0&&(D+=x+1),D>0&&D<=x){var F=void 0;D>1?(F=y+(D-1)*7,y!==m&&(F-=7-m)):F=y;for(var T=0;T<7&&(d.wnomask[F]=1,F++,d.wdaymask[F]!==e.wkst);T++);}}if(J(e.byweekno,1)){var F=y+x*7;if(y!==m&&(F-=7-m),F<i)for(var b=0;b<7&&(d.wnomask[F]=1,F+=1,d.wdaymask[F]!==e.wkst);b++);}if(y){var C=void 0;if(J(e.byweekno,-1))C=-1;else{var A=xt(lt(n-1,1,1)),L=Ye(7-A.valueOf()+e.wkst,7),V=mr(n-1)?366:365,P=void 0;L>=4?(L=0,P=V+Ye(A-e.wkst,7)):P=i-y,C=Math.floor(52+Ye(P,7)/4)}if(J(e.byweekno,C))for(var F=0;F<y;F++)d.wnomask[F]=1}return d}function Fm(n){var e=mr(n)?366:365,t=lt(n,1,1),i=xt(t);return e===365?{mmask:wa,mdaymask:ka,nmdaymask:Sa,wdaymask:fs.slice(i),mrange:Fa}:{mmask:_a,mdaymask:xa,nmdaymask:Da,wdaymask:fs.slice(i),mrange:Ta}}function Ra(n,e,t,i,o,l){var c={lastyear:n,lastmonth:e,nwdaymask:[]},d=[];if(l.freq===Y.YEARLY)if(je(l.bymonth))d=[[0,t]];else for(var m=0;m<l.bymonth.length;m++)e=l.bymonth[m],d.push(i.slice(e-1,e+1));else l.freq===Y.MONTHLY&&(d=[i.slice(e-1,e+1)]);if(je(d))return c;c.nwdaymask=z(0,t);for(var m=0;m<d.length;m++)for(var h=d[m],y=h[0],_=h[1]-1,w=0;w<l.bynweekday.length;w++){var x=void 0,b=l.bynweekday[w],D=b[0],F=b[1];F<0?(x=_+(F+1)*7,x-=Ye(o[x]-D,7)):(x=y+(F-1)*7,x+=Ye(7-o[x]+D,7)),y<=x&&x<=_&&(c.nwdaymask[x]=1)}return c}function Ea(n,e){e===void 0&&(e=0);var t=n%19,i=Math.floor(n/100),o=n%100,l=Math.floor(i/4),c=i%4,d=Math.floor((i+8)/25),m=Math.floor((i-d+1)/3),h=Math.floor(19*t+i-l-m+15)%30,y=Math.floor(o/4),_=o%4,w=Math.floor(32+2*c+2*y-h-_)%7,x=Math.floor((t+11*h+22*w)/451),b=Math.floor((h+w-7*x+114)/31),D=(h+w-7*x+114)%31+1,F=Date.UTC(n,b-1,D+e),T=Date.UTC(n,0,1);return[Math.ceil((F-T)/(1e3*60*60*24))]}var Mm=function(){function n(e){this.options=e}return n.prototype.rebuild=function(e,t){var i=this.options;if(e!==this.lastyear&&(this.yearinfo=Ma(e,i)),_e(i.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var o=this.yearinfo,l=o.yearlen,c=o.mrange,d=o.wdaymask;this.monthinfo=Ra(e,t,l,c,d,i)}ue(i.byeaster)&&(this.eastermask=Ea(e,i.byeaster))},Object.defineProperty(n.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),n.prototype.ydayset=function(){return[Ke(this.yearlen),0,this.yearlen]},n.prototype.mdayset=function(e,t){for(var i=this.mrange[t-1],o=this.mrange[t],l=z(null,this.yearlen),c=i;c<o;c++)l[c]=c;return[l,i,o]},n.prototype.wdayset=function(e,t,i){for(var o=z(null,this.yearlen+7),l=Vr(lt(e,t,i))-this.yearordinal,c=l,d=0;d<7&&(o[l]=l,++l,this.wdaymask[l]!==this.options.wkst);d++);return[o,c,l]},n.prototype.ddayset=function(e,t,i){var o=z(null,this.yearlen),l=Vr(lt(e,t,i))-this.yearordinal;return o[l]=l,[o,l,l+1]},n.prototype.htimeset=function(e,t,i,o){var l=this,c=[];return this.options.byminute.forEach(function(d){c=c.concat(l.mtimeset(e,d,i,o))}),kt(c),c},n.prototype.mtimeset=function(e,t,i,o){var l=this.options.bysecond.map(function(c){return new gr(e,t,c,o)});return kt(l),l},n.prototype.stimeset=function(e,t,i,o){return[new gr(e,t,i,o)]},n.prototype.getdayset=function(e){switch(e){case $.YEARLY:return this.ydayset.bind(this);case $.MONTHLY:return this.mdayset.bind(this);case $.WEEKLY:return this.wdayset.bind(this);case $.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},n.prototype.gettimeset=function(e){switch(e){case $.HOURLY:return this.htimeset.bind(this);case $.MINUTELY:return this.mtimeset.bind(this);case $.SECONDLY:return this.stimeset.bind(this)}},n}(),Ua=Mm;function Ya(n,e,t,i,o,l){for(var c=[],d=0;d<n.length;d++){var m=void 0,h=void 0,y=n[d];y<0?(m=Math.floor(y/e.length),h=Ye(y,e.length)):(m=Math.floor((y-1)/e.length),h=Ye(y-1,e.length));for(var _=[],w=t;w<i;w++){var x=l[w];ue(x)&&_.push(x)}var b=void 0;m<0?b=_.slice(m)[0]:b=_[m];var D=e[h],F=Wn(o.yearordinal+b),T=$n(F,D);J(c,T)||c.push(T)}return kt(c),c}function jn(n,e){var t=e.dtstart,i=e.freq,o=e.interval,l=e.until,c=e.bysetpos,d=e.count;if(d===0||o===0)return St(n);var m=ma.fromDate(t),h=new Ua(e);h.rebuild(m.year,m.month);for(var y=Um(h,m,e);;){var _=h.getdayset(i)(m.year,m.month,m.day),w=_[0],x=_[1],b=_[2],D=Em(w,x,b,h,e);if(_e(c))for(var F=Ya(c,y,x,b,h,w),T=0;T<F.length;T++){var C=F[T];if(l&&C>l)return St(n);if(C>=t){var A=Na(C,e);if(!n.accept(A)||d&&(--d,!d))return St(n)}}else for(var T=x;T<b;T++){var L=w[T];if(ue(L))for(var V=Wn(h.yearordinal+L),P=0;P<y.length;P++){var ve=y[P],C=$n(V,ve);if(l&&C>l)return St(n);if(C>=t){var A=Na(C,e);if(!n.accept(A)||d&&(--d,!d))return St(n)}}}if(e.interval===0||(m.add(e,D),m.year>An))return St(n);Gr(i)||(y=h.gettimeset(i)(m.hour,m.minute,m.second,0)),h.rebuild(m.year,m.month)}}function Rm(n,e,t){var i=t.bymonth,o=t.byweekno,l=t.byweekday,c=t.byeaster,d=t.bymonthday,m=t.bynmonthday,h=t.byyearday;return _e(i)&&!J(i,n.mmask[e])||_e(o)&&!n.wnomask[e]||_e(l)&&!J(l,n.wdaymask[e])||_e(n.nwdaymask)&&!n.nwdaymask[e]||c!==null&&!J(n.eastermask,e)||(_e(d)||_e(m))&&!J(d,n.mdaymask[e])&&!J(m,n.nmdaymask[e])||_e(h)&&(e<n.yearlen&&!J(h,e+1)&&!J(h,-n.yearlen+e)||e>=n.yearlen&&!J(h,e+1-n.yearlen)&&!J(h,-n.nextyearlen+e-n.yearlen))}function Na(n,e){return new Zt(n,e.tzid).rezonedDate()}function St(n){return n.getValue()}function Em(n,e,t,i,o){for(var l=!1,c=e;c<t;c++){var d=n[c];l=Rm(i,d,o),l&&(n[d]=null)}return l}function Um(n,e,t){var i=t.freq,o=t.byhour,l=t.byminute,c=t.bysecond;return Gr(i)?pa(t):i>=Y.HOURLY&&_e(o)&&!J(o,e.hour)||i>=Y.MINUTELY&&_e(l)&&!J(l,e.minute)||i>=Y.SECONDLY&&_e(c)&&!J(c,e.second)?[]:n.gettimeset(i)(e.hour,e.minute,e.second,e.millisecond)}var Xe={MO:new ke(0),TU:new ke(1),WE:new ke(2),TH:new ke(3),FR:new ke(4),SA:new ke(5),SU:new ke(6)},zr={freq:$.YEARLY,dtstart:null,interval:1,wkst:Xe.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},ya=Object.keys(zr),Y=function(){function n(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new va,this.origOptions=cs(e);var i=ha(e).parsedOptions;this.options=i}return n.parseText=function(e,t){return Hr(e,t)},n.fromText=function(e,t){return da(e,t)},n.fromString=function(e){return new n(n.parseString(e)||void 0)},n.prototype._iter=function(e){return jn(e,this.options)},n.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},n.prototype._cacheAdd=function(e,t,i){if(this._cache)return this._cache._cacheAdd(e,t,i)},n.prototype.all=function(e){if(e)return this._iter(new ds("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Dt("all",{})),this._cacheAdd("all",t)),t},n.prototype.between=function(e,t,i,o){if(i===void 0&&(i=!1),!Gt(e)||!Gt(t))throw new Error("Invalid date passed in to RRule.between");var l={before:t,after:e,inc:i};if(o)return this._iter(new ds("between",l,o));var c=this._cacheGet("between",l);return c===!1&&(c=this._iter(new Dt("between",l)),this._cacheAdd("between",c,l)),c},n.prototype.before=function(e,t){if(t===void 0&&(t=!1),!Gt(e))throw new Error("Invalid date passed in to RRule.before");var i={dt:e,inc:t},o=this._cacheGet("before",i);return o===!1&&(o=this._iter(new Dt("before",i)),this._cacheAdd("before",o,i)),o},n.prototype.after=function(e,t){if(t===void 0&&(t=!1),!Gt(e))throw new Error("Invalid date passed in to RRule.after");var i={dt:e,inc:t},o=this._cacheGet("after",i);return o===!1&&(o=this._iter(new Dt("after",i)),this._cacheAdd("after",o,i)),o},n.prototype.count=function(){return this.all().length},n.prototype.toString=function(){return qr(this.origOptions)},n.prototype.toText=function(e,t,i){return ca(this,e,t,i)},n.prototype.isFullyConvertibleToText=function(){return fa(this)},n.prototype.clone=function(){return new n(this.origOptions)},n.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],n.YEARLY=$.YEARLY,n.MONTHLY=$.MONTHLY,n.WEEKLY=$.WEEKLY,n.DAILY=$.DAILY,n.HOURLY=$.HOURLY,n.MINUTELY=$.MINUTELY,n.SECONDLY=$.SECONDLY,n.MO=Xe.MO,n.TU=Xe.TU,n.WE=Xe.WE,n.TH=Xe.TH,n.FR=Xe.FR,n.SA=Xe.SA,n.SU=Xe.SU,n.parseString=Jr,n.optionsToString=qr,n}();function Oa(n,e,t,i,o,l){var c={},d=n.accept;function m(w,x){t.forEach(function(b){b.between(w,x,!0).forEach(function(D){c[Number(D)]=!0})})}o.forEach(function(w){var x=new Zt(w,l).rezonedDate();c[Number(x)]=!0}),n.accept=function(w){var x=Number(w);return isNaN(x)?d.call(this,w):!c[x]&&(m(new Date(x-1),new Date(x+1)),!c[x])?(c[x]=!0,d.call(this,w)):!0},n.method==="between"&&(m(n.args.after,n.args.before),n.accept=function(w){var x=Number(w);return c[x]?!0:(c[x]=!0,d.call(this,w))});for(var h=0;h<i.length;h++){var y=new Zt(i[h],l).rezonedDate();if(!n.accept(new Date(y.getTime())))break}e.forEach(function(w){jn(n,w.options)});var _=n._result;switch(kt(_),n.method){case"all":case"between":return _;case"before":return _.length&&_[_.length-1]||null;case"after":default:return _.length&&_[0]||null}}var Qa={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Ym(n,e){var t=[],i=[],o=[],l=[],c=Zr(n),d=c.dtstart,m=c.tzid,h=Cm(n,e.unfold);return h.forEach(function(y){var _;if(y){var w=Lm(y),x=w.name,b=w.parms,D=w.value;switch(x.toUpperCase()){case"RRULE":if(b.length)throw new Error("unsupported RRULE parm: ".concat(b.join(",")));t.push(Jr(y));break;case"RDATE":var F=(_=/RDATE(?:;TZID=([^:=]+))?/i.exec(y))!==null&&_!==void 0?_:[],T=F[1];T&&!m&&(m=T),i=i.concat(La(D,b));break;case"EXRULE":if(b.length)throw new Error("unsupported EXRULE parm: ".concat(b.join(",")));o.push(Jr(D));break;case"EXDATE":l=l.concat(La(D,b));break;case"DTSTART":break;default:throw new Error("unsupported property: "+x)}}}),{dtstart:d,tzid:m,rrulevals:t,rdatevals:i,exrulevals:o,exdatevals:l}}function Nm(n,e){var t=Ym(n,e),i=t.rrulevals,o=t.rdatevals,l=t.exrulevals,c=t.exdatevals,d=t.dtstart,m=t.tzid,h=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||i.length>1||o.length||l.length||c.length){var y=new hs(h);return y.dtstart(d),y.tzid(m||void 0),i.forEach(function(w){y.rrule(new Y(ms(w,d,m),h))}),o.forEach(function(w){y.rdate(w)}),l.forEach(function(w){y.exrule(new Y(ms(w,d,m),h))}),c.forEach(function(w){y.exdate(w)}),e.compatible&&e.dtstart&&y.rdate(d),y}var _=i[0]||{};return new Y(ms(_,_.dtstart||e.dtstart||d,_.tzid||e.tzid||m),h)}function Hn(n,e){return e===void 0&&(e={}),Nm(n,Om(e))}function ms(n,e,t){return Me(Me({},n),{dtstart:e,tzid:t})}function Om(n){var e=[],t=Object.keys(n),i=Object.keys(Qa);if(t.forEach(function(o){J(i,o)||e.push(o)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Me(Me({},Qa),n)}function Qm(n){if(n.indexOf(":")===-1)return{name:"RRULE",value:n};var e=ia(n,":",1),t=e[0],i=e[1];return{name:t,value:i}}function Lm(n){var e=Qm(n),t=e.name,i=e.value,o=t.split(";");if(!o)throw new Error("empty property name");return{name:o[0].toUpperCase(),parms:o.slice(1),value:i}}function Cm(n,e){if(e===void 0&&(e=!1),n=n&&n.trim(),!n)throw new Error("Invalid empty string");if(!e)return n.split(/\s/);for(var t=n.split(`
`),i=0;i<t.length;){var o=t[i]=t[i].replace(/\s+$/g,"");o?i>0&&o[0]===" "?(t[i-1]+=o.slice(1),t.splice(i,1)):i+=1:t.splice(i,1)}return t}function Im(n){n.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function La(n,e){return Im(e),n.split(",").map(function(t){return jr(t)})}function Ca(n){var e=this;return function(t){if(t!==void 0&&(e["_".concat(n)]=t),e["_".concat(n)]!==void 0)return e["_".concat(n)];for(var i=0;i<e._rrule.length;i++){var o=e._rrule[i].origOptions[n];if(o)return o}}}var hs=function(n){pr(e,n);function e(t){t===void 0&&(t=!1);var i=n.call(this,{},t)||this;return i.dtstart=Ca.apply(i,["dtstart"]),i.tzid=Ca.apply(i,["tzid"]),i._rrule=[],i._rdate=[],i._exrule=[],i._exdate=[],i}return e.prototype._iter=function(t){return Oa(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){Ia(t,this._rrule)},e.prototype.exrule=function(t){Ia(t,this._exrule)},e.prototype.rdate=function(t){Ba(t,this._rdate)},e.prototype.exdate=function(t){Ba(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Hn(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Hn(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(qr({dtstart:this._dtstart}))),this._rrule.forEach(function(i){t=t.concat(i.toString().split(`
`))}),this._exrule.forEach(function(i){t=t.concat(i.toString().split(`
`).map(function(o){return o.replace(/^RRULE:/,"EXRULE:")}).filter(function(o){return!/^DTSTART/.test(o)}))}),this._rdate.length&&t.push(Pa("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Pa("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(i){return t.rrule(i.clone())}),this._exrule.forEach(function(i){return t.exrule(i.clone())}),this._rdate.forEach(function(i){return t.rdate(new Date(i.getTime()))}),this._exdate.forEach(function(i){return t.exdate(new Date(i.getTime()))}),t},e}(Y);function Ia(n,e){if(!(n instanceof Y))throw new TypeError(String(n)+" is not RRule instance");J(e.map(String),String(n))||e.push(n)}function Ba(n,e){if(!(n instanceof Date))throw new TypeError(String(n)+" is not Date instance");J(e.map(Number),Number(n))||(e.push(n),kt(e))}function Pa(n,e,t){var i=!t||t.toUpperCase()==="UTC",o=i?"".concat(n,":"):"".concat(n,";TZID=").concat(t,":"),l=e.map(function(c){return hr(c.valueOf(),i)}).join(",");return"".concat(o).concat(l)}var it=class n{constructor(e,t){this.primary=e;this.func=t}static ofChar(e){return new n(e,t=>t===e)}static ofChars(e){if(e.length===0)throw"empty symbol";if(e[0]==null)throw"ch mustn't be null";return e.length===0?this.ofChar(e[0]):new n(e[0],t=>e.filter(i=>t===i).length>0)}isSymbol(e){return this.func(e)}},Gn=class{constructor(e){this.tokens=e}setTokenText(e,t,i=!1,o=!1,l=!1,c){let d=this.getToken(e);if(d===null){if(!o)return null;if(e instanceof it?d={symbol:e.primary,text:t}:d={symbol:e,text:t},l&&d.symbol!==""&&!d.text.startsWith(" ")&&(d.text=" "+d.text),this.tokens.length>0){let m=this.tokens[this.tokens.length-1];this.isTokenEndsWithSpace(m)||(m.text+=" ")}if(c==null)this.tokens.push(d);else{let m=0,h=-1,y=0;for(let _ of this.tokens){let w=m+_.symbol.length+_.text.length;if(y>0&&w>c){h=y;break}m=w,y++}h==-1?this.tokens.push(d):(this.tokens.splice(h,0,d),h<this.tokens.length-1&&(d.text=d.text+" "))}return d}return this.replaceTokenText(d,t,i),d}length(){return this.tokens.length}replaceTokenText(e,t,i=!1){if(!i){e.text=t;return}e.text=e.text.replace(/^(\s*).*?(\s*)$/,`$1${t}$2`)}isTokenEndsWithSpace(e){return e.text.match(/^.*\s$/)}getToken(e){for(let t of this.tokens)if(e instanceof it){if(e.isSymbol(t.symbol))return t}else if(e===t.symbol)return t;return null}getTokenText(e,t=!1){let i=this.getToken(e);return i===null?null:t?i.text.replace(/^\s*(.*?)\s*$/,"$1"):i.text}removeToken(e){this.tokens=this.tokens.filter(t=>!e.isSymbol(t.symbol))}forEachTokens(e){this.tokens.forEach(e)}rangeOfSymbol(e){let t=0;for(let i of this.tokens){let o=t+i.symbol.length+i.text.length;if(e.isSymbol(i.symbol))return{start:t,end:o};t=o}}join(){return this.tokens.map(e=>e.symbol+e.text).join("")}};function Aa(n,e){let t=[...n],i="",o=null,l=[],c=()=>{o===null?l.push({symbol:"",text:i}):o.text=i};return t.forEach(d=>{e.filter(h=>h.isSymbol(d)).length>0?(c(),o={symbol:d,text:""},l.push(o),i=""):i+=d}),i.length>0&&c(),l}function Bm(n){return n.replace(/#\w+/g,"")}var ne=class ne{constructor(e,t,i,o){this.useCustomEmoji=e;this.removeTags=t;this.strictDateFormat=i;this.tokens=o}static parse(e,t,i,o){return new ne(t!=null?t:!1,i!=null?i:!1,o!=null?o:!0,new Gn(Aa(e,this.allSymbols)))}getTitle(){let e=this.tokens.getTokenText("",!0);return e!=null&&this.removeTags&&(e=Bm(e)),e}getTime(){return this.getDate(this.getReminderSymbol())}setTime(e,t){this.useCustomEmoji?this.setDate(this.getReminderSymbol(),e,1):this.setDate(this.getReminderSymbol(),e,t)}getDueDate(){return this.getDate(ne.symbolDueDate)}setDueDate(e){this.setDate(ne.symbolDueDate,e)}setRawTime(e){return this.setDate(this.getReminderSymbol(),e),!0}getReminderSymbol(){return this.useCustomEmoji?ne.symbolReminder:ne.symbolDueDate}getEndOfTimeTextIndex(){let e=ne.symbolDueDate;this.useCustomEmoji&&(e=ne.symbolReminder);let t=this.tokens.rangeOfSymbol(e);return t!=null?t.end:this.toMarkdown().length}toMarkdown(){return this.tokens.join()}setTitle(e){this.tokens.setTokenText("",e,!0,!0)}getDoneDate(){return this.getDate(ne.symbolDoneDate)}setDoneDate(e){this.setDate(ne.symbolDoneDate,e)}getRecurrence(){return this.tokens.getTokenText(ne.symbolRecurrence,!0)}clone(){return ne.parse(this.toMarkdown(),this.useCustomEmoji,this.removeTags,this.strictDateFormat)}getDate(e){let t=this.tokens.getTokenText(e,!0);if(t===null)return null;if(e===ne.symbolReminder)return at.parse(t);{let i=(0,Kr.default)(t,ne.dateFormat,this.strictDateFormat);return i.isValid()?new W(i,!1):null}}setDate(e,t,i){if(t==null){this.tokens.removeToken(e);return}let o;t instanceof W?e===ne.symbolReminder?o=at.toString(t):o=t.format(ne.dateFormat):o=t,this.tokens.setTokenText(e,o,!0,!0,this.shouldSplitBetweenSymbolAndText(),i)}shouldSplitBetweenSymbolAndText(){let e=0,t=0;return this.tokens.forEachTokens(i=>{i.symbol!==""&&(i.text.match(/^\s.*$/)?e+=1:t++)}),e>t?!0:!(e<t)}};g(ne,"dateFormat","YYYY-MM-DD"),g(ne,"symbolDueDate",it.ofChars([..."\u{1F4C5}\u{1F4C6}\u{1F5D3}"])),g(ne,"symbolDoneDate",it.ofChar("\u2705")),g(ne,"symbolRecurrence",it.ofChar("\u{1F501}")),g(ne,"symbolReminder",it.ofChar("\u23F0")),g(ne,"symbolScheduled",it.ofChar("\u23F3")),g(ne,"symbolStart",it.ofChar("\u{1F6EB}")),g(ne,"allSymbols",[ne.symbolDueDate,ne.symbolDoneDate,ne.symbolRecurrence,ne.symbolReminder,ne.symbolStart,ne.symbolScheduled]);var zn=ne,Jn=class Jn extends Ot{parseReminder(e){let t=zn.parse(e.body,this.useCustomEmoji(),this.removeTagsEnabled(),this.isStrictDateFormat());return this.useCustomEmoji()&&t.getDueDate()==null?null:t}removeTagsEnabled(){return this.config.getParameter(Ie.removeTagsForTasksPlugin)}useCustomEmoji(){return this.config.getParameter(Ie.useCustomEmojiForTasksPlugin)}modifyReminder(e,t,i,o){if(!super.modifyReminder(e,t,i,o))return!1;if(o.checked!==void 0)if(o.checked){let l=i.getRecurrence();if(l!==null){let c=t.clone(),d=i.clone(),m=i.getDueDate();if(m==null)return!1;if(this.useCustomEmoji()){let h=i.getTime();if(h==null)return!1;let y=this.nextDate(l,h.moment()),_=this.nextDate(l,m.moment());if(y==null||_==null)return!1;d.setTime(new W((0,Kr.default)(y),!0)),d.setDueDate(new W((0,Kr.default)(_),!0))}else{let h=this.nextDate(l,m.moment());if(h==null)return!1;let y=new W((0,Kr.default)(h),!0);d.setTime(y)}c.body=d.toMarkdown(),c.setChecked(!1),e.insertTodo(t.lineIndex,c)}i.setDoneDate(this.config.getParameter(Ie.now))}else i.setDoneDate(void 0);return!0}nextDate(e,t){let i=Y.parseText(e);if(!i)return;let o=this.config.getParameter(Ie.now).moment();o.set("hour",t.get("hour")),o.set("minute",t.get("minute")),o.set("second",t.get("second")),o.set("millisecond",t.get("millisecond")),o.isAfter(t)&&(t=o);let l=t.clone();i.dtstart=t.utc(!0).toDate();let d=new Y(i).after(t.toDate(),!1);if(d==null)return;let m=d.getTime()-i.dtstart.getTime();return l.add(m,"millisecond"),l.toDate()}newReminder(e,t,i){let o=zn.parse(e,this.useCustomEmoji(),this.removeTagsEnabled(),this.isStrictDateFormat());return o.setTime(t,i),this.useCustomEmoji()&&o.getDueDate()==null&&o.setDueDate(t),o.setTitle(e),o}};g(Jn,"instance",new Jn);var Zn=Jn;var br=new Un;br.resetFormat([fr.instance]);var Xr=class{constructor(e,t,i,o,l){this.name=e;this.description=t;this.example=i;this.format=o;this.defaultEnabled=l}};function Wa(n){return br.parse(n)}async function $a(n,e,t){return br.modify(n,e,t)}function Va(n){n.length===0?br.resetFormat([fr.instance]):br.resetFormat(n.map(e=>e.format))}function ja(n){br.setConfig(n)}var ps=new Xr("ReminderPluginReminderFormat","Reminder plugin format","(@2021-09-08)",fr.instance,!0),ys=new Xr("TasksPluginReminderFormat","Tasks plugin format","\u{1F4C5} 2021-09-08",Zn.instance,!1),gs=new Xr("KanbanPluginReminderFormat","Kanban plugin format","@{2021-09-08}",Cn.instance,!1),en=[ps,ys,gs];var Tt=class{constructor(e,t){g(this,"doc");this.doc=new Br(e,t)}getReminders(e=!0){let t=Wa(this.doc);return e?t.filter(i=>!i.done):t}getTodos(){return this.doc.getTodos()}async modifyReminderLines(e){for(let t of this.getReminders(!1)){let i=e(t);if(i===null)return;await this.modifyReminderLine(t,i)}}async updateReminder(e,t){await this.modifyReminderLine(e,t)}async modifyReminderLine(e,t){let i=await $a(this.doc,e,t);return i?console.info("Reminder was updated: reminder=%o",e):console.warn("Cannot modify reminder because it's not a reminder todo: reminder=%o",e),i}getContent(){return this.doc.toMarkdown()}};var Ha=require("obsidian"),qn=class extends Ha.FuzzySuggestModal{constructor(t,i,o){super(t);this.suggestions=i;this.onChooseSuggestionFunc=o}getItems(){return this.suggestions}getItemText(t){return t}onChooseItem(t){this.onChooseSuggestionFunc(t)}};function Ga(n,e){new qn(n,["YYYY-MM-DD","YYYY/MM/DD","DD-MM-YYYY","DD/MM/YYYY"],t=>{new qn(n,["YYYY-MM-DD HH:mm","YYYY/MM/DD HH:mm","DD-MM-YYYY HH:mm","DD/MM/YYYY HH:mm","YYYY-MM-DDTHH:mm:ss:SSS"],i=>{e(t,i)}).open()}).open()}async function Pm(n,e,t){let i=0,o=n.app.vault;for(let l of o.getMarkdownFiles()){let c=new Tt(l.path,await o.read(l)),d=0;await c.modifyReminderLines(m=>{let h;return m.time.hasTimePart?h=m.time.format(t):h=m.time.format(e),i++,d++,{rawTime:h}}),d>0&&await o.modify(l,c.getContent())}return n.settings.dateFormat.rawValue.value=e,n.settings.dateTimeFormat.rawValue.value=t,i>0&&await n.fileSystem.reloadRemindersInAllFiles(),i}function za(n,e){return n||Jo("Convert reminder time format","This command rewrite reminder dates in all markdown files.  You should make a backup of your vault before you execute this.  May I continue to convert?").then(t=>{t===0&&Ga(e.app,(i,o)=>{Pm(e,i,o).catch(()=>{})})}),!0}function Za(n,e,t){if(n)return!0;t.showAutoComplete(e)}async function Am(n,e,t){if(!n.fileSystem.isMarkdownFile(e))return;let i=n.app.vault,o=new Tt(e.path,await i.read(e)),l=o.getReminders(!1).find(c=>c.rowNumber===t);if(l)await o.updateReminder(l,{checked:!l.done});else{let c=o.getTodos().find(d=>d.lineIndex===t);if(console.log(c),!c)return;c.setChecked(!c.isChecked())}await i.modify(e,o.getContent())}function Ja(n,e,t){if(n)return!0;e&&e.file&&Am(t,e.file,e.editor.getCursor().line)}var qa=require("obsidian");var Kn=class extends qa.SuggestModal{constructor(t,i){super(t);this.onSelect=i}getSuggestions(t){return ta.filter(i=>i.name.toLowerCase().includes(t.toLowerCase()))}renderSuggestion(t,i){let o=i.createDiv({cls:"reminder-preset-suggestion"}),l=o.createEl("div",{text:t.name,cls:"reminder-preset-title"}),c=W.now(),d=o.createDiv({cls:"reminder-preset-previews"});d.createEl("div",{cls:"reminder-preset-preview-line",text:"Year/Month: "+c.format(t.format.yearMonthFormat)}),d.createEl("div",{cls:"reminder-preset-preview-line",text:"Month/Day: "+c.format(t.format.monthDayFormat)}),d.createEl("div",{cls:"reminder-preset-preview-line",text:"Short: "+c.format(t.format.shortDateWithWeekdayFormat)}),d.createEl("div",{cls:"reminder-preset-preview-line",text:"Time: "+c.format(t.format.timeFormat)}),l.style.fontWeight="600",l.style.marginBottom="4px",d.style.opacity="0.8",d.style.fontSize="12px",d.style.display="grid",d.style.gridAutoRows="min-content",d.style.rowGap="2px"}onChooseSuggestion(t){this.onSelect(t)}};function Ka(n,e){return n||new Kn(e.app,t=>{e.data.settings.monthDayDisplayFormat.rawValue.value=t.format.monthDayFormat,e.data.settings.yearMonthDisplayFormat.rawValue.value=t.format.yearMonthFormat,e.data.settings.shortDateWithWeekdayDisplayFormat.rawValue.value=t.format.shortDateWithWeekdayFormat,e.data.settings.timeDisplayFormat.rawValue.value=t.format.timeFormat,e.data.save(!0),e.ui.invalidate(),e.ui.reload(!0)}).open(),!0}function el(n){n.addCommand({id:"scan-reminders",name:"Scan reminders",checkCallback:e=>Go(e,n)}),n.addCommand({id:"show-reminders",name:"Show reminders",checkCallback:e=>zo(e,n.ui)}),n.addCommand({id:"convert-reminder-time-format",name:"Convert reminder time format",checkCallback:e=>za(e,n)}),n.addCommand({id:"show-date-chooser",name:"Show calendar popup",icon:"calendar-with-checkmark",hotkeys:[{modifiers:["Meta","Shift"],key:"2"}],editorCheckCallback:(e,t)=>Za(e,t,n.ui)}),n.addCommand({id:"toggle-checklist-status",name:"Toggle checklist status",hotkeys:[{modifiers:["Meta","Shift"],key:"Enter"}],editorCheckCallback:(e,t,i)=>i instanceof Xa.MarkdownView?Ja(e,i,n):!1}),n.addCommand({id:"set-date-display-format",name:"Set date display format",checkCallback:e=>Ka(e,n)})}var tl=require("obsidian");function rl(n){if(!tl.Platform.isMobile)return;let e=`${n.manifest.dir}/logs.txt`,t=[],i=o=>(...l)=>{t.push(`
[${o}]`);for(let c of l)t.push(String(c));n.app.vault.adapter.write(e,t.join(" "))};console.debug=i("debug"),console.error=i("error"),console.info=i("info"),console.log=i("log"),console.warn=i("warn")}var dt="reminder-list";var di=require("obsidian");function ge(){}function Wm(n,e){for(let t in e)n[t]=e[t];return n}function bs(n){return n()}function Xn(){return Object.create(null)}function Se(n){n.forEach(bs)}function Ct(n){return typeof n=="function"}function Qe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function nl(n){return Object.keys(n).length===0}function il(n,e,t,i){if(n){let o=sl(n,e,t,i);return n[0](o)}}function sl(n,e,t,i){return n[1]&&i?Wm(t.ctx.slice(),n[1](i(e))):t.ctx}function ol(n,e,t,i){if(n[2]&&i){let o=n[2](i(t));if(e.dirty===void 0)return o;if(typeof o=="object"){let l=[],c=Math.max(e.dirty.length,o.length);for(let d=0;d<c;d+=1)l[d]=e.dirty[d]|o[d];return l}return e.dirty|o}return e.dirty}function al(n,e,t,i,o,l){if(o){let c=sl(e,t,i,l);n.p(c,o)}}function ll(n){if(n.ctx.length>32){let e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}var vs=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var ei=class n{constructor(e){g(this,"_listeners","WeakMap"in vs?new WeakMap:void 0);g(this,"_observer");g(this,"options");this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!=null?e:this._observer=new ResizeObserver(t=>{var i;for(let o of t)n.entries.set(o.target,o),(i=this._listeners.get(o.target))==null||i(o)})}};ei.entries="WeakMap"in vs?new WeakMap:void 0;var ul=!1;function dl(){ul=!0}function cl(){ul=!1}function M(n,e){n.appendChild(e)}function ie(n,e,t){n.insertBefore(e,t||null)}function ee(n){n.parentNode&&n.parentNode.removeChild(n)}function et(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function N(n){return document.createElement(n)}function Re(n){return document.createTextNode(n)}function de(){return Re(" ")}function ce(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function O(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function fl(n){return Array.from(n.childNodes)}function Be(n,e){e=""+e,n.data!==e&&(n.data=e)}function tn(n,e){n.value=e==null?"":e}function vr(n,e,t){for(let i=0;i<n.options.length;i+=1){let o=n.options[i];if(o.__value===e){o.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function ti(n){let e=n.querySelector(":checked");return e&&e.__value}function tt(n,e,t){n.classList.toggle(e,!!t)}function ri(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function ml(n){let e={};return n.childNodes.forEach(t=>{e[t.slot||"default"]=!0}),e}var It;function Ft(n){It=n}function ni(){if(!It)throw new Error("Function called outside component initialization");return It}function Jt(n){ni().$$.on_mount.push(n)}function ws(n){ni().$$.after_update.push(n)}function rn(){let n=ni();return(e,t,{cancelable:i=!1}={})=>{let o=n.$$.callbacks[e];if(o){let l=ri(e,t,{cancelable:i});return o.slice().forEach(c=>{c.call(n,l)}),!l.defaultPrevented}return!0}}var qt=[];var Pe=[],_r=[],xs=[],hl=Promise.resolve(),ks=!1;function Ds(){ks||(ks=!0,hl.then(ii))}function Ss(){return Ds(),hl}function Mt(n){_r.push(n)}function Ts(n){xs.push(n)}var _s=new Set,wr=0;function ii(){if(wr!==0)return;let n=It;do{try{for(;wr<qt.length;){let e=qt[wr];wr++,Ft(e),Jm(e.$$)}}catch(e){throw qt.length=0,wr=0,e}for(Ft(null),qt.length=0,wr=0;Pe.length;)Pe.pop()();for(let e=0;e<_r.length;e+=1){let t=_r[e];_s.has(t)||(_s.add(t),t())}_r.length=0}while(qt.length);for(;xs.length;)xs.pop()();ks=!1,_s.clear(),Ft(n)}function Jm(n){if(n.fragment!==null){n.update(),Se(n.before_update);let e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Mt)}}function pl(n){let e=[],t=[];_r.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),_r=e}var si=new Set,Kt;function xr(){Kt={r:0,c:[],p:Kt}}function kr(){Kt.r||Se(Kt.c),Kt=Kt.p}function ae(n,e){n&&n.i&&(si.delete(n),n.i(e))}function ye(n,e,t,i){if(n&&n.o){if(si.has(n))return;si.add(n),Kt.c.push(()=>{si.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function xe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}var qm=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Km=new Set([...qm]);function Ms(n,e,t){let i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function He(n){n&&n.c()}function Ae(n,e,t){let{fragment:i,after_update:o}=n.$$;i&&i.m(e,t),Mt(()=>{let l=n.$$.on_mount.map(bs).filter(Ct);n.$$.on_destroy?n.$$.on_destroy.push(...l):Se(l),n.$$.on_mount=[]}),o.forEach(Mt)}function We(n,e){let t=n.$$;t.fragment!==null&&(pl(t.after_update),Se(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function eh(n,e){n.$$.dirty[0]===-1&&(qt.push(n),Ds(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Le(n,e,t,i,o,l,c=null,d=[-1]){let m=It;Ft(n);let h=n.$$={fragment:null,ctx:[],props:l,update:ge,not_equal:o,bound:Xn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(m?m.$$.context:[])),callbacks:Xn(),dirty:d,skip_bound:!1,root:e.target||m.$$.root};c&&c(h.root);let y=!1;if(h.ctx=t?t(n,e.props||{},(_,w,...x)=>{let b=x.length?x[0]:w;return h.ctx&&o(h.ctx[_],h.ctx[_]=b)&&(!h.skip_bound&&h.bound[_]&&h.bound[_](b),y&&eh(n,_)),w}):[],h.update(),y=!0,Se(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){dl();let _=fl(e.target);h.fragment&&h.fragment.l(_),_.forEach(ee)}else h.fragment&&h.fragment.c();e.intro&&ae(n.$$.fragment),Ae(n,e.target,e.anchor),cl(),ii()}Ft(m)}var th;typeof HTMLElement=="function"&&(th=class extends HTMLElement{constructor(e,t,i){super();g(this,"$$ctor");g(this,"$$s");g(this,"$$c");g(this,"$$cn",!1);g(this,"$$d",{});g(this,"$$r",!1);g(this,"$$p_d",{});g(this,"$$l",{});g(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=t,i&&this.attachShadow({mode:"open"})}addEventListener(e,t,i){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let o=this.$$c.$on(e,t);this.$$l_u.set(t,o)}super.addEventListener(e,t,i)}removeEventListener(e,t,i){if(super.removeEventListener(e,t,i),this.$$c){let o=this.$$l_u.get(t);o&&(o(),this.$$l_u.delete(t))}if(this.$$l[e]){let o=this.$$l[e].indexOf(t);o>=0&&this.$$l[e].splice(o,1)}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(l){return()=>{let c;return{c:function(){c=N("slot"),l!=="default"&&O(c,"name",l)},m:function(h,y){ie(h,c,y)},d:function(h){h&&ee(c)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let t={},i=ml(this);for(let l of this.$$s)l in i&&(t[l]=[e(l)]);for(let l of this.attributes){let c=this.$$g_p(l.name);c in this.$$d||(this.$$d[c]=Fs(c,l.value,this.$$p_d,"toProp"))}for(let l in this.$$p_d)!(l in this.$$d)&&this[l]!==void 0&&(this.$$d[l]=this[l],delete this[l]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let o=()=>{this.$$r=!0;for(let l in this.$$p_d)if(this.$$d[l]=this.$$c.$$.ctx[this.$$c.$$.props[l]],this.$$p_d[l].reflect){let c=Fs(l,this.$$d[l],this.$$p_d,"toAttribute");c==null?this.removeAttribute(this.$$p_d[l].attribute||l):this.setAttribute(this.$$p_d[l].attribute||l,c)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(let l in this.$$l)for(let c of this.$$l[l]){let d=this.$$c.$on(l,c);this.$$l_u.set(c,d)}this.$$l={}}}attributeChangedCallback(e,t,i){var o;this.$$r||(e=this.$$g_p(e),this.$$d[e]=Fs(e,i,this.$$p_d,"toProp"),(o=this.$$c)==null||o.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function Fs(n,e,t,i){var l;let o=(l=t[n])==null?void 0:l.type;if(e=o==="Boolean"&&typeof e!="boolean"?e!=null:e,!i||!t[n])return e;if(i==="toAttribute")switch(o){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(o){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var Te=class{constructor(){g(this,"$$");g(this,"$$set")}$destroy(){We(this,1),this.$destroy=ge}$on(e,t){if(!Ct(t))return ge;let i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{let o=i.indexOf(t);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!nl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var yl="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yl);var gl=require("obsidian");function rh(n){let e,t;return{c(){e=N("span"),t=N("span"),O(t,"class","reminder-markdown")},m(i,o){ie(i,e,o),M(e,t),n[3](t)},p:ge,i:ge,o:ge,d(i){i&&ee(e),n[3](null)}}}function nh(n,e,t){let{sourcePath:i}=e,{markdown:o}=e,l;ws(()=>{l.empty(),gl.MarkdownRenderer.renderMarkdown(o,l,i,window.app.plugins.plugins["obsidian-reminder-plugin"]),l.childNodes.forEach(d=>{d instanceof HTMLElement&&(d.style.display="inline")})});function c(d){Pe[d?"unshift":"push"](()=>{l=d,t(0,l)})}return n.$$set=d=>{"sourcePath"in d&&t(1,i=d.sourcePath),"markdown"in d&&t(2,o=d.markdown)},[l,i,o,c]}var Rs=class extends Te{constructor(e){super(),Le(this,e,nh,rh,Qe,{sourcePath:1,markdown:2})}},oi=Rs;function bl(n,e,t){let i=n.slice();return i[6]=e[t],i}function ih(n){let e,t,i=xe(n[0]),o=[];for(let c=0;c<i.length;c+=1)o[c]=vl(bl(n,i,c));let l=c=>ye(o[c],1,1,()=>{o[c]=null});return{c(){e=N("div");for(let c=0;c<o.length;c+=1)o[c].c()},m(c,d){ie(c,e,d);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(e,null);t=!0},p(c,d){if(d&15){i=xe(c[0]);let m;for(m=0;m<i.length;m+=1){let h=bl(c,i,m);o[m]?(o[m].p(h,d),ae(o[m],1)):(o[m]=vl(h),o[m].c(),ae(o[m],1),o[m].m(e,null))}for(xr(),m=i.length;m<o.length;m+=1)l(m);kr()}},i(c){if(!t){for(let d=0;d<i.length;d+=1)ae(o[d]);t=!0}},o(c){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)ye(o[d]);t=!1},d(c){c&&ee(e),et(o,c)}}}function sh(n){let e;return{c(){e=N("div"),e.textContent="No reminders",O(e,"class","reminder-list-item no-reminders svelte-15dajvg")},m(t,i){ie(t,e,i)},p:ge,i:ge,o:ge,d(t){t&&ee(e)}}}function vl(n){let e,t,i=n[2](n[6].time)+"",o,l,c,d,m,h,y,_=n[6].getFileName()+"",w,x,b,D,F,T;m=new oi({props:{markdown:n[6].title,sourcePath:n[6].file}});function C(...L){return n[4](n[6],...L)}function A(){return n[5](n[6])}return{c(){e=N("button"),t=N("span"),o=Re(i),l=de(),c=N("div"),d=N("span"),He(m.$$.fragment),h=de(),y=N("span"),w=Re(_),x=de(),O(t,"class","reminder-time svelte-15dajvg"),O(d,"class","reminder-title svelte-15dajvg"),O(y,"class","reminder-file svelte-15dajvg"),O(c,"class","reminder-title-container svelte-15dajvg"),O(e,"class","reminder-list-item hover-highlight svelte-15dajvg"),O(e,"aria-label",b=`[${n[6].time.toString()}] ${n[6].title} - ${n[6].getFileName()}`),O(e,"draggable","true")},m(L,V){ie(L,e,V),M(e,t),M(t,o),M(e,l),M(e,c),M(c,d),Ae(m,d,null),M(c,h),M(c,y),M(y,w),M(e,x),D=!0,F||(T=[ce(e,"dragstart",C),ce(e,"click",A)],F=!0)},p(L,V){n=L,(!D||V&5)&&i!==(i=n[2](n[6].time)+"")&&Be(o,i);let P={};V&1&&(P.markdown=n[6].title),V&1&&(P.sourcePath=n[6].file),m.$set(P),(!D||V&1)&&_!==(_=n[6].getFileName()+"")&&Be(w,_),(!D||V&1&&b!==(b=`[${n[6].time.toString()}] ${n[6].title} - ${n[6].getFileName()}`))&&O(e,"aria-label",b)},i(L){D||(ae(m.$$.fragment,L),D=!0)},o(L){ye(m.$$.fragment,L),D=!1},d(L){L&&ee(e),We(m),F=!1,Se(T)}}}function oh(n){let e,t,i,o,l=[sh,ih],c=[];function d(m,h){return m[0].length===0?0:1}return t=d(n,-1),i=c[t]=l[t](n),{c(){e=N("div"),i.c(),O(e,"class","reminder-group svelte-15dajvg")},m(m,h){ie(m,e,h),c[t].m(e,null),o=!0},p(m,[h]){let y=t;t=d(m,h),t===y?c[t].p(m,h):(xr(),ye(c[y],1,1,()=>{c[y]=null}),kr(),i=c[t],i?i.p(m,h):(i=c[t]=l[t](m),i.c()),ae(i,1),i.m(e,null))},i(m){o||(ae(i),o=!0)},o(m){ye(i),o=!1},d(m){m&&ee(e),c[t].d()}}}function ah(n,e,t){let{reminders:i}=e,{onOpenReminder:o=()=>{}}=e,{timeToString:l=h=>h.format("HH:MM")}=e,{generateLink:c=()=>""}=e,d=(h,y)=>{var _;(_=y.dataTransfer)==null||_.setData("text/plain",c(h))},m=h=>{o(h)};return n.$$set=h=>{"reminders"in h&&t(0,i=h.reminders),"onOpenReminder"in h&&t(1,o=h.onOpenReminder),"timeToString"in h&&t(2,l=h.timeToString),"generateLink"in h&&t(3,c=h.generateLink)},[i,o,l,c,d,m]}var Es=class extends Te{constructor(e){super(),Le(this,e,ah,oh,Qe,{reminders:0,onOpenReminder:1,timeToString:2,generateLink:3})}},ai=Es;function wl(n,e,t){let i=n.slice();return i[4]=e[t],i}function _l(n){let e,t=n[4].name+"",i,o,l,c;function d(...m){return n[3](n[4],...m)}return l=new ai({props:{reminders:n[4].reminders,onOpenReminder:n[1],timeToString:d,generateLink:n[2]}}),{c(){e=N("div"),i=Re(t),o=de(),He(l.$$.fragment),O(e,"class","group-name svelte-2zqui4"),tt(e,"group-name-overdue",n[4].isOverdue)},m(m,h){ie(m,e,h),M(e,i),ie(m,o,h),Ae(l,m,h),c=!0},p(m,h){n=m,(!c||h&1)&&t!==(t=n[4].name+"")&&Be(i,t),(!c||h&1)&&tt(e,"group-name-overdue",n[4].isOverdue);let y={};h&1&&(y.reminders=n[4].reminders),h&2&&(y.onOpenReminder=n[1]),h&1&&(y.timeToString=d),h&4&&(y.generateLink=n[2]),l.$set(y)},i(m){c||(ae(l.$$.fragment,m),c=!0)},o(m){ye(l.$$.fragment,m),c=!1},d(m){m&&(ee(e),ee(o)),We(l,m)}}}function lh(n){let e,t,i,o=xe(n[0]),l=[];for(let d=0;d<o.length;d+=1)l[d]=_l(wl(n,o,d));let c=d=>ye(l[d],1,1,()=>{l[d]=null});return{c(){e=N("main"),t=N("div");for(let d=0;d<l.length;d+=1)l[d].c()},m(d,m){ie(d,e,m),M(e,t);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);i=!0},p(d,[m]){if(m&7){o=xe(d[0]);let h;for(h=0;h<o.length;h+=1){let y=wl(d,o,h);l[h]?(l[h].p(y,m),ae(l[h],1)):(l[h]=_l(y),l[h].c(),ae(l[h],1),l[h].m(t,null))}for(xr(),h=o.length;h<l.length;h+=1)c(h);kr()}},i(d){if(!i){for(let m=0;m<o.length;m+=1)ae(l[m]);i=!0}},o(d){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)ye(l[m]);i=!1},d(d){d&&ee(e),et(l,d)}}}function uh(n,e,t){let{groups:i}=e,{onOpenReminder:o}=e,{generateLink:l}=e,c=(d,m)=>d.timeToString(m);return n.$$set=d=>{"groups"in d&&t(0,i=d.groups),"onOpenReminder"in d&&t(1,o=d.onOpenReminder),"generateLink"in d&&t(2,l=d.generateLink)},[i,o,l,c]}var Us=class extends Te{constructor(e){super(),Le(this,e,uh,lh,Qe,{groups:0,onOpenReminder:1,generateLink:2})}},xl=Us;var li=class extends di.ItemView{constructor(t,i,o){super(i);this.plugin=t;this.onOpenReminder=o;g(this,"view")}getViewType(){return dt}getDisplayText(){return"Reminders"}getIcon(){return"clock"}async onOpen(){this.view=new xl({target:this.contentEl,props:{groups:this.remindersForView(),onOpenReminder:this.onOpenReminder,generateLink:t=>{let i=this.app.vault.getAbstractFileByPath(t.file),o=this.app.workspace.getActiveFile(),l;return!(i instanceof di.TFile)||o==null?l=`[[${t.getFileName()}]]`:l=this.app.fileManager.generateMarkdownLink(i,o.path),`${t.title} - ${l}`}}})}reload(){this.view!=null&&this.view.$set({groups:this.remindersForView(),onOpenReminder:this.onOpenReminder})}remindersForView(){return ra(this.plugin.reminders.reminders,this.plugin.settings.reminderTime.value,{yearMonthFormat:this.plugin.settings.yearMonthDisplayFormat.value,monthDayFormat:this.plugin.settings.monthDayDisplayFormat.value,shortDateWithWeekdayFormat:this.plugin.settings.shortDateWithWeekdayDisplayFormat.value,timeFormat:this.plugin.settings.timeDisplayFormat.value})}onClose(){return this.view&&this.view.$destroy(),Promise.resolve()}},ui=class{constructor(e,t){this.plugin=e;this.onOpenReminder=t;g(this,"valid",!1);[this.plugin.settings.yearMonthDisplayFormat,this.plugin.settings.monthDayDisplayFormat,this.plugin.settings.shortDateWithWeekdayDisplayFormat,this.plugin.settings.timeDisplayFormat].forEach(o=>{o.rawValue.onChanged(()=>{this.invalidate(),this.reload(!0)})})}createView(e){return new li(this.plugin,e,this.onOpenReminder)}openView(){var e;this.plugin.app.workspace.getLeavesOfType(dt).length||(e=this.plugin.app.workspace.getRightLeaf(!1))==null||e.setViewState({type:dt})}reload(e=!1){if(e||!this.valid){let t=this.getViews();t.length>0?(t.forEach(i=>i==null?void 0:i.reload()),this.valid=!0):(this.valid=!1,console.debug("view is null.  Skipping reminder list view reload"))}}getViews(){return this.plugin.app.workspace.getLeavesOfType(dt).map(e=>e&&e.view instanceof li?e.view:null).filter(e=>e!=null)}invalidate(){this.valid=!1}};var Cl=require("obsidian");var _i=require("obsidian");var Ql=_t(ot());var vi=_t(ot());var Ps=_t(ot(),1);var kl=require("obsidian");var Ys=class{constructor(){g(this,"settingContexts",[])}register(e){this.settingContexts.push(e)}findByKey(e){return this.settingContexts.find(t=>t.key===e)}forEach(e){this.settingContexts.forEach(e)}},Ns=class{constructor(e){this._settingRegistry=e;g(this,"validationEl");g(this,"infoEl");g(this,"_setting");g(this,"key");g(this,"name");g(this,"desc");g(this,"tags",[]);g(this,"settingModel");g(this,"anyValueChanged")}init(e,t,i){this.settingModel=e,this._setting=t,this.validationEl=i.createDiv("validation",o=>{o.style.color="var(--text-error)",o.style.marginBottom="1rem",o.style.fontSize="14px",o.style.display="none"}),this.infoEl=i.createDiv("info",o=>{o.style.color="var(--text-faint)",o.style.marginBottom="1rem",o.style.fontSize="14px",o.style.display="none"})}setValidationError(e){this.setText(this.validationEl,e)}setInfo(e){this.setText(this.infoEl,e)}setText(e,t){if(!e){console.error("element not created");return}t===null?e.style.display="none":(e.style.display="block",e.innerHTML=t)}get setting(){return this._setting}get registry(){return this._settingRegistry}hasTag(e){return this.tags.filter(t=>t===e).length>0}update(){this.anyValueChanged&&this.anyValueChanged(this)}setEnabled(e){this.setting.setDisabled(!e)}findContextByKey(e){return this._settingRegistry.findByKey(e)}booleanValue(){return this.settingModel.value}isInitialized(){return this.settingModel&&this.validationEl&&this.setting}},Os=class{constructor(e){this.registry=e;g(this,"context");this.context=new Ns(this.registry),this.registry.register(this.context)}key(e){return this.context.key=e,this}name(e){return this.context.name=e,this}desc(e){return this.context.desc=e,this}tag(e){return this.context.tags.push(e),this}enableWhen(e){return this.context.anyValueChanged=e,this}text(e){return new ci(this.context,!1,e)}textArea(e){return new ci(this.context,!0,e)}number(e){return new Qs(this.context,e)}toggle(e){return new Ls(this.context,e)}dropdown(e){return new Is(this.context,e)}},Dr=class{constructor(e,t){this.context=e;this.initValue=t}onAnyValueChanged(e){return this.context.anyValueChanged=e,this}onValueChange(){this.context.registry.forEach(e=>{e.update()})}buildSettingModel(e,t){return new nn(this.context,e,this.initValue,t)}},ci=class extends Dr{constructor(t,i,o){super(t,o);this.longText=i;g(this,"_placeHolder")}placeHolder(t){return this._placeHolder=t,this}build(t){return this.buildSettingModel(t,({setting:i,rawValue:o,context:l})=>{let c=d=>{var m;d.setPlaceholder((m=this._placeHolder)!=null?m:"").setValue(o.value).onChange(async h=>{try{t.unmarshal(h),o.value=h,l.setValidationError(null),this.onValueChange()}catch(y){y instanceof Error?l.setValidationError(y.message):typeof y=="string"&&l.setValidationError(y)}})};this.longText?i.addTextArea(d=>{c(d)}):i.addText(d=>{c(d)})})}},Qs=class extends Dr{constructor(t,i){super(t,i);g(this,"_placeHolder")}placeHolder(t){return this._placeHolder=t,this}build(t){return this.buildSettingModel(t,({setting:i,rawValue:o,context:l})=>{let c=d=>{var m;d.setPlaceholder((m=this._placeHolder)!=null?m:"").setValue(o.value.toString()).onChange(async h=>{try{let y=parseInt(h);o.value=y,l.setValidationError(null),this.onValueChange()}catch(y){y instanceof Error?l.setValidationError(y.message):typeof y=="string"&&l.setValidationError(y)}})};i.addText(d=>{c(d)})})}},Ls=class extends Dr{build(e){return new nn(this.context,e,this.initValue,({setting:t,rawValue:i})=>{t.addToggle(o=>o.setValue(i.value).onChange(async l=>{i.value=l,this.onValueChange()}))})}},Cs=class{constructor(e,t){this.label=e;this.value=t}},Is=class extends Dr{constructor(){super(...arguments);g(this,"options",[])}addOption(t,i){return this.options.push(new Cs(t,i)),this}build(t){return new nn(this.context,t,this.initValue,({setting:i,rawValue:o})=>{i.addDropdown(l=>{this.options.forEach(c=>{l.addOption(c.value,c.label)}),l.setValue(o.value),l.onChange(async c=>{o.value=c,this.onValueChange()})})})}},nn=class{constructor(e,t,i,o){this.context=e;this.serde=t;this.settingInitializer=o;g(this,"rawValue");if(this.rawValue=new Vt(i),e.key==null)throw new Error("key is required.")}createSetting(e){var i,o;let t=new kl.Setting(e).setName((i=this.context.name)!=null?i:"").setDesc((o=this.context.desc)!=null?o:"");return this.context.init(this,t,e),this.settingInitializer({setting:t,rawValue:this.rawValue,context:this.context}),t}get value(){return this.serde.unmarshal(this.rawValue.value)}get key(){return this.context.key}load(e){if(e===void 0)return;let t=e[this.key];t!==void 0&&(this.rawValue.value=t)}store(e){e[this.key]=this.rawValue.value}hasTag(e){return this.context.hasTag(e)}},Bs=class{constructor(e){this.name=e;g(this,"settings",[])}addSettings(...e){this.settings.push(...e)}},fi=class{constructor(){g(this,"groups",[]);g(this,"registry",new Ys)}newSettingBuilder(){return new Os(this.registry)}newGroup(e){let t=new Bs(e);return this.groups.push(t),t}displayOn(e){e.empty(),this.groups.forEach(t=>{e.createEl("h3",{text:t.name}),t.settings.forEach(i=>{i.createSetting(e)})}),this.registry.forEach(t=>t.update())}forEach(e){this.groups.forEach(t=>{t.settings.forEach(i=>{e(i)})})}},mi=class{unmarshal(e){return Rn.parse(e)}marshal(e){return e.toString()}},be=class{unmarshal(e){return e}marshal(e){return e}},hi=class{unmarshal(e){return Xo(e)}marshal(e){return e.map(t=>t.label).join(`
`)}},pi=class{unmarshal(e){return en.find(i=>i.name===e)}marshal(e){return e.name}};var ct="re-scan",Sr=class{constructor(){g(this,"settings",new fi);g(this,"reminderTime");g(this,"reminderTimeStep");g(this,"useSystemNotification");g(this,"laters");g(this,"weekStart");g(this,"dateFormat");g(this,"dateTimeFormat");g(this,"strictDateFormat");g(this,"autoCompleteTrigger");g(this,"primaryFormat");g(this,"useCustomEmojiForTasksPlugin");g(this,"removeTagsForTasksPlugin");g(this,"linkDatesToDailyNotes");g(this,"yearMonthDisplayFormat");g(this,"monthDayDisplayFormat");g(this,"timeDisplayFormat");g(this,"shortDateWithWeekdayDisplayFormat");g(this,"editDetectionSec");g(this,"reminderCheckIntervalSec");g(this,"autoEmbedTodosInDailyNote");g(this,"dailyNoteSectionMarker");let e=new As(this.settings);this.reminderTime=this.settings.newSettingBuilder().key("reminderTime").name("Reminder Time").desc("Time when a reminder with no time part will show").tag(ct).text("09:00").placeHolder("Time (hh:mm)").build(new mi),this.reminderTimeStep=this.settings.newSettingBuilder().key("reminderTimeStep").name("Reminder Time Step (minutes)").desc("Step of time for reminder time (minutes)").number(15).build(new be),this.useSystemNotification=this.settings.newSettingBuilder().key("useSystemNotification").name("Use system notification").desc("Use system notification for reminder notifications").toggle(!1).build(new be),this.laters=this.settings.newSettingBuilder().key("laters").name("Remind me later").desc("Line-separated list of remind me later items").textArea(`In 30 minutes
In 1 hour
In 3 hours
Tomorrow
Next week`).placeHolder(`In 30 minutes
In 1 hour
In 3 hours
Tomorrow
Next week`).build(new hi);let t=this.settings.newSettingBuilder().key("weekStart").name("Week start").desc("Select the first day of the week").dropdown("0");Array.from({length:7},(l,c)=>{let d=(0,Ps.default)().weekday(c).format("dddd");t.addOption(d,c.toString())}),this.weekStart=t.onAnyValueChanged(()=>{Ps.default.updateLocale("en",{week:{dow:Number(this.weekStart.value)}})}).build(new be),this.dateFormat=this.settings.newSettingBuilder().key("dateFormat").name("Date format").desc("moment style date format: https://momentjs.com/docs/#/displaying/format/").tag(ct).text("YYYY-MM-DD").placeHolder("YYYY-MM-DD").onAnyValueChanged(l=>{l.setEnabled(e.enableReminderPluginReminderFormat.value)}).build(new be),this.strictDateFormat=this.settings.newSettingBuilder().key("strictDateFormat").name("Strict Date format").desc("Strictly parse the date and time").tag(ct).toggle(!1).build(new be),this.dateTimeFormat=this.settings.newSettingBuilder().key("dateTimeFormat").name("Date and time format").desc("moment() style date time format: https://momentjs.com/docs/#/displaying/format/").tag(ct).text("YYYY-MM-DD HH:mm").placeHolder("YYYY-MM-DD HH:mm").onAnyValueChanged(l=>{l.setEnabled(e.enableReminderPluginReminderFormat.value)}).build(new be),this.linkDatesToDailyNotes=this.settings.newSettingBuilder().key("linkDatesToDailyNotes").name("Link dates to daily notes").desc("When toggled, Dates link to daily notes.").tag(ct).toggle(!1).onAnyValueChanged(l=>{l.setEnabled(e.enableReminderPluginReminderFormat.value)}).build(new be),this.autoCompleteTrigger=this.settings.newSettingBuilder().key("autoCompleteTrigger").name("Calendar popup trigger").desc("Trigger text to show calendar popup").text("(@").placeHolder("(@").onAnyValueChanged(l=>{let c=this.autoCompleteTrigger.value;l.setInfo(`Popup is ${c.length===0?"disabled":"enabled"}`)}).build(new be);let i=this.settings.newSettingBuilder().key("primaryReminderFormat").name("Primary reminder format").desc("Reminder format for generated reminder by calendar popup").dropdown(en[0].name);en.forEach(l=>i.addOption(`${l.description} - ${l.example}`,l.name)),this.primaryFormat=i.build(new pi),this.useCustomEmojiForTasksPlugin=this.settings.newSettingBuilder().key("useCustomEmojiForTasksPlugin").name("Distinguish between reminder date and due date").desc("Use custom emoji \u23F0 instead of \u{1F4C5} and distinguish between reminder date/time and Tasks Plugin's due date.").tag(ct).toggle(!1).onAnyValueChanged(l=>{l.setEnabled(e.enableTasksPluginReminderFormat.value)}).build(new be),this.removeTagsForTasksPlugin=this.settings.newSettingBuilder().key("removeTagsForTasksPlugin").name("Remove tags from reminder title").desc("If checked, tags(#xxx) are removed from the reminder list view and notification.").tag(ct).toggle(!1).onAnyValueChanged(l=>{l.setEnabled(e.enableTasksPluginReminderFormat.value)}).build(new be),this.yearMonthDisplayFormat=this.settings.newSettingBuilder().key("yearMonthDisplayFormat").name("Year & Month Format").desc(`Moment style year and month format:
https://momentjs.com/docs/#/displaying/format/`).text("YYYY, MMMM").placeHolder("YYYY, MMMM").build(new be),this.monthDayDisplayFormat=this.settings.newSettingBuilder().key("monthDayDisplayFormat").name("Month & Day Format").desc(`Moment style month and day format:
https://momentjs.com/docs/#/displaying/format/`).text("MM/DD").placeHolder("MM/DD").build(new be),this.shortDateWithWeekdayDisplayFormat=this.settings.newSettingBuilder().key("shortDateWithWeekdayDisplayFormat").name("Short Date with Weekday Format").desc(`Moment style short date with weekday format:
https://momentjs.com/docs/#/displaying/format/`).text("M/DD (ddd)").placeHolder("M/DD (ddd)").build(new be),this.timeDisplayFormat=this.settings.newSettingBuilder().key("timeDisplayFormat").name("Time Format").desc(`Moment style time format:
https://momentjs.com/docs/#/displaying/format/`).text("HH:mm").placeHolder("HH:mm").build(new be),this.editDetectionSec=this.settings.newSettingBuilder().key("editDetectionSec").name("Edit Detection Time").desc("The minimum amount of time (in seconds) after a key is typed that it will be identified as notifiable.").number(10).build(new be),this.reminderCheckIntervalSec=this.settings.newSettingBuilder().key("reminderCheckIntervalSec").name("Reminder check interval").desc("Interval(in seconds) to periodically check whether or not you should be notified of reminders.  You will need to restart Obsidian for this setting to take effect.").number(5).build(new be),this.autoEmbedTodosInDailyNote=this.settings.newSettingBuilder().key("autoEmbedTodosInDailyNote").name("Auto embed todos in daily note").desc("Automatically embed todos of today into today's daily note.").toggle(!1).build(new be),this.dailyNoteSectionMarker=this.settings.newSettingBuilder().key("dailyNoteSectionMarker").name("Daily note section marker").desc("Marker for the section in the daily note where todos will be embedded.").text("reminder").placeHolder("reminder").build(new be),this.settings.newGroup("Notification Settings").addSettings(this.reminderTime,this.reminderTimeStep,this.laters,this.useSystemNotification),this.settings.newGroup("Editor").addSettings(this.autoCompleteTrigger,this.primaryFormat),this.settings.newGroup("Reminder Format - Reminder Plugin").addSettings(e.enableReminderPluginReminderFormat,this.dateFormat,this.dateTimeFormat,this.strictDateFormat,this.linkDatesToDailyNotes),this.settings.newGroup("Reminder Format - Tasks Plugin").addSettings(e.enableTasksPluginReminderFormat,this.useCustomEmojiForTasksPlugin,this.removeTagsForTasksPlugin),this.settings.newGroup("Reminder Format - Kanban Plugin").addSettings(e.enableKanbanPluginReminderFormat),this.settings.newGroup("Date/Time Display Format").addSettings(this.yearMonthDisplayFormat,this.monthDayDisplayFormat,this.shortDateWithWeekdayDisplayFormat,this.timeDisplayFormat),this.settings.newGroup("Advanced").addSettings(this.editDetectionSec,this.reminderCheckIntervalSec,this.weekStart,this.autoEmbedTodosInDailyNote,this.dailyNoteSectionMarker);let o=new Ar;o.setParameterFunc(Ie.now,()=>W.now()),o.setParameter(Ie.useCustomEmojiForTasksPlugin,this.useCustomEmojiForTasksPlugin),o.setParameter(Ie.linkDatesToDailyNotes,this.linkDatesToDailyNotes),o.setParameter(Ie.removeTagsForTasksPlugin,this.removeTagsForTasksPlugin),ja(o)}forEach(e){this.settings.forEach(e)}},As=class{constructor(e){this.settings=e;g(this,"settingKeyToFormatName",new Map);g(this,"reminderFormatSettings",[]);g(this,"enableReminderPluginReminderFormat");g(this,"enableTasksPluginReminderFormat");g(this,"enableKanbanPluginReminderFormat");this.enableReminderPluginReminderFormat=this.createUseReminderFormatSetting(ps),this.enableTasksPluginReminderFormat=this.createUseReminderFormatSetting(ys),this.enableKanbanPluginReminderFormat=this.createUseReminderFormatSetting(gs)}createUseReminderFormatSetting(e){let t=`enable${e.name}`,i=this.settings.newSettingBuilder().key(t).name(`Enable ${e.description}`).desc(`Enable ${e.description}`).tag(ct).toggle(e.defaultEnabled).onAnyValueChanged(o=>{var l;o.setInfo(`Example: ${(l=e.format.appendReminder("- [ ] Task 1",W.now()))==null?void 0:l.insertedLine}`)}).build(new be);return this.settingKeyToFormatName.set(t,e),this.reminderFormatSettings.push(i),i.rawValue.onChanged(()=>{this.updateReminderFormat()}),i}updateReminderFormat(){let e=this.reminderFormatSettings.filter(t=>t.value).map(t=>this.settingKeyToFormatName.get(t.key)).filter(t=>t!==void 0);Va(e)}};var yi=_t(ot(),1);var Ws=class{constructor(e){this.date=e}isToday(e){return this.date===void 0?!1:this.date.date()===e.date()&&this.date.month()===e.month()&&this.date.year()===e.year()}isHoliday(){let e=yi.default.localeData().firstDayOfWeek();return[(6-e+7)%7,(0-e+7)%7].includes(this.date.weekday())}},$s=class{constructor(e){this.weekStart=e;g(this,"days",[]);let t=e.clone();for(let i=0;i<7;i++)this.days.push(new Ws(t.clone())),t.add(1,"day")}},gi=class{constructor(e,t){this.monthStart=e;g(this,"weeks",[]);g(this,"weekStart");this.weekStart=t||0;let i=e.clone().add(-(e.weekday()-this.weekStart+7)%7,"day");for(let o=0;o<6&&!(o>0&&!this.isThisMonth(i));o++)this.weeks.push(new $s(i.clone())),i.add(1,"week")}isThisMonth(e){return this.monthStart.month()===e.month()&&this.monthStart.year()===e.year()}},bi=class n{constructor(e,t,i){g(this,"_current");g(this,"today");g(this,"weekStart");this.weekStart=i||0,e?this.today=e:this.today=(0,yi.default)(),t?this._current=new gi(t.clone().set("date",1),this.weekStart):this._current=new gi(this.today.clone().set("date",1),this.weekStart)}nextMonth(){return new n(this.today,this._current.monthStart.clone().add(1,"month"),this.weekStart)}previousMonth(){return new n(this.today,this._current.monthStart.clone().add(-1,"month"),this.weekStart)}calendarString(){let e=Array.from({length:7},(i,o)=>(0,yi.default)().weekday((this.weekStart+o)%7).format("ddd")).join(" "),t=`${this._current.monthStart.format("YYYY, MMM")}
${e}
`;return this._current.weeks.forEach(i=>{let o=" ";i.days.forEach(l=>{let c;l.date&&this._current.isThisMonth(l.date)?c=l.date.format("DD"):c="  ",o=o+c+"  "}),t=t+o+`
`}),t}get current(){return this._current}};var Tr=class{constructor(){g(this,"digits",[]);g(this,"lastInput",0)}handle(e){let t=new Date().getTime();return t-this.lastInput>1e3&&this.clear(),this.lastInput=t,this.digits.push(e),this.digits.join("")}clear(){this.digits=[]}};var dh=n=>({}),Dl=n=>({});function Sl(n,e,t){let i=n.slice();return i[25]=e[t],i}function Tl(n,e,t){let i=n.slice();return i[28]=e[t],i}function Fl(n,e,t){let i=n.slice();return i[28]=e[t],i}function Ml(n){let e,t=n[28]+"",i;return{c(){e=N("th"),i=Re(t),O(e,"class","svelte-kmxndl")},m(o,l){ie(o,e,l),M(e,i)},p(o,l){l[0]&16&&t!==(t=o[28]+"")&&Be(i,t)},d(o){o&&ee(e)}}}function Rl(n){let e,t,i=n[28].date.format("D")+"",o,l,c;function d(){return n[15](n[28])}function m(){return n[16](n[28])}return{c(){e=N("td"),t=N("button"),o=Re(i),O(t,"tabindex","-1"),O(t,"class","calendar-date svelte-kmxndl"),tt(t,"is-selected",n[28].isToday(n[0])),tt(t,"other-month",!n[1].current.isThisMonth(n[28].date)),tt(t,"is-holiday",n[28].isHoliday()),tt(t,"is-past",n[28].date.isBefore(n[1].today))},m(h,y){ie(h,e,y),M(e,t),M(t,o),l||(c=[ce(t,"click",d),ce(t,"dblclick",m)],l=!0)},p(h,y){n=h,y[0]&2&&i!==(i=n[28].date.format("D")+"")&&Be(o,i),y[0]&3&&tt(t,"is-selected",n[28].isToday(n[0])),y[0]&2&&tt(t,"other-month",!n[1].current.isThisMonth(n[28].date)),y[0]&2&&tt(t,"is-holiday",n[28].isHoliday()),y[0]&2&&tt(t,"is-past",n[28].date.isBefore(n[1].today))},d(h){h&&ee(e),l=!1,Se(c)}}}function El(n){let e,t,i=xe(n[25].days),o=[];for(let l=0;l<i.length;l+=1)o[l]=Rl(Tl(n,i,l));return{c(){e=N("tr");for(let l=0;l<o.length;l+=1)o[l].c();t=de()},m(l,c){ie(l,e,c);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);M(e,t)},p(l,c){if(c[0]&195){i=xe(l[25].days);let d;for(d=0;d<i.length;d+=1){let m=Tl(l,i,d);o[d]?o[d].p(m,c):(o[d]=Rl(m),o[d].c(),o[d].m(e,t))}for(;d<o.length;d+=1)o[d].d(1);o.length=i.length}},d(l){l&&ee(e),et(o,l)}}}function ch(n){let e,t,i,o,l,c=n[1].current.monthStart.format("MMM")+"",d,m,h,y=n[1].current.monthStart.format("YYYY")+"",_,w,x,b,D,F,T,C,A,L,V,P,ve,K,j=xe(n[4]),te=[];for(let I=0;I<j.length;I+=1)te[I]=Ml(Fl(n,j,I));let se=xe(n[1].current.weeks),U=[];for(let I=0;I<se.length;I+=1)U[I]=El(Sl(n,se,I));let re=n[12].footer,le=il(re,n,n[11],Dl);return{c(){e=N("div"),t=N("div"),i=N("button"),i.textContent="<",o=de(),l=N("span"),d=Re(c),m=de(),h=N("span"),_=Re(y),w=de(),x=N("button"),x.textContent=">",b=de(),D=N("table"),F=N("thead"),T=N("tr");for(let I=0;I<te.length;I+=1)te[I].c();C=de(),A=N("tbody");for(let I=0;I<U.length;I+=1)U[I].c();L=de(),V=N("div"),le&&le.c(),O(i,"tabindex","-1"),O(i,"class","month-nav svelte-kmxndl"),O(l,"class","month svelte-kmxndl"),O(h,"class","year svelte-kmxndl"),O(x,"tabindex","-1"),O(x,"class","month-nav svelte-kmxndl"),O(t,"class","year-month svelte-kmxndl"),O(V,"class","footer"),O(e,"class","reminder-calendar svelte-kmxndl"),O(e,"tabindex","0"),O(e,"role","grid")},m(I,Ge){ie(I,e,Ge),M(e,t),M(t,i),M(t,o),M(t,l),M(l,d),M(t,m),M(t,h),M(h,_),M(t,w),M(t,x),M(e,b),M(e,D),M(D,F),M(F,T);for(let H=0;H<te.length;H+=1)te[H]&&te[H].m(T,null);M(D,C),M(D,A);for(let H=0;H<U.length;H+=1)U[H]&&U[H].m(A,null);n[17](D),M(e,L),M(e,V),le&&le.m(V,null),n[18](V),P=!0,ve||(K=[ce(i,"click",n[13]),ce(x,"click",n[14]),ce(e,"focus",n[19]),ce(e,"blur",n[20]),ce(e,"keydown",n[10])],ve=!0)},p(I,Ge){if((!P||Ge[0]&2)&&c!==(c=I[1].current.monthStart.format("MMM")+"")&&Be(d,c),(!P||Ge[0]&2)&&y!==(y=I[1].current.monthStart.format("YYYY")+"")&&Be(_,y),Ge[0]&16){j=xe(I[4]);let H;for(H=0;H<j.length;H+=1){let Ee=Fl(I,j,H);te[H]?te[H].p(Ee,Ge):(te[H]=Ml(Ee),te[H].c(),te[H].m(T,null))}for(;H<te.length;H+=1)te[H].d(1);te.length=j.length}if(Ge[0]&195){se=xe(I[1].current.weeks);let H;for(H=0;H<se.length;H+=1){let Ee=Sl(I,se,H);U[H]?U[H].p(Ee,Ge):(U[H]=El(Ee),U[H].c(),U[H].m(A,null))}for(;H<U.length;H+=1)U[H].d(1);U.length=se.length}le&&le.p&&(!P||Ge[0]&2048)&&al(le,re,I,I[11],P?ol(re,I[11],Ge,dh):ll(I[11]),Dl)},i(I){P||(ae(le,I),P=!0)},o(I){ye(le,I),P=!1},d(I){I&&ee(e),et(te,I),et(U,I),n[17](null),le&&le.d(I),n[18](null),ve=!1,Se(K)}}}function fh(n,e,t){let i,o,{$$slots:l={},$$scope:c}=e,{value:d=(0,vi.default)()}=e,m=rn(),h=new Sr,y=Number(h.weekStart.value),_,w;function x(U){t(0,d=U)}function b(U){t(0,d=U),T()}function D(){t(0,d=d.add(-1,"month"))}function F(){t(0,d=d.add(1,"month"))}function T(){m("select",d)}let C=new Tr;function A(U){if(U.key>="0"&&U.key<="9"){U.preventDefault();let re=C.handle(U.key);switch(re.length){case 1:{let le=parseInt(re);le>0&&t(0,d=d.set("date",le));break}case 2:re.startsWith("0")&&(re=re.slice(1)),t(0,d=d.set("date",parseInt(re)));break;case 4:{let le=re.slice(0,2),I=re.slice(2,4);le.startsWith("0")&&(le=le.slice(1)),I.startsWith("0")&&(I=I.slice(1)),t(0,d=d.set("month",parseInt(le)-1)),t(0,d=d.set("date",parseInt(I)))}break}return}C.clear(),U.key==="ArrowLeft"||U.ctrlKey&&U.key==="B"?(t(0,d=d.add(-1,"day")),U.preventDefault()):U.key==="ArrowRight"||U.ctrlKey&&U.key==="F"?(t(0,d=d.add(1,"day")),U.preventDefault()):U.key==="ArrowUp"||U.ctrlKey&&U.key==="P"?t(0,d=d.add(-7,"day")):U.key==="ArrowDown"||U.ctrlKey&&U.key==="N"?(t(0,d=d.add(7,"day")),U.preventDefault()):U.key==="Enter"&&(T(),U.preventDefault())}Jt(()=>{t(3,w.style.width=_.clientWidth+"px",w)});let L=()=>D(),V=()=>F(),P=U=>x(U.date),ve=U=>b(U.date);function K(U){Pe[U?"unshift":"push"](()=>{_=U,t(2,_)})}function j(U){Pe[U?"unshift":"push"](()=>{w=U,t(3,w)})}let te=()=>{m("focus")},se=()=>{m("blur")};return n.$$set=U=>{"value"in U&&t(0,d=U.value),"$$scope"in U&&t(11,c=U.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(1,i=new bi((0,vi.default)().startOf("day"),d.startOf("day"),y)),n.$$.dirty[0]&2&&t(4,o=Array.from({length:7},(U,re)=>(0,vi.default)().weekday((i.weekStart+re)%7).format("ddd")))},[d,i,_,w,o,m,x,b,D,F,A,c,l,L,V,P,ve,K,j,te,se]}var Vs=class extends Te{constructor(e){super(),Le(this,e,fh,ch,Qe,{value:0},null,[-1,-1])}},Ul=Vs;function Yl(n,e,t){let i=n.slice();return i[11]=e[t],i}function Nl(n){let e,t=n[11]+"",i,o;return{c(){e=N("option"),i=Re(t),e.__value=o=n[11],tn(e,e.__value)},m(l,c){ie(l,e,c),M(e,i)},p:ge,d(l){l&&ee(e)}}}function mh(n){let e,t,i,o=xe(n[4]),l=[];for(let c=0;c<o.length;c+=1)l[c]=Nl(Yl(n,o,c));return{c(){e=N("select");for(let c=0;c<l.length;c+=1)l[c].c();O(e,"class","time-picker svelte-193wkl6"),n[0]===void 0&&Mt(()=>n[7].call(e))},m(c,d){ie(c,e,d);for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(e,null);vr(e,n[0],!0),t||(i=[ce(e,"change",n[7]),ce(e,"dblclick",n[1]),ce(e,"focus",n[2]),ce(e,"blur",n[3]),ce(e,"keydown",n[5])],t=!0)},p(c,[d]){if(d&16){o=xe(c[4]);let m;for(m=0;m<o.length;m+=1){let h=Yl(c,o,m);l[m]?l[m].p(h,d):(l[m]=Nl(h),l[m].c(),l[m].m(e,null))}for(;m<l.length;m+=1)l[m].d(1);l.length=o.length}d&17&&vr(e,c[0])},i:ge,o:ge,d(c){c&&ee(e),et(l,c),t=!1,Se(i)}}}function hh(n,e,t){let{value:i="00:00"}=e,{step:o=15}=e,l=rn();function c(){l("select",i)}function d(){l("focus")}function m(){l("blur")}function h(){let b=[];for(let D=0;D<60*24;D+=o){let F=Math.floor(D/60),T=D%60;b.push(`${F.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`)}return b}let y=h(),_=new Tr;function w(b){if(b.key>="0"&&b.key<="9"){b.preventDefault();let D=_.handle(b.key);switch(D.length){case 1:{let F=D.padStart(2,"0"),T=y.filter(C=>C.startsWith(F));T.length>1&&t(0,i=T[0])}break;case 2:{let F=D+":",T=y.filter(C=>C.startsWith(F));T.length>1&&t(0,i=T[0]);break}case 4:{let F=D.slice(0,2)+":"+D.slice(2,4);y.includes(F)&&t(0,i=F)}break}return}if(_.clear(),b.key==="Enter"){c(),b.preventDefault();return}}function x(){i=ti(this),t(0,i),t(4,y)}return n.$$set=b=>{"value"in b&&t(0,i=b.value),"step"in b&&t(6,o=b.step)},[i,c,d,m,y,w,o,x]}var js=class extends Te{constructor(e){super(),Le(this,e,hh,mh,Qe,{value:0,step:6})}},Ol=js;function ph(n){let e,t,i,o,l;return o=new ai({props:{reminders:n[1].byDate(new W(n[0],!1))}}),{c(){e=N("div"),t=N("hr"),i=de(),He(o.$$.fragment),O(t,"class","dtchooser-divider svelte-ps5dkj"),O(e,"slot","footer")},m(c,d){ie(c,e,d),M(e,t),M(e,i),Ae(o,e,null),l=!0},p(c,d){let m={};d&3&&(m.reminders=c[1].byDate(new W(c[0],!1))),o.$set(m)},i(c){l||(ae(o.$$.fragment,c),l=!0)},o(c){ye(o.$$.fragment,c),l=!1},d(c){c&&ee(e),We(o)}}}function yh(n){let e,t,i,o,l,c,d,m,h,y,_,w,x,b,D;function F(L){n[7](L)}let T={$$slots:{footer:[ph]},$$scope:{ctx:n}};n[0]!==void 0&&(T.value=n[0]),t=new Ul({props:T}),Pe.push(()=>Ms(t,"value",F)),t.$on("select",n[8]);function C(L){n[9](L)}let A={step:n[2]};return n[3]!==void 0&&(A.value=n[3]),h=new Ol({props:A}),Pe.push(()=>Ms(h,"value",C)),h.$on("select",n[10]),h.$on("focus",n[11]),{c(){e=N("div"),He(t.$$.fragment),o=de(),l=N("div"),c=N("div"),d=N("span"),d.textContent="Time:",m=de(),He(h.$$.fragment),_=de(),w=N("button"),w.textContent="OK",O(d,"class","svelte-ps5dkj"),O(c,"class","dtchooser-time-picker svelte-ps5dkj"),O(w,"class","mod-cta"),O(l,"class","dtchooser-wrapper svelte-ps5dkj"),O(e,"class","dtchooser svelte-ps5dkj")},m(L,V){ie(L,e,V),Ae(t,e,null),M(e,o),M(e,l),M(l,c),M(c,d),M(c,m),Ae(h,c,null),M(l,_),M(l,w),x=!0,b||(D=ce(w,"click",n[5]),b=!0)},p(L,[V]){let P={};V&4099&&(P.$$scope={dirty:V,ctx:L}),!i&&V&1&&(i=!0,P.value=L[0],Ts(()=>i=!1)),t.$set(P);let ve={};V&4&&(ve.step=L[2]),!y&&V&8&&(y=!0,ve.value=L[3],Ts(()=>y=!1)),h.$set(ve)},i(L){x||(ae(t.$$.fragment,L),ae(h.$$.fragment,L),x=!0)},o(L){ye(t.$$.fragment,L),ye(h.$$.fragment,L),x=!1},d(L){L&&ee(e),We(t),We(h),b=!1,D()}}}function gh(n,e,t){var D,F;let{date:i=(0,Ql.default)()}=e,{reminders:o}=e,{onSelect:l}=e,{timeStep:c=15}=e,d=(F=(D=o.reminderTime)==null?void 0:D.value.toString())!=null?F:"10:00",m=!1;function h(){let[T,C]=d.split(":"),A=i.clone();m?(A.set({hour:parseInt(T),minute:parseInt(C)}),l(new W(A,!0))):l(new W(A,!1))}function y(T){i=T,t(0,i)}let _=()=>h();function w(T){d=T,t(3,d)}let x=()=>{h()},b=()=>{t(4,m=!0)};return n.$$set=T=>{"date"in T&&t(0,i=T.date),"reminders"in T&&t(1,o=T.reminders),"onSelect"in T&&t(6,l=T.onSelect),"timeStep"in T&&t(2,c=T.timeStep)},[i,o,c,d,m,h,l,y,_,w,x,b]}var Hs=class extends Te{constructor(e){super(),Le(this,e,gh,yh,Qe,{date:0,reminders:1,onSelect:6,timeStep:2})}},wi=Hs;var Gs=class extends _i.Modal{constructor(t,i,o,l,c){super(t);this.reminders=i;this.onSelect=o;this.onCancel=l;this.timeStep=c;g(this,"selected")}onOpen(){let t;_i.Platform.isDesktop?(this.modalEl.style.minWidth="0px",this.modalEl.style.minHeight="0px",this.modalEl.style.width="auto",t=this.contentEl):t=this.containerEl,new wi({target:t,props:{onSelect:i=>{this.select(i)},reminders:this.reminders,timeStep:this.timeStep}})}select(t){this.selected=t,this.close()}onClose(){this.selected!=null?this.onSelect(this.selected):this.onCancel()}};function sn(n,e,t=15){return new Promise((i,o)=>{new Gs(n,e,i,o,t).open()})}var Ll=_t(ot(),1);var xi=class{constructor(e,t){this.editor=e;g(this,"view");g(this,"dateTimeChooser");g(this,"resultResolve");g(this,"resultReject");this.view=document.createElement("div"),this.view.addClass("date-time-chooser-popup"),this.view.style.position="fixed",this.dateTimeChooser=new wi({target:this.view,props:{onSelect:i=>{this.setResult(i),this.hide()},reminders:t}})}show(){this.setResult(null),this.hide(),this.dateTimeChooser.$set({date:(0,Ll.default)()});let e=this.editor.getCursor(),t=this.editor.charCoords(e),i=document.body,o=i.getBoundingClientRect();return this.view.style.top=`${t.top-o.top+this.editor.defaultTextHeight()}px`,this.view.style.left=`${t.left-o.left}px`,i.appendChild(this.view),new Promise((l,c)=>{this.resultResolve=l,this.resultReject=c})}cancel(){this.setResult(null),this.hide()}setResult(e){this.resultReject==null||this.resultResolve==null||(e===null?this.resultReject():this.resultResolve(e),this.resultReject=void 0,this.resultResolve=void 0)}hide(){this.view.parentNode&&this.view.parentNode.removeChild(this.view)}};var ki=class{constructor(e,t,i){this.trigger=e;this.timeStep=t;this.primaryFormat=i}isTrigger(e,t){let i=this.trigger.value;if(i.length===0)return!1;if(t.text.contains(i.charAt(i.length-1))){let o=e.getLine(t.from.line).substring(0,t.to.ch)+t.text;if(!o.match(/^\s*- \[.\]\s.*/))return!1;if(o.endsWith(i))return!0}return!1}show(e,t,i){let o;if(Cl.Platform.isDesktopApp)try{let l=t.cm;if(l==null){console.error("Cannot get codemirror editor.");return}o=new xi(l,i).show()}catch(l){console.error(l),o=sn(e,i,this.timeStep.value)}else o=sn(e,i,this.timeStep.value);o.then(l=>{this.insert(t,l,!0)}).catch(()=>{})}insert(e,t,i=!1){var m;let o=e.getCursor(),l=e.getLine(o.line),c={line:o.line,ch:l.length};i||(l=l.substring(0,o.ch-this.trigger.value.length));let d=this.primaryFormat.value.format;try{let h=(m=d.appendReminder(l,t))==null?void 0:m.insertedLine;if(h==null){console.error("Cannot append reminder time to the line: line=%s, date=%s",l,t);return}e.replaceRange(h,{line:o.line,ch:0},c)}catch(h){console.error(h)}}};var Il=require("@codemirror/state"),Bl=require("@codemirror/view");function Pl(n,e,t){return Bl.ViewPlugin.fromClass(class{update(i){i.docChanged&&i.changes.iterChanges((o,l,c,d,m)=>{let h=i.state.doc,y=h.sliceString(d-2,d);if(m.length===0)return;let _=t.autoCompleteTrigger.value,w=t.reminderTimeStep.value;_===y&&sn(n,e,w).then(x=>{let b=t.primaryFormat.value.format;try{let D=h.lineAt(d),F=D.text.lastIndexOf(_),T=F+_.length;_.startsWith("(")&&D.text.charAt(T)===")"&&T++;let C=D.text.substring(0,F)+D.text.substring(T),A=b.appendReminder(C,x,F);if(A==null){console.error("Cannot append reminder time to the line: line=%s, date=%s",D.text,x);return}let L=i.view.state.update({changes:{from:D.from,to:D.to,insert:A.insertedLine},selection:Il.EditorSelection.cursor(D.from+A.caretPosition)});i.view.update([L])}catch(D){console.error(D)}}).catch(()=>{})})}})}var Hl=require("obsidian");var Al=require("obsidian");function bh(n){let e,t,i,o,l;return{c(){e=N("div"),t=N("span"),i=de(),o=N("span"),l=Re(n[0]),O(t,"class","icon svelte-14sroca"),O(o,"class","text svelte-14sroca"),O(e,"class","icon-text svelte-14sroca")},m(c,d){ie(c,e,d),M(e,t),n[3](t),M(e,i),M(e,o),M(o,l)},p(c,[d]){d&1&&Be(l,c[0])},i:ge,o:ge,d(c){c&&ee(e),n[3](null)}}}function vh(n,e,t){let{icon:i=""}=e,{text:o=""}=e,l;Jt(()=>{(0,Al.setIcon)(l,i)});function c(d){Pe[d?"unshift":"push"](()=>{l=d,t(1,l)})}return n.$$set=d=>{"icon"in d&&t(2,i=d.icon),"text"in d&&t(0,o=d.text)},[o,l,i,c]}var zs=class extends Te{constructor(e){super(),Le(this,e,vh,bh,Qe,{icon:2,text:0})}},Di=zs;function Wl(n,e,t){let i=n.slice();return i[11]=e[t],i[13]=t,i}function $l(n){let e,t=n[11].label+"",i,o,l;return{c(){e=N("option"),i=Re(t),e.__value=o=n[13],tn(e,e.__value),e.selected=l=n[5]===n[13]},m(c,d){ie(c,e,d),M(e,i)},p(c,d){d&16&&t!==(t=c[11].label+"")&&Be(i,t),d&32&&l!==(l=c[5]===c[13])&&(e.selected=l)},d(c){c&&ee(e)}}}function wh(n){let e,t,i,o,l,c,d,m,h,y,_,w,x,b,D,F,T,C,A,L,V,P;i=new oi({props:{markdown:n[0].title,sourcePath:n[0].file}}),d=new Di({props:{icon:"link",text:n[0].file}}),w=new Di({props:{icon:"check-small"}}),F=new Di({props:{icon:"minus-with-circle",text:"Mute"}});let ve=xe(n[4]),K=[];for(let j=0;j<ve.length;j+=1)K[j]=$l(Wl(n,ve,j));return{c(){e=N("main"),t=N("h3"),He(i.$$.fragment),l=de(),c=N("button"),He(d.$$.fragment),h=de(),y=N("div"),_=N("button"),He(w.$$.fragment),x=N("span"),x.textContent="Done",b=de(),D=N("button"),He(F.$$.fragment),T=de(),C=N("select"),A=N("option"),A.textContent="Snooze";for(let j=0;j<K.length;j+=1)K[j].c();O(t,"class","reminder-title svelte-1hdpphd"),O(t,"aria-label",o=n[0].title),O(c,"class","reminder-file svelte-1hdpphd"),O(c,"aria-label",m=n[0].file),O(_,"class","mod-cta"),A.selected=!0,A.disabled=!0,A.hidden=!0,A.__value="Snooze",tn(A,A.__value),O(C,"class","dropdown later-select svelte-1hdpphd"),n[5]===void 0&&Mt(()=>n[10].call(C)),O(y,"class","reminder-actions svelte-1hdpphd")},m(j,te){ie(j,e,te),M(e,t),Ae(i,t,null),M(e,l),M(e,c),Ae(d,c,null),M(e,h),M(e,y),M(y,_),Ae(w,_,null),M(_,x),n[9](_),M(y,b),M(y,D),Ae(F,D,null),M(y,T),M(y,C),M(C,A);for(let se=0;se<K.length;se+=1)K[se]&&K[se].m(C,null);vr(C,n[5],!0),L=!0,V||(P=[ce(c,"click",function(){Ct(n[2])&&n[2].apply(this,arguments)}),ce(_,"click",function(){Ct(n[1])&&n[1].apply(this,arguments)}),ce(D,"click",function(){Ct(n[3])&&n[3].apply(this,arguments)}),ce(C,"change",n[10]),ce(C,"change",n[7])],V=!0)},p(j,[te]){n=j;let se={};te&1&&(se.markdown=n[0].title),te&1&&(se.sourcePath=n[0].file),i.$set(se),(!L||te&1&&o!==(o=n[0].title))&&O(t,"aria-label",o);let U={};if(te&1&&(U.text=n[0].file),d.$set(U),(!L||te&1&&m!==(m=n[0].file))&&O(c,"aria-label",m),te&48){ve=xe(n[4]);let re;for(re=0;re<ve.length;re+=1){let le=Wl(n,ve,re);K[re]?K[re].p(le,te):(K[re]=$l(le),K[re].c(),K[re].m(C,null))}for(;re<K.length;re+=1)K[re].d(1);K.length=ve.length}te&32&&vr(C,n[5])},i(j){L||(ae(i.$$.fragment,j),ae(d.$$.fragment,j),ae(w.$$.fragment,j),ae(F.$$.fragment,j),L=!0)},o(j){ye(i.$$.fragment,j),ye(d.$$.fragment,j),ye(w.$$.fragment,j),ye(F.$$.fragment,j),L=!1},d(j){j&&ee(e),We(i),We(d),We(w),n[9](null),We(F),et(K,j),V=!1,Se(P)}}}function _h(n,e,t){let{reminder:i}=e,{onRemindMeLater:o}=e,{onDone:l}=e,{onOpenFile:c}=e,{onMute:d}=e,m,{laters:h=[]}=e,y;function _(){let b=h[m];b!=null&&o(b.later())}Jt(async()=>{await Ss(),y.focus()});function w(b){Pe[b?"unshift":"push"](()=>{y=b,t(6,y)})}function x(){m=ti(this),t(5,m)}return n.$$set=b=>{"reminder"in b&&t(0,i=b.reminder),"onRemindMeLater"in b&&t(8,o=b.onRemindMeLater),"onDone"in b&&t(1,l=b.onDone),"onOpenFile"in b&&t(2,c=b.onOpenFile),"onMute"in b&&t(3,d=b.onMute),"laters"in b&&t(4,h=b.laters)},[i,l,c,d,h,m,y,_,o,w,x]}var Zs=class extends Te{constructor(e){super(),Le(this,e,_h,wh,Qe,{reminder:0,onRemindMeLater:8,onDone:1,onOpenFile:2,onMute:3,laters:4})}},Vl=Zs;var jl=window.require?window.require("electron"):void 0,Si=class{constructor(e,t,i){this.app=e;this.useSystemNotification=t;this.laters=i}show(e,t,i,o,l){if(!this.isSystemNotification())this.showBuiltinReminder(e,t,i,o,l);else{let c=jl.remote.Notification,d=new c({title:"Obsidian Reminder",body:e.title});d.on("click",()=>{d.close(),this.showBuiltinReminder(e,t,i,o,l)}),d.on("close",()=>{o()});{let m=this.laters.value;d.on("action",(y,_)=>{if(_===0){i();return}let w=m[_-1];t(w.later())});let h=[{type:"button",text:"Mark as Done"}];m.forEach(y=>{h.push({type:"button",text:y.label})}),d.actions=h}d.show()}}showBuiltinReminder(e,t,i,o,l){new Js(this.app,this.laters.value,e,t,i,o,l).open()}isSystemNotification(){return this.isMobile()?!1:this.useSystemNotification.value}isMobile(){return jl===void 0}},Js=class extends Hl.Modal{constructor(t,i,o,l,c,d,m){super(t);this.laters=i;this.reminder=o;this.onRemindMeLater=l;this.onDone=c;this.onCancel=d;this.onOpenFile=m;g(this,"canceled",!0)}onOpen(){this.reminder.beingDisplayed=!0;let{contentEl:t}=this;new Vl({target:t,props:{reminder:this.reminder,laters:this.laters,onRemindMeLater:i=>{this.onRemindMeLater(i),this.canceled=!1,this.close()},onDone:()=>{this.canceled=!1,this.onDone(),this.close()},onOpenFile:()=>{this.canceled=!0,this.onOpenFile(),this.close()},onMute:()=>{this.canceled=!0,this.close()}}})}onClose(){this.reminder.beingDisplayed=!1;let{contentEl:t}=this;t.empty(),this.canceled&&this.onCancel()}};var on=class{constructor(e){this.plugin=e;g(this,"autoComplete");g(this,"editDetector");g(this,"reminderModal");g(this,"viewProxy");this.viewProxy=new ui(this.plugin,t=>{if(t.muteNotification){this.showReminder(t);return}this.openReminderFile(t)}),this.autoComplete=new ki(e.settings.autoCompleteTrigger,e.settings.reminderTimeStep,e.settings.primaryFormat),this.editDetector=new qs(e.settings.editDetectionSec),this.reminderModal=new Si(e.app,e.settings.useSystemNotification,e.settings.laters)}onload(){this.plugin.registerView(dt,e=>this.viewProxy.createView(e)),this.plugin.addSettingTab(new Ks(this.plugin.app,this.plugin)),this.plugin.registerDomEvent(document,"keydown",()=>{this.editDetector.fileChanged()}),Bt.Platform.isDesktopApp&&this.plugin.registerEditorExtension(Pl(this.plugin.app,this.plugin.reminders,this.plugin.settings)),el(this.plugin)}onLayoutReady(){this.plugin.data.debug.value&&rl(this.plugin),this.viewProxy.openView()}onunload(){this.detachReminderList()}isEditing(){return this.editDetector.isEditing()}invalidate(){this.viewProxy.invalidate()}reload(e=!1){this.viewProxy.reload(e)}showAutoComplete(e){this.autoComplete.show(this.plugin.app,e,this.plugin.reminders)}showReminderModal(e,t,i,o,l){this.reminderModal.show(e,t,i,o,l)}showReminderList(){var e;this.plugin.app.workspace.getLeavesOfType(dt).length||(e=this.plugin.app.workspace.getRightLeaf(!1))==null||e.setViewState({type:dt})}detachReminderList(){this.plugin.app.workspace.getLeavesOfType(dt).forEach(e=>e.detach())}async openReminderFile(e){let t=this.plugin.app.workspace.getLeaf(!1);console.log("Open reminder: ",e);let i=this.plugin.app.vault.getAbstractFileByPath(e.file);if(!(i instanceof Bt.TFile)){console.error("Cannot open file because it isn't a TFile: %o",i);return}if(await t.openFile(i),!(t.view instanceof Bt.MarkdownView))return;let o=t.view.editor.getLine(e.rowNumber);t.view.editor.setSelection({line:e.rowNumber,ch:0},{line:e.rowNumber,ch:o.length})}showReminder(e){e.muteNotification=!0,this.showReminderModal(e,t=>{console.info("Remind me later: time=%o",t),e.time=t,e.muteNotification=!1,this.plugin.fileSystem.updateReminder(e,!1),this.plugin.data.save(!0)},()=>{console.info("done"),e.muteNotification=!1,this.plugin.fileSystem.updateReminder(e,!0),this.plugin.data.save(!0)},()=>{console.info("Mute"),e.muteNotification=!0,this.reload(!0)},()=>{console.info("Open"),this.openReminderFile(e)})}},qs=class{constructor(e){this.editDetectionSec=e;g(this,"lastModified")}fileChanged(){this.lastModified=new Date}isEditing(){return this.editDetectionSec.value<=0||this.lastModified==null?!1:(new Date().getTime()-this.lastModified.getTime())/1e3<this.editDetectionSec.value}},Ks=class extends Bt.PluginSettingTab{constructor(t,i){super(t,i);this.plugin=i}display(){let{containerEl:t}=this;this.plugin.settings.settings.displayOn(t)}};var Xs=require("obsidian"),an=class{constructor(e,t,i){this.vault=e;this.reminders=t;this.onRemindersChanged=i}onload(e){[this.vault.on("modify",async t=>{await this.reloadRemindersInFile(t)&&this.onRemindersChanged()}),this.vault.on("delete",async t=>{await this.removeRemindersByFile(t.path)&&this.onRemindersChanged()}),this.vault.on("rename",async(t,i)=>{await this.removeRemindersByFile(i)&&(await this.reloadRemindersInFile(t),this.onRemindersChanged())})].forEach(t=>{e.registerEvent(t)})}async removeRemindersByFile(e){return console.debug("Remove file: path=%s",e),this.reminders.removeByFile(e)}async reloadRemindersInFile(e){if(console.debug("Reload file and collect reminders: file=%s",e.path),!(e instanceof Xs.TFile))return console.debug("Cannot read file other than TFile: file=%o",e),!1;if(!this.isMarkdownFile(e))return console.debug("Not a markdown file: file=%o",e),!1;let i=new Tt(e.path,await this.vault.cachedRead(e)).getReminders(!1);if(i.length>0){if(!this.reminders.replaceFile(e.path,i))return!1}else if(!this.reminders.removeByFile(e.path))return!1;return!0}async reloadRemindersInAllFiles(){console.debug("Reload all files and collect reminders"),this.reminders.clear();for(let e of this.vault.getMarkdownFiles())await this.reloadRemindersInFile(e);this.onRemindersChanged()}isMarkdownFile(e){return e.extension.toLowerCase()==="md"}async updateReminder(e,t){let i=this.vault.getAbstractFileByPath(e.file);if(!(i instanceof Xs.TFile)){console.error("file is not instance of TFile: %o",i);return}let o=new Tt(i.path,await this.vault.read(i));await o.updateReminder(e,{checked:t,time:e.time}),await this.vault.modify(i,o.getContent())}};var ln=class{constructor(e,t){this.plugin=e;this.reminders=t;g(this,"restoring",!0);g(this,"changed",!1);g(this,"scanned",new Vt(!1));g(this,"debug",new Vt(!1));g(this,"_settings",new Sr);this.settings.forEach(i=>{i.rawValue.onChanged(()=>{this.restoring||(i.hasTag(ct)&&(this.scanned.value=!1),this.changed=!0)})})}async load(){console.debug("Load reminder plugin data");let e=await this.plugin.loadData();if(!e){this.scanned.value=!1;return}this.scanned.value=e.scanned,e.debug!=null&&(this.debug.value=e.debug);let t=e.settings;this.settings.forEach(i=>{i.load(t)}),e.reminders&&Object.keys(e.reminders).forEach(i=>{let o=e.reminders[i];o&&this.reminders.replaceFile(i,o.map(l=>new cr(i,l.title,W.parse(l.time),l.rowNumber,l.done||!1)))}),this.changed=!1,this.restoring&&(this.restoring=!1)}async save(e=!1){if(!e&&!this.changed)return;console.debug("Save reminder plugin data: force=%s, changed=%s",e,this.changed);let t={};this.reminders.fileToReminders.forEach((o,l)=>{t[l]=o.map(c=>({title:c.title,time:c.time.toString(),rowNumber:c.rowNumber,done:c.done}))});let i={};this.settings.forEach(o=>{o.store(i)}),await this.plugin.saveData({scanned:this.scanned.value,reminders:t,debug:this.debug.value,settings:i}),this.changed=!1}get settings(){return this._settings}};var Fr=require("obsidian");var Gl=_t(ot(),1);var Ti=class{constructor(e,t,i,o){this.app=e;this.reminders=t;this.settings=i;this.updateReminder=o;g(this,"isUpdating",!1)}async updateDailyNote(e=!0,t){if(!this.settings.autoEmbedTodosInDailyNote.value||this.isUpdating)return;let i=t||W.now(),o=this.findDailyNote(i);if(!o){e||new Fr.Notice(`\u672A\u627E\u5230\u65E5\u8BB0\u672C (${i.toYYYYMMDD()})`);return}this.isUpdating=!0;try{console.info(`[DailyNoteManager] Total reminders in system: ${this.reminders.reminders.length}`);let l=this.reminders.byDate(i);console.info(`[DailyNoteManager] Filtered reminders for ${i.toYYYYMMDD()}: ${l.length}`);let c=await this.app.vault.read(o),d=this.updateReminderSection(c,l);if(d===null){if(!e){let m=this.settings.dailyNoteSectionMarker.value;new Fr.Notice(`\u672A\u627E\u5230\u5D4C\u5165\u6807\u8BB0: <!-- start of ${m} -->`)}return}c!==d?(console.info(`Updating daily note content for ${i.toYYYYMMDD()}...`),await this.app.vault.modify(o,d),e||new Fr.Notice(`\u65E5\u8BB0\u672C\u5F85\u529E\u4E8B\u9879\u5DF2\u66F4\u65B0 (${i.toYYYYMMDD()})`)):e||new Fr.Notice("\u65E5\u8BB0\u672C\u5DF2\u662F\u6700\u65B0\u72B6\u6001")}catch(l){console.error("Failed to update daily note:",l),e||new Fr.Notice("\u66F4\u65B0\u65E5\u8BB0\u672C\u5931\u8D25\uFF0C\u8BF7\u67E5\u770B\u63A7\u5236\u53F0\u65E5\u5FD7")}finally{this.isUpdating=!1}}getDailyNoteDate(e){let t=e.name.match(/(\d{4}-\d{2}-\d{2})/);if(!t)return null;let i=t[1],o=(0,Gl.default)(i,"YYYY-MM-DD");return o.isValid()?new W(o,!1):null}findDailyNote(e){let t=e.toYYYYMMDD(),i=this.app.vault.getMarkdownFiles(),o=i.filter(l=>l.basename===t);return o.length===0&&(o=i.filter(l=>l.name.includes(t))),o.length===0?null:o.reduce((l,c)=>l.stat.mtime>c.stat.mtime?l:c)}updateReminderSection(e,t){let i=this.settings.dailyNoteSectionMarker.value,o=`<!-- start of ${i} -->`,l=`<!-- end of ${i} -->`;console.info(`[DailyNoteManager] Searching for markers: "${o}" and "${l}"`);let c=e.indexOf(o),d=e.indexOf(l);if(c===-1||d===-1)return console.warn(`[DailyNoteManager] Markers not found in file content. Start: ${c}, End: ${d}`),null;let m=t.map(y=>(console.info(`[DailyNoteManager] Embedding reminder: "${y.title}", done: ${y.done}`),`- [${y.done?"x":" "}] ${y.title} [[${y.file}|source]] <!-- reminder-key: ${y.key()} -->`)).join(`
`),h=`${o}
${m}
${l}`;return e.substring(0,c)+h+e.substring(d+l.length)}async handleFileModify(e){if(this.isUpdating||!this.settings.autoEmbedTodosInDailyNote.value)return;let t=this.getDailyNoteDate(e);if(!t)return;console.debug("Daily note modified, checking for sync...",e.path,t.toYYYYMMDD());let i=await this.app.vault.read(e),o=this.settings.dailyNoteSectionMarker.value,l=`<!-- start of ${o} -->`,c=`<!-- end of ${o} -->`,d=i.indexOf(l),m=i.indexOf(c);if(d===-1||m===-1)return;let y=i.substring(d+l.length,m).split(`
`),_=this.reminders.byDate(t),w=!1;for(let x of y){let b=$t.parse(0,x.trim());if(b){let D=b.body.match(/<!-- reminder-key: (.*?) -->/),F=D?D[1]:null,T=_.find(C=>F?C.key()===F:b.body.startsWith(C.title));if(T){let C=b.isChecked();T.done!==C&&(console.debug("Syncing checkbox state back to source:",T.title,C),await this.updateReminder(T,C),w=!0)}}}w||await this.updateDailyNote(!0,t)}};var Mi=require("obsidian");var Fi=class extends Mi.Plugin{constructor(t,i){super(t,i);g(this,"_data");g(this,"_ui");g(this,"_reminders");g(this,"_fileSystem");g(this,"_notificationWorker");g(this,"_dailyNoteManager");this._reminders=new En(()=>{this.ui&&this.ui.invalidate(),this.data.changed=!0}),this._data=new ln(this,this.reminders),this.reminders.reminderTime=this.settings.reminderTime,at.setTimeFormat(this.settings.dateFormat,this.settings.dateTimeFormat,this.settings.strictDateFormat),this._ui=new on(this),this._fileSystem=new an(t.vault,this.reminders,()=>{this.ui.reload(!0)}),this._notificationWorker=new Ir(this),this._dailyNoteManager=new Ti(t,this.reminders,this.settings,(o,l)=>this.fileSystem.updateReminder(o,l))}async onload(){this.ui.onload(),this.app.workspace.onLayoutReady(async()=>{await this.data.load(),this.ui.onLayoutReady(),this.fileSystem.onload(this),this._notificationWorker.startPeriodicTask(),this.registerEvent(this.app.vault.on("modify",t=>{t instanceof Mi.TFile&&this._dailyNoteManager.handleFileModify(t)})),this.reminders.addOnChange(()=>{let t=this.app.workspace.getActiveFile();if(t){let i=this._dailyNoteManager.getDailyNoteDate(t);if(i){this._dailyNoteManager.updateDailyNote(!0,i);return}}this._dailyNoteManager.updateDailyNote()}),this.addCommand({id:"sync-daily-note",name:"Sync Daily Note",callback:()=>{let t=this.app.workspace.getActiveFile();if(t){let i=this._dailyNoteManager.getDailyNoteDate(t);if(i){this._dailyNoteManager.updateDailyNote(!1,i);return}}this._dailyNoteManager.updateDailyNote(!1)}})})}onunload(){this.ui.onunload()}get reminders(){return this._reminders}get ui(){return this._ui}get fileSystem(){return this._fileSystem}get data(){return this._data}get settings(){return this.data.settings}};
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.30.1 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)
*/
